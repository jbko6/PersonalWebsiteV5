(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();const Rc=!1;var Ni=Array.isArray,Ff=Array.prototype.indexOf,bo=Array.from,gi=Object.defineProperty,rr=Object.getOwnPropertyDescriptor,Ic=Object.getOwnPropertyDescriptors,Lf=Object.prototype,Bf=Array.prototype,wo=Object.getPrototypeOf,xl=Object.isExtensible;function Uf(t){return typeof t=="function"}const gt=()=>{};function Wf(t){return t()}function yi(t){for(var e=0;e<t.length;e++)t[e]()}function Pc(){var t,e,n=new Promise((r,s)=>{t=r,e=s});return{promise:n,resolve:t,reject:e}}function So(t,e){if(Array.isArray(t))return t;if(e===void 0||!(Symbol.iterator in t))return Array.from(t);const n=[];for(const r of t)if(n.push(r),n.length===e)break;return n}const bt=2,$o=4,Fi=8,qn=16,Rn=32,cr=64,ko=128,qt=256,bi=512,ct=1024,It=2048,In=4096,Zt=8192,ur=16384,Li=32768,dr=65536,Cl=1<<17,Oc=1<<18,Lr=1<<19,Mc=1<<20,Ma=1<<21,xo=1<<22,sr=1<<23,Cn=Symbol("$state"),Hf=Symbol("legacy props"),zf=Symbol(""),Cr=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"},qf=11;function Nc(t){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function jf(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function Xf(t){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Vf(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Jf(t){throw new Error("https://svelte.dev/e/effect_orphan")}function Yf(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Kf(t){throw new Error("https://svelte.dev/e/props_invalid_value")}function Gf(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Qf(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Zf(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function eh(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const Bi=1,Ui=2,Fc=4,th=8,nh=16,rh=1,sh=2,ih=4,ah=8,oh=16,lh=1,ch=2,uh=4,dh=1,fh=2,Xe=Symbol(),hh="http://www.w3.org/1999/xhtml",mh="@attach";function ph(){console.warn("https://svelte.dev/e/select_multiple_invalid_value")}function vh(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}let _h=!1;function Lc(t){return t===this.v}function Wi(t,e){return t!=t?e==e:t!==e||t!==null&&typeof t=="object"||typeof t=="function"}function gh(t,e){return t!==e}function Bc(t){return!Wi(t,this.v)}let Br=!1,yh=!1;function bh(){Br=!0}let Ie=null;function Dr(t){Ie=t}function st(t){return Uc().get(t)}function wh(t,e){return Uc().set(t,e),e}function Ce(t,e=!1,n){Ie={p:Ie,c:null,e:null,s:t,x:null,l:Br&&!e?{s:null,u:null,$:[]}:null}}function Ee(t){var e=Ie,n=e.e;if(n!==null){e.e=null;for(var r of n)tu(r)}return t!==void 0&&(e.x=t),Ie=e.p,t??{}}function Ur(){return!Br||Ie!==null&&Ie.l===null}function Uc(t){return Ie===null&&Nc(),Ie.c??=new Map(Sh(Ie)||void 0)}function Sh(t){let e=t.p;for(;e!==null;){const n=e.c;if(n!==null)return n;e=e.p}return null}let Zn=[];function Wc(){var t=Zn;Zn=[],yi(t)}function An(t){if(Zn.length===0&&!Ss){var e=Zn;queueMicrotask(()=>{e===Zn&&Wc()})}Zn.push(t)}function $h(){for(;Zn.length>0;)Wc()}const kh=new WeakMap;function Hc(t){var e=he;if(e===null)return _e.f|=sr,t;if((e.f&Li)===0){if((e.f&ko)===0)throw!e.parent&&t instanceof Error&&zc(t),t;e.b.error(t)}else Rr(t,e)}function Rr(t,e){for(;e!==null;){if((e.f&ko)!==0)try{e.b.error(t);return}catch(n){t=n}e=e.parent}throw t instanceof Error&&zc(t),t}function zc(t){const e=kh.get(t);e&&(gi(t,"message",{value:e.message}),gi(t,"stack",{value:e.stack}))}const Js=new Set;let Re=null,ai=null,Yt=null,Na=new Set,un=[],Hi=null,Fa=!1,Ss=!1;class fn{current=new Map;#e=new Map;#n=new Set;#i=0;#t=null;#o=[];#a=[];#s=[];#r=[];#l=[];skipped_effects=new Set;process(e){un=[],ai=null,this.apply();for(const i of e)this.#c(i);if(this.#i===0){var n=Yt;this.#d();var r=this.#o,s=this.#a;this.#o=[],this.#a=[],this.#s=[],ai=this,Re=null,Yt=n,El(r),El(s),ai=null,this.#t?.resolve()}else this.#u(this.#o),this.#u(this.#a),this.#u(this.#s);Yt=null}#c(e){e.f^=ct;for(var n=e.first;n!==null;){var r=n.f,s=(r&(Rn|cr))!==0,i=s&&(r&ct)!==0,a=i||(r&Zt)!==0||this.skipped_effects.has(n);if(!a&&n.fn!==null){s?n.f^=ct:(r&$o)!==0?this.#a.push(n):Ms(n)&&((n.f&qn)!==0&&this.#s.push(n),As(n));var o=n.first;if(o!==null){n=o;continue}}var l=n.parent;for(n=n.next;n===null&&l!==null;)n=l.next,l=l.parent}}#u(e){for(const n of e)((n.f&It)!==0?this.#r:this.#l).push(n),dt(n,ct);e.length=0}capture(e,n){this.#e.has(e)||this.#e.set(e,n),this.current.set(e,e.v),Yt?.set(e,e.v)}activate(){Re=this}deactivate(){Re=null,Yt=null}flush(){if(un.length>0){if(this.activate(),qc(),Re!==null&&Re!==this)return}else this.#i===0&&this.#d();this.deactivate();for(const e of Na)if(Na.delete(e),e(),Re!==null)break}#d(){for(const e of this.#n)e();if(this.#n.clear(),Js.size>1){this.#e.clear();let e=!0;for(const n of Js){if(n===this){e=!1;continue}const r=[];for(const[i,a]of this.current){if(n.current.has(i))if(e&&a!==n.current.get(i))n.current.set(i,a);else continue;r.push(i)}if(r.length===0)continue;const s=[...n.current.keys()].filter(i=>!this.current.has(i));if(s.length>0){for(const i of r)jc(i,s);if(un.length>0){Re=n,n.apply();for(const i of un)n.#c(i);un=[],n.deactivate()}}}Re=null}Js.delete(this)}increment(){this.#i+=1}decrement(){this.#i-=1;for(const e of this.#r)dt(e,It),ar(e);for(const e of this.#l)dt(e,In),ar(e);this.flush()}add_callback(e){this.#n.add(e)}settled(){return(this.#t??=Pc()).promise}static ensure(){if(Re===null){const e=Re=new fn;Js.add(Re),Ss||fn.enqueue(()=>{Re===e&&e.flush()})}return Re}static enqueue(e){An(e)}apply(){}}function xh(t){var e=Ss;Ss=!0;try{for(var n;;){if($h(),un.length===0&&(Re?.flush(),un.length===0))return Hi=null,n;qc()}}finally{Ss=e}}function qc(){var t=Ar;Fa=!0;try{var e=0;for(Dl(!0);un.length>0;){var n=fn.ensure();if(e++>1e3){var r,s;Ch()}n.process(un),Bn.clear()}}finally{Fa=!1,Dl(t),Hi=null}}function Ch(){try{Yf()}catch(t){Rr(t,Hi)}}let Gn=null;function El(t){var e=t.length;if(e!==0){for(var n=0;n<e;){var r=t[n++];if((r.f&(ur|Zt))===0&&Ms(r)&&(Gn=[],As(r),r.deps===null&&r.first===null&&r.nodes_start===null&&(r.teardown===null&&r.ac===null?iu(r):r.fn=null),Gn?.length>0)){Bn.clear();for(const s of Gn)As(s);Gn=[]}}Gn=null}}function jc(t,e){if(t.reactions!==null)for(const n of t.reactions){const r=n.f;(r&bt)!==0?jc(n,e):(r&(xo|qn))!==0&&Xc(n,e)&&(dt(n,It),ar(n))}}function Xc(t,e){if(t.deps!==null){for(const n of t.deps)if(e.includes(n)||(n.f&bt)!==0&&Xc(n,e))return!0}return!1}function ar(t){for(var e=Hi=t;e.parent!==null;){e=e.parent;var n=e.f;if(Fa&&e===he&&(n&qn)!==0)return;if((n&(cr|Rn))!==0){if((n&ct)===0)return;e.f^=ct}}un.push(e)}function Eh(t){let e=0,n=Wn(0),r;return()=>{Hh()&&(d(n),zr(()=>(e===0&&(r=U(()=>t(()=>dn(n)))),e+=1,()=>{An(()=>{e-=1,e===0&&(r?.(),r=void 0,dn(n))})})))}}var Ah=dr|Lr|ko;function Th(t,e,n){new Dh(t,e,n)}class Dh{parent;#e=!1;#n;#i=null;#t;#o;#a;#s=null;#r=null;#l=null;#c=null;#u=0;#d=0;#h=!1;#f=null;#_=()=>{this.#f&&Ir(this.#f,this.#u)};#g=Eh(()=>(this.#f=Wn(this.#u),()=>{this.#f=null}));constructor(e,n,r){this.#n=e,this.#t=n,this.#o=r,this.parent=he.b,this.#e=!!this.#t.pending,this.#a=Pn(()=>{he.b=this;{try{this.#s=ot(()=>r(this.#n))}catch(s){this.error(s)}this.#d>0?this.#p():this.#e=!1}},Ah)}#y(){try{this.#s=ot(()=>this.#o(this.#n))}catch(e){this.error(e)}this.#e=!1}#b(){const e=this.#t.pending;e&&(this.#r=ot(()=>e(this.#n)),fn.enqueue(()=>{this.#s=this.#m(()=>(fn.ensure(),ot(()=>this.#o(this.#n)))),this.#d>0?this.#p():(Un(this.#r,()=>{this.#r=null}),this.#e=!1)}))}is_pending(){return this.#e||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!this.#t.pending}#m(e){var n=he,r=_e,s=Ie;pn(this.#a),Ct(this.#a),Dr(this.#a.ctx);try{return e()}catch(i){return Hc(i),null}finally{pn(n),Ct(r),Dr(s)}}#p(){const e=this.#t.pending;this.#s!==null&&(this.#c=document.createDocumentFragment(),Rh(this.#s,this.#c)),this.#r===null&&(this.#r=ot(()=>e(this.#n)))}#v(e){if(!this.has_pending_snippet()){this.parent&&this.parent.#v(e);return}this.#d+=e,this.#d===0&&(this.#e=!1,this.#r&&Un(this.#r,()=>{this.#r=null}),this.#c&&(this.#n.before(this.#c),this.#c=null),An(()=>{fn.ensure().flush()}))}update_pending_count(e){this.#v(e),this.#u+=e,Na.add(this.#_)}get_effect_pending(){return this.#g(),d(this.#f)}error(e){var n=this.#t.onerror;let r=this.#t.failed;if(this.#h||!n&&!r)throw e;this.#s&&(ut(this.#s),this.#s=null),this.#r&&(ut(this.#r),this.#r=null),this.#l&&(ut(this.#l),this.#l=null);var s=!1,i=!1;const a=()=>{if(s){vh();return}s=!0,i&&eh(),fn.ensure(),this.#u=0,this.#l!==null&&Un(this.#l,()=>{this.#l=null}),this.#e=this.has_pending_snippet(),this.#s=this.#m(()=>(this.#h=!1,ot(()=>this.#o(this.#n)))),this.#d>0?this.#p():this.#e=!1};var o=_e;try{Ct(null),i=!0,n?.(e,a),i=!1}catch(l){Rr(l,this.#a&&this.#a.parent)}finally{Ct(o)}r&&An(()=>{this.#l=this.#m(()=>{this.#h=!0;try{return ot(()=>{r(this.#n,()=>e,()=>a)})}catch(l){return Rr(l,this.#a.parent),null}finally{this.#h=!1}})})}}function Rh(t,e){for(var n=t.nodes_start,r=t.nodes_end;n!==null;){var s=n===r?null:Ps(n);e.append(n),n=s}}function Vc(t,e,n){const r=Ur()?Is:Tn;if(e.length===0){n(t.map(r));return}var s=Re,i=he,a=Ih();Promise.all(e.map(o=>Ph(o))).then(o=>{a();try{n([...t.map(r),...o])}catch(l){(i.f&ur)===0&&Rr(l,i)}s?.deactivate(),La()}).catch(o=>{Rr(o,i)})}function Ih(){var t=he,e=_e,n=Ie,r=Re;return function(){pn(t),Ct(e),Dr(n),r?.activate()}}function La(){pn(null),Ct(null),Dr(null)}function Is(t){var e=bt|It,n=_e!==null&&(_e.f&bt)!==0?_e:null;return he===null||n!==null&&(n.f&qt)!==0?e|=qt:he.f|=Lr,{ctx:Ie,deps:null,effects:null,equals:Lc,f:e,fn:t,reactions:null,rv:0,v:Xe,wv:0,parent:n??he,ac:null}}function Ph(t,e){let n=he;n===null&&jf();var r=n.b,s=void 0,i=Wn(Xe),a=!_e,o=new Map;return Xh(()=>{var l=Pc();s=l.promise;try{Promise.resolve(t()).then(l.resolve,l.reject).then(La)}catch(p){l.reject(p),La()}var c=Re,f=r.is_pending();a&&(r.update_pending_count(1),f||(c.increment(),o.get(c)?.reject(Cr),o.delete(c),o.set(c,l)));const h=(p,u=void 0)=>{if(f||c.activate(),u)u!==Cr&&(i.f|=sr,Ir(i,u));else{(i.f&sr)!==0&&(i.f^=sr),Ir(i,p);for(const[m,v]of o){if(o.delete(m),m===c)break;v.reject(Cr)}}a&&(r.update_pending_count(-1),f||c.decrement())};l.promise.then(h,p=>h(null,p||"unknown"))}),Os(()=>{for(const l of o.values())l.reject(Cr)}),new Promise(l=>{function c(f){function h(){f===s?l(i):c(s)}f.then(h,h)}c(s)})}function B(t){const e=Is(t);return lu(e),e}function Tn(t){const e=Is(t);return e.equals=Bc,e}function Jc(t){var e=t.effects;if(e!==null){t.effects=null;for(var n=0;n<e.length;n+=1)ut(e[n])}}function Oh(t){for(var e=t.parent;e!==null;){if((e.f&bt)===0)return e;e=e.parent}return null}function Co(t){var e,n=he;pn(Oh(t));try{Jc(t),e=fu(t)}finally{pn(n)}return e}function Yc(t){var e=Co(t);if(t.equals(e)||(t.v=e,t.wv=uu()),!fr)if(Yt!==null)Yt.set(t,t.v);else{var n=(Ln||(t.f&qt)!==0)&&t.deps!==null?In:ct;dt(t,n)}}const Bn=new Map;function Wn(t,e){var n={f:0,v:t,reactions:null,equals:Lc,rv:0,wv:0};return n}function Te(t,e){const n=Wn(t);return lu(n),n}function er(t,e=!1,n=!0){const r=Wn(t);return e||(r.equals=Bc),Br&&n&&Ie!==null&&Ie.l!==null&&(Ie.l.s??=[]).push(r),r}function K(t,e,n=!1){_e!==null&&(!Kt||(_e.f&Cl)!==0)&&Ur()&&(_e.f&(bt|qn|xo|Cl))!==0&&!En?.includes(t)&&Zf();let r=n?Gt(e):e;return Ir(t,r)}function Ir(t,e){if(!t.equals(e)){var n=t.v;fr?Bn.set(t,e):Bn.set(t,n),t.v=e;var r=fn.ensure();r.capture(t,n),(t.f&bt)!==0&&((t.f&It)!==0&&Co(t),dt(t,(t.f&qt)===0?ct:In)),t.wv=uu(),Kc(t,It),Ur()&&he!==null&&(he.f&ct)!==0&&(he.f&(Rn|cr))===0&&(Ut===null?Yh([t]):Ut.push(t))}return e}function dn(t){K(t,t.v+1)}function Kc(t,e){var n=t.reactions;if(n!==null)for(var r=Ur(),s=n.length,i=0;i<s;i++){var a=n[i],o=a.f;if(!(!r&&a===he)){var l=(o&It)===0;l&&dt(a,e),(o&bt)!==0?Kc(a,In):l&&((o&qn)!==0&&Gn!==null&&Gn.push(a),ar(a))}}}function Gt(t){if(typeof t!="object"||t===null||Cn in t)return t;const e=wo(t);if(e!==Lf&&e!==Bf)return t;var n=new Map,r=Ni(t),s=Te(0),i=ir,a=o=>{if(ir===i)return o();var l=_e,c=ir;Ct(null),Il(i);var f=o();return Ct(l),Il(c),f};return r&&n.set("length",Te(t.length)),new Proxy(t,{defineProperty(o,l,c){(!("value"in c)||c.configurable===!1||c.enumerable===!1||c.writable===!1)&&Gf();var f=n.get(l);return f===void 0?f=a(()=>{var h=Te(c.value);return n.set(l,h),h}):K(f,c.value,!0),!0},deleteProperty(o,l){var c=n.get(l);if(c===void 0){if(l in o){const f=a(()=>Te(Xe));n.set(l,f),dn(s)}}else K(c,Xe),dn(s);return!0},get(o,l,c){if(l===Cn)return t;var f=n.get(l),h=l in o;if(f===void 0&&(!h||rr(o,l)?.writable)&&(f=a(()=>{var u=Gt(h?o[l]:Xe),m=Te(u);return m}),n.set(l,f)),f!==void 0){var p=d(f);return p===Xe?void 0:p}return Reflect.get(o,l,c)},getOwnPropertyDescriptor(o,l){var c=Reflect.getOwnPropertyDescriptor(o,l);if(c&&"value"in c){var f=n.get(l);f&&(c.value=d(f))}else if(c===void 0){var h=n.get(l),p=h?.v;if(h!==void 0&&p!==Xe)return{enumerable:!0,configurable:!0,value:p,writable:!0}}return c},has(o,l){if(l===Cn)return!0;var c=n.get(l),f=c!==void 0&&c.v!==Xe||Reflect.has(o,l);if(c!==void 0||he!==null&&(!f||rr(o,l)?.writable)){c===void 0&&(c=a(()=>{var p=f?Gt(o[l]):Xe,u=Te(p);return u}),n.set(l,c));var h=d(c);if(h===Xe)return!1}return f},set(o,l,c,f){var h=n.get(l),p=l in o;if(r&&l==="length")for(var u=c;u<h.v;u+=1){var m=n.get(u+"");m!==void 0?K(m,Xe):u in o&&(m=a(()=>Te(Xe)),n.set(u+"",m))}if(h===void 0)(!p||rr(o,l)?.writable)&&(h=a(()=>Te(void 0)),K(h,Gt(c)),n.set(l,h));else{p=h.v!==Xe;var v=a(()=>Gt(c));K(h,v)}var _=Reflect.getOwnPropertyDescriptor(o,l);if(_?.set&&_.set.call(f,c),!p){if(r&&typeof l=="string"){var w=n.get("length"),g=Number(l);Number.isInteger(g)&&g>=w.v&&K(w,g+1)}dn(s)}return!0},ownKeys(o){d(s);var l=Reflect.ownKeys(o).filter(h=>{var p=n.get(h);return p===void 0||p.v!==Xe});for(var[c,f]of n)f.v!==Xe&&!(c in o)&&l.push(c);return l},setPrototypeOf(){Qf()}})}function Al(t){try{if(t!==null&&typeof t=="object"&&Cn in t)return t[Cn]}catch{}return t}function Mh(t,e){return Object.is(Al(t),Al(e))}var Wt,Gc,Qc,Zc;function Nh(){if(Wt===void 0){Wt=window,Gc=/Firefox/.test(navigator.userAgent);var t=Element.prototype,e=Node.prototype,n=Text.prototype;Qc=rr(e,"firstChild").get,Zc=rr(e,"nextSibling").get,xl(t)&&(t.__click=void 0,t.__className=void 0,t.__attributes=null,t.__style=void 0,t.__e=void 0),xl(n)&&(n.__t=void 0)}}function jn(t=""){return document.createTextNode(t)}function wi(t){return Qc.call(t)}function Ps(t){return Zc.call(t)}function F(t,e){return wi(t)}function de(t,e=!1){{var n=wi(t);return n instanceof Comment&&n.data===""?Ps(n):n}}function Q(t,e=1,n=!1){let r=t;for(;e--;)r=Ps(r);return r}function Fh(t){t.textContent=""}function zi(){return!1}function Lh(t,e){if(e){const n=document.body;t.autofocus=!0,An(()=>{document.activeElement===n&&t.focus()})}}let Tl=!1;function Bh(){Tl||(Tl=!0,document.addEventListener("reset",t=>{Promise.resolve().then(()=>{if(!t.defaultPrevented)for(const e of t.target.elements)e.__on_r?.()})},{capture:!0}))}function Wr(t){var e=_e,n=he;Ct(null),pn(null);try{return t()}finally{Ct(e),pn(n)}}function Uh(t,e,n,r=n){t.addEventListener(e,()=>Wr(n));const s=t.__on_r;s?t.__on_r=()=>{s(),r(!0)}:t.__on_r=()=>r(!0),Bh()}function eu(t){he===null&&_e===null&&Jf(),_e!==null&&(_e.f&qt)!==0&&he===null&&Vf(),fr&&Xf()}function Wh(t,e){var n=e.last;n===null?e.last=e.first=t:(n.next=t,t.prev=n,e.last=t)}function gn(t,e,n,r=!0){var s=he;s!==null&&(s.f&Zt)!==0&&(t|=Zt);var i={ctx:Ie,deps:null,nodes_start:null,nodes_end:null,f:t|It,first:null,fn:e,last:null,next:null,parent:s,b:s&&s.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(n)try{As(i),i.f|=Li}catch(l){throw ut(i),l}else e!==null&&ar(i);if(r){var a=i;if(n&&a.deps===null&&a.teardown===null&&a.nodes_start===null&&a.first===a.last&&(a.f&Lr)===0&&(a=a.first),a!==null&&(a.parent=s,s!==null&&Wh(a,s),_e!==null&&(_e.f&bt)!==0&&(t&cr)===0)){var o=_e;(o.effects??=[]).push(a)}}return i}function Hh(){return _e!==null&&!Kt}function Os(t){const e=gn(Fi,null,!1);return dt(e,ct),e.teardown=t,e}function yt(t){eu();var e=he.f,n=!_e&&(e&Rn)!==0&&(e&Li)===0;if(n){var r=Ie;(r.e??=[]).push(t)}else return tu(t)}function tu(t){return gn($o|Mc,t,!1)}function nu(t){return eu(),gn(Fi|Mc,t,!0)}function zh(t){fn.ensure();const e=gn(cr|Lr,t,!0);return(n={})=>new Promise(r=>{n.outro?Un(e,()=>{ut(e),r(void 0)}):(ut(e),r(void 0))})}function Hr(t){return gn($o,t,!1)}function qh(t,e){var n=Ie,r={effect:null,ran:!1,deps:t};n.l.$.push(r),r.effect=zr(()=>{t(),!r.ran&&(r.ran=!0,U(e))})}function jh(){var t=Ie;zr(()=>{for(var e of t.l.$){e.deps();var n=e.effect;(n.f&ct)!==0&&dt(n,In),Ms(n)&&As(n),e.ran=!1}})}function Xh(t){return gn(xo|Lr,t,!0)}function zr(t,e=0){return gn(Fi|e,t,!0)}function be(t,e=[],n=[]){Vc(e,n,r=>{gn(Fi,()=>t(...r.map(d)),!0)})}function Pn(t,e=0){var n=gn(qn|e,t,!0);return n}function ot(t,e=!0){return gn(Rn|Lr,t,!0,e)}function ru(t){var e=t.teardown;if(e!==null){const n=fr,r=_e;Rl(!0),Ct(null);try{e.call(null)}finally{Rl(n),Ct(r)}}}function su(t,e=!1){var n=t.first;for(t.first=t.last=null;n!==null;){const s=n.ac;s!==null&&Wr(()=>{s.abort(Cr)});var r=n.next;(n.f&cr)!==0?n.parent=null:ut(n,e),n=r}}function Vh(t){for(var e=t.first;e!==null;){var n=e.next;(e.f&Rn)===0&&ut(e),e=n}}function ut(t,e=!0){var n=!1;(e||(t.f&Oc)!==0)&&t.nodes_start!==null&&t.nodes_end!==null&&(Jh(t.nodes_start,t.nodes_end),n=!0),su(t,e&&!n),Si(t,0),dt(t,ur);var r=t.transitions;if(r!==null)for(const i of r)i.stop();ru(t);var s=t.parent;s!==null&&s.first!==null&&iu(t),t.next=t.prev=t.teardown=t.ctx=t.deps=t.fn=t.nodes_start=t.nodes_end=t.ac=null}function Jh(t,e){for(;t!==null;){var n=t===e?null:Ps(t);t.remove(),t=n}}function iu(t){var e=t.parent,n=t.prev,r=t.next;n!==null&&(n.next=r),r!==null&&(r.prev=n),e!==null&&(e.first===t&&(e.first=r),e.last===t&&(e.last=n))}function Un(t,e){var n=[];Eo(t,n,!0),au(n,()=>{ut(t),e&&e()})}function au(t,e){var n=t.length;if(n>0){var r=()=>--n||e();for(var s of t)s.out(r)}else e()}function Eo(t,e,n){if((t.f&Zt)===0){if(t.f^=Zt,t.transitions!==null)for(const a of t.transitions)(a.is_global||n)&&e.push(a);for(var r=t.first;r!==null;){var s=r.next,i=(r.f&dr)!==0||(r.f&Rn)!==0;Eo(r,e,i?n:!1),r=s}}}function Ao(t){ou(t,!0)}function ou(t,e){if((t.f&Zt)!==0){t.f^=Zt,(t.f&ct)===0&&(dt(t,It),ar(t));for(var n=t.first;n!==null;){var r=n.next,s=(n.f&dr)!==0||(n.f&Rn)!==0;ou(n,s?e:!1),n=r}if(t.transitions!==null)for(const i of t.transitions)(i.is_global||e)&&i.in()}}let Ar=!1;function Dl(t){Ar=t}let fr=!1;function Rl(t){fr=t}let _e=null,Kt=!1;function Ct(t){_e=t}let he=null;function pn(t){he=t}let En=null;function lu(t){_e!==null&&(En===null?En=[t]:En.push(t))}let vt=null,Dt=0,Ut=null;function Yh(t){Ut=t}let cu=1,Es=0,ir=Es;function Il(t){ir=t}let Ln=!1;function uu(){return++cu}function Ms(t){var e=t.f;if((e&It)!==0)return!0;if((e&In)!==0){var n=t.deps,r=(e&qt)!==0;if(n!==null){var s,i,a=(e&bi)!==0,o=r&&he!==null&&!Ln,l=n.length;if((a||o)&&(he===null||(he.f&ur)===0)){var c=t,f=c.parent;for(s=0;s<l;s++)i=n[s],(a||!i?.reactions?.includes(c))&&(i.reactions??=[]).push(c);a&&(c.f^=bi),o&&f!==null&&(f.f&qt)===0&&(c.f^=qt)}for(s=0;s<l;s++)if(i=n[s],Ms(i)&&Yc(i),i.wv>t.wv)return!0}(!r||he!==null&&!Ln)&&dt(t,ct)}return!1}function du(t,e,n=!0){var r=t.reactions;if(r!==null&&!En?.includes(t))for(var s=0;s<r.length;s++){var i=r[s];(i.f&bt)!==0?du(i,e,!1):e===i&&(n?dt(i,It):(i.f&ct)!==0&&dt(i,In),ar(i))}}function fu(t){var e=vt,n=Dt,r=Ut,s=_e,i=Ln,a=En,o=Ie,l=Kt,c=ir,f=t.f;vt=null,Dt=0,Ut=null,Ln=(f&qt)!==0&&(Kt||!Ar||_e===null),_e=(f&(Rn|cr))===0?t:null,En=null,Dr(t.ctx),Kt=!1,ir=++Es,t.ac!==null&&(Wr(()=>{t.ac.abort(Cr)}),t.ac=null);try{t.f|=Ma;var h=t.fn,p=h(),u=t.deps;if(vt!==null){var m;if(Si(t,Dt),u!==null&&Dt>0)for(u.length=Dt+vt.length,m=0;m<vt.length;m++)u[Dt+m]=vt[m];else t.deps=u=vt;if(!Ln||(f&bt)!==0&&t.reactions!==null)for(m=Dt;m<u.length;m++)(u[m].reactions??=[]).push(t)}else u!==null&&Dt<u.length&&(Si(t,Dt),u.length=Dt);if(Ur()&&Ut!==null&&!Kt&&u!==null&&(t.f&(bt|In|It))===0)for(m=0;m<Ut.length;m++)du(Ut[m],t);return s!==null&&s!==t&&(Es++,Ut!==null&&(r===null?r=Ut:r.push(...Ut))),(t.f&sr)!==0&&(t.f^=sr),p}catch(v){return Hc(v)}finally{t.f^=Ma,vt=e,Dt=n,Ut=r,_e=s,Ln=i,En=a,Dr(o),Kt=l,ir=c}}function Kh(t,e){let n=e.reactions;if(n!==null){var r=Ff.call(n,t);if(r!==-1){var s=n.length-1;s===0?n=e.reactions=null:(n[r]=n[s],n.pop())}}n===null&&(e.f&bt)!==0&&(vt===null||!vt.includes(e))&&(dt(e,In),(e.f&(qt|bi))===0&&(e.f^=bi),Jc(e),Si(e,0))}function Si(t,e){var n=t.deps;if(n!==null)for(var r=e;r<n.length;r++)Kh(t,n[r])}function As(t){var e=t.f;if((e&ur)===0){dt(t,ct);var n=he,r=Ar;he=t,Ar=!0;try{(e&qn)!==0?Vh(t):su(t),ru(t);var s=fu(t);t.teardown=typeof s=="function"?s:null,t.wv=cu;var i;Rc&&yh&&(t.f&It)!==0&&t.deps}finally{Ar=r,he=n}}}async function $i(){await Promise.resolve(),xh()}function d(t){var e=t.f,n=(e&bt)!==0;if(_e!==null&&!Kt){var r=he!==null&&(he.f&ur)!==0;if(!r&&!En?.includes(t)){var s=_e.deps;if((_e.f&Ma)!==0)t.rv<Es&&(t.rv=Es,vt===null&&s!==null&&s[Dt]===t?Dt++:vt===null?vt=[t]:(!Ln||!vt.includes(t))&&vt.push(t));else{(_e.deps??=[]).push(t);var i=t.reactions;i===null?t.reactions=[_e]:i.includes(_e)||i.push(_e)}}}else if(n&&t.deps===null&&t.effects===null){var a=t,o=a.parent;o!==null&&(o.f&qt)===0&&(a.f^=qt)}if(fr){if(Bn.has(t))return Bn.get(t);if(n){a=t;var l=a.v;return((a.f&ct)===0&&a.reactions!==null||hu(a))&&(l=Co(a)),Bn.set(a,l),l}}else if(n){if(a=t,Yt?.has(a))return Yt.get(a);Ms(a)&&Yc(a)}if(Yt?.has(t))return Yt.get(t);if((t.f&sr)!==0)throw t.v;return t.v}function hu(t){if(t.v===Xe)return!0;if(t.deps===null)return!1;for(const e of t.deps)if(Bn.has(e)||(e.f&bt)!==0&&hu(e))return!0;return!1}function U(t){var e=Kt;try{return Kt=!0,t()}finally{Kt=e}}const Gh=-7169;function dt(t,e){t.f=t.f&Gh|e}function mu(t){if(!(typeof t!="object"||!t||t instanceof EventTarget)){if(Cn in t)Ba(t);else if(!Array.isArray(t))for(let e in t){const n=t[e];typeof n=="object"&&n&&Cn in n&&Ba(n)}}}function Ba(t,e=new Set){if(typeof t=="object"&&t!==null&&!(t instanceof EventTarget)&&!e.has(t)){e.add(t),t instanceof Date&&t.getTime();for(let r in t)try{Ba(t[r],e)}catch{}const n=wo(t);if(n!==Object.prototype&&n!==Array.prototype&&n!==Map.prototype&&n!==Set.prototype&&n!==Date.prototype){const r=Ic(n);for(let s in r){const i=r[s].get;if(i)try{i.call(t)}catch{}}}}}function Qh(t){return t.endsWith("capture")&&t!=="gotpointercapture"&&t!=="lostpointercapture"}const Zh=["beforeinput","click","change","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"];function em(t){return Zh.includes(t)}const tm={formnovalidate:"formNoValidate",ismap:"isMap",nomodule:"noModule",playsinline:"playsInline",readonly:"readOnly",defaultvalue:"defaultValue",defaultchecked:"defaultChecked",srcobject:"srcObject",novalidate:"noValidate",allowfullscreen:"allowFullscreen",disablepictureinpicture:"disablePictureInPicture",disableremoteplayback:"disableRemotePlayback"};function nm(t){return t=t.toLowerCase(),tm[t]??t}const rm=["touchstart","touchmove"];function sm(t){return rm.includes(t)}const pu=new Set,Ua=new Set;function vu(t,e,n,r={}){function s(i){if(r.capture||ds.call(e,i),!i.cancelBubble)return Wr(()=>n?.call(this,i))}return t.startsWith("pointer")||t.startsWith("touch")||t==="wheel"?An(()=>{e.addEventListener(t,s,r)}):e.addEventListener(t,s,r),s}function Ye(t,e,n,r,s){var i={capture:r,passive:s},a=vu(t,e,n,i);(e===document.body||e===window||e===document||e instanceof HTMLMediaElement)&&Os(()=>{e.removeEventListener(t,a,i)})}function Et(t){for(var e=0;e<t.length;e++)pu.add(t[e]);for(var n of Ua)n(t)}let Pl=null;function ds(t){var e=this,n=e.ownerDocument,r=t.type,s=t.composedPath?.()||[],i=s[0]||t.target;Pl=t;var a=0,o=Pl===t&&t.__root;if(o){var l=s.indexOf(o);if(l!==-1&&(e===document||e===window)){t.__root=e;return}var c=s.indexOf(e);if(c===-1)return;l<=c&&(a=l)}if(i=s[a]||t.target,i!==e){gi(t,"currentTarget",{configurable:!0,get(){return i||n}});var f=_e,h=he;Ct(null),pn(null);try{for(var p,u=[];i!==null;){var m=i.assignedSlot||i.parentNode||i.host||null;try{var v=i["__"+r];if(v!=null&&(!i.disabled||t.target===i))if(Ni(v)){var[_,...w]=v;_.apply(i,[t,...w])}else v.call(i,t)}catch(g){p?u.push(g):p=g}if(t.cancelBubble||m===e||m===null)break;i=m}if(p){for(let g of u)queueMicrotask(()=>{throw g});throw p}}finally{t.__root=e,delete t.currentTarget,Ct(f),pn(h)}}}function im(t){var e;e=document.head.appendChild(jn());try{Pn(()=>t(e),Oc)}finally{}}function am(t){var e=document.createElement("template");return e.innerHTML=t.replaceAll("<!>","<!---->"),e.content}function Wa(t,e){var n=he;n.nodes_start===null&&(n.nodes_start=t,n.nodes_end=e)}function V(t,e){var n=(e&dh)!==0,r=(e&fh)!==0,s,i=!t.startsWith("<!>");return()=>{s===void 0&&(s=am(i?t:"<!>"+t),n||(s=wi(s)));var a=r||Gc?document.importNode(s,!0):s.cloneNode(!0);if(n){var o=wi(a),l=a.lastChild;Wa(o,l)}else Wa(a,a);return a}}function om(t){return()=>lm(t())}function lm(t){const e=t.nodeType===qf,n=t.tagName==="SCRIPT"?[t]:t.querySelectorAll("script"),r=he;for(const i of n){const a=document.createElement("script");for(var s of i.attributes)a.setAttribute(s.name,s.value);a.textContent=i.textContent,(e?t.firstChild===i:t===i)&&(r.nodes_start=a),(e?t.lastChild===i:t===i)&&(r.nodes_end=a),i.replaceWith(a)}return t}function xe(){var t=document.createDocumentFragment(),e=document.createComment(""),n=jn();return t.append(e,n),Wa(e,n),t}function I(t,e){t!==null&&t.before(e)}let Ha=!0;function en(t,e){var n=e==null?"":typeof e=="object"?e+"":e;n!==(t.__t??=t.nodeValue)&&(t.__t=n,t.nodeValue=n+"")}function cm(t,e){return um(t,e)}const gr=new Map;function um(t,{target:e,anchor:n,props:r={},events:s,context:i,intro:a=!0}){Nh();var o=new Set,l=h=>{for(var p=0;p<h.length;p++){var u=h[p];if(!o.has(u)){o.add(u);var m=sm(u);e.addEventListener(u,ds,{passive:m});var v=gr.get(u);v===void 0?(document.addEventListener(u,ds,{passive:m}),gr.set(u,1)):gr.set(u,v+1)}}};l(bo(pu)),Ua.add(l);var c=void 0,f=zh(()=>{var h=n??e.appendChild(jn());return Th(h,{pending:()=>{}},p=>{if(i){Ce({});var u=Ie;u.c=i}s&&(r.$$events=s),Ha=a,c=t(p,r)||{},Ha=!0,i&&Ee()}),()=>{for(var p of o){e.removeEventListener(p,ds);var u=gr.get(p);--u===0?(document.removeEventListener(p,ds),gr.delete(p)):gr.set(p,u)}Ua.delete(l),h!==n&&h.parentNode?.removeChild(h)}});return dm.set(c,f),c}let dm=new WeakMap;function $e(t,e,n=!1){var r=t,s=null,i=null,a=Xe,o=n?dr:0,l=!1;const c=(u,m=!0)=>{l=!0,p(m,u)};var f=null;function h(){f!==null&&(f.lastChild.remove(),r.before(f),f=null);var u=a?s:i,m=a?i:s;u&&Ao(u),m&&Un(m,()=>{a?i=null:s=null})}const p=(u,m)=>{if(a!==(a=u)){var v=zi(),_=r;if(v&&(f=document.createDocumentFragment(),f.append(_=jn())),a?s??=m&&ot(()=>m(_)):i??=m&&ot(()=>m(_)),v){var w=Re,g=a?s:i,k=a?i:s;g&&w.skipped_effects.delete(g),k&&w.skipped_effects.add(k),w.add_callback(h)}else h()}};Pn(()=>{l=!1,e(c),l||p(null,null)},o)}function To(t,e,n){var r=t,s=Xe,i,a,o=null,l=Ur()?gh:Wi;function c(){i&&Un(i),o!==null&&(o.lastChild.remove(),r.before(o),o=null),i=a}Pn(()=>{if(l(s,s=e())){var f=r,h=zi();h&&(o=document.createDocumentFragment(),o.append(f=jn())),a=ot(()=>n(f)),h?Re.add_callback(c):c()}})}function tn(t,e){return e}function fm(t,e,n){for(var r=t.items,s=[],i=e.length,a=0;a<i;a++)Eo(e[a].e,s,!0);var o=i>0&&s.length===0&&n!==null;if(o){var l=n.parentNode;Fh(l),l.append(n),r.clear(),ln(t,e[0].prev,e[i-1].next)}au(s,()=>{for(var c=0;c<i;c++){var f=e[c];o||(r.delete(f.k),ln(t,f.prev,f.next)),ut(f.e,!o)}})}function wt(t,e,n,r,s,i=null){var a=t,o={flags:e,items:new Map,first:null},l=(e&Fc)!==0;if(l){var c=t;a=c.appendChild(jn())}var f=null,h=!1,p=new Map,u=Tn(()=>{var w=n();return Ni(w)?w:w==null?[]:bo(w)}),m,v;function _(){hm(v,m,o,p,a,s,e,r,n),i!==null&&(m.length===0?f?Ao(f):f=ot(()=>i(a)):f!==null&&Un(f,()=>{f=null}))}Pn(()=>{v??=he,m=d(u);var w=m.length;if(!(h&&w===0)){h=w===0;var g,k,S,C;if(zi()){var x=new Set,T=Re;for(k=0;k<w;k+=1){S=m[k],C=r(S,k);var $=o.items.get(C)??p.get(C);$?(e&(Bi|Ui))!==0&&_u($,S,k,e):(g=gu(null,o,null,null,S,C,k,s,e,n,!0),p.set(C,g)),x.add(C)}for(const[A,E]of o.items)x.has(A)||T.skipped_effects.add(E.e);T.add_callback(_)}else _();d(u)}})}function hm(t,e,n,r,s,i,a,o,l){var c=(a&th)!==0,f=(a&(Bi|Ui))!==0,h=e.length,p=n.items,u=n.first,m=u,v,_=null,w,g=[],k=[],S,C,x,T;if(c)for(T=0;T<h;T+=1)S=e[T],C=o(S,T),x=p.get(C),x!==void 0&&(x.a?.measure(),(w??=new Set).add(x));for(T=0;T<h;T+=1){if(S=e[T],C=o(S,T),x=p.get(C),x===void 0){var $=r.get(C);if($!==void 0){r.delete(C),p.set(C,$);var A=_?_.next:m;ln(n,_,$),ln(n,$,A),ma($,A,s),_=$}else{var E=m?m.e.nodes_start:s;_=gu(E,n,_,_===null?n.first:_.next,S,C,T,i,a,l)}p.set(C,_),g=[],k=[],m=_.next;continue}if(f&&_u(x,S,T,a),(x.e.f&Zt)!==0&&(Ao(x.e),c&&(x.a?.unfix(),(w??=new Set).delete(x))),x!==m){if(v!==void 0&&v.has(x)){if(g.length<k.length){var D=k[0],M;_=D.prev;var P=g[0],X=g[g.length-1];for(M=0;M<g.length;M+=1)ma(g[M],D,s);for(M=0;M<k.length;M+=1)v.delete(k[M]);ln(n,P.prev,X.next),ln(n,_,P),ln(n,X,D),m=D,_=X,T-=1,g=[],k=[]}else v.delete(x),ma(x,m,s),ln(n,x.prev,x.next),ln(n,x,_===null?n.first:_.next),ln(n,_,x),_=x;continue}for(g=[],k=[];m!==null&&m.k!==C;)(m.e.f&Zt)===0&&(v??=new Set).add(m),k.push(m),m=m.next;if(m===null)continue;x=m}g.push(x),_=x,m=x.next}if(m!==null||v!==void 0){for(var te=v===void 0?[]:bo(v);m!==null;)(m.e.f&Zt)===0&&te.push(m),m=m.next;var Z=te.length;if(Z>0){var W=(a&Fc)!==0&&h===0?s:null;if(c){for(T=0;T<Z;T+=1)te[T].a?.measure();for(T=0;T<Z;T+=1)te[T].a?.fix()}fm(n,te,W)}}c&&An(()=>{if(w!==void 0)for(x of w)x.a?.apply()}),t.first=n.first&&n.first.e,t.last=_&&_.e;for(var ne of r.values())ut(ne.e);r.clear()}function _u(t,e,n,r){(r&Bi)!==0&&Ir(t.v,e),(r&Ui)!==0?Ir(t.i,n):t.i=n}function gu(t,e,n,r,s,i,a,o,l,c,f){var h=(l&Bi)!==0,p=(l&nh)===0,u=h?p?er(s,!1,!1):Wn(s):s,m=(l&Ui)===0?a:Wn(a),v={i:m,v:u,k:i,a:null,e:null,prev:n,next:r};try{if(t===null){var _=document.createDocumentFragment();_.append(t=jn())}return v.e=ot(()=>o(t,u,m,c),_h),v.e.prev=n&&n.e,v.e.next=r&&r.e,n===null?f||(e.first=v):(n.next=v,n.e.next=v.e),r!==null&&(r.prev=v,r.e.prev=v.e),v}finally{}}function ma(t,e,n){for(var r=t.next?t.next.e.nodes_start:n,s=e?e.e.nodes_start:n,i=t.e.nodes_start;i!==null&&i!==r;){var a=Ps(i);s.before(i),i=a}}function ln(t,e,n){e===null?t.first=n:(e.next=n,e.e.next=n&&n.e),n!==null&&(n.prev=e,n.e.prev=e&&e.e)}function Pr(t,e,...n){var r=t,s=gt,i;Pn(()=>{s!==(s=e())&&(i&&(ut(i),i=null),i=ot(()=>s(r,...n)))},dr)}function Ns(t,e,n){var r=t,s,i,a=null,o=null;function l(){i&&(Un(i),i=null),a&&(a.lastChild.remove(),r.before(a),a=null),i=o,o=null}Pn(()=>{if(s!==(s=e())){var c=zi();if(s){var f=r;c&&(a=document.createDocumentFragment(),a.append(f=jn()),i&&Re.skipped_effects.add(i)),o=ot(()=>n(f,s))}c?Re.add_callback(l):l()}},dr)}function or(t,e,n){Hr(()=>{var r=U(()=>e(t,n?.())||{});if(n&&r?.update){var s=!1,i={};zr(()=>{var a=n();mu(a),s&&Wi(i,a)&&(i=a,r.update(a))}),s=!0}if(r?.destroy)return()=>r.destroy()})}function mm(t,e){var n=void 0,r;Pn(()=>{n!==(n=e())&&(r&&(ut(r),r=null),n&&(r=ot(()=>{Hr(()=>n(t))})))})}function yu(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=yu(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function pm(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=yu(t))&&(r&&(r+=" "),r+=e);return r}function za(t){return typeof t=="object"?pm(t):t??""}const Ol=[...` 	
\r\f \v\uFEFF`];function vm(t,e,n){var r=t==null?"":""+t;if(e&&(r=r?r+" "+e:e),n){for(var s in n)if(n[s])r=r?r+" "+s:s;else if(r.length)for(var i=s.length,a=0;(a=r.indexOf(s,a))>=0;){var o=a+i;(a===0||Ol.includes(r[a-1]))&&(o===r.length||Ol.includes(r[o]))?r=(a===0?"":r.substring(0,a))+r.substring(o+1):a=o}}return r===""?null:r}function Ml(t,e=!1){var n=e?" !important;":";",r="";for(var s in t){var i=t[s];i!=null&&i!==""&&(r+=" "+s+": "+i+n)}return r}function pa(t){return t[0]!=="-"||t[1]!=="-"?t.toLowerCase():t}function _m(t,e){if(e){var n="",r,s;if(Array.isArray(e)?(r=e[0],s=e[1]):r=e,t){t=String(t).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var i=!1,a=0,o=!1,l=[];r&&l.push(...Object.keys(r).map(pa)),s&&l.push(...Object.keys(s).map(pa));var c=0,f=-1;const v=t.length;for(var h=0;h<v;h++){var p=t[h];if(o?p==="/"&&t[h-1]==="*"&&(o=!1):i?i===p&&(i=!1):p==="/"&&t[h+1]==="*"?o=!0:p==='"'||p==="'"?i=p:p==="("?a++:p===")"&&a--,!o&&i===!1&&a===0){if(p===":"&&f===-1)f=h;else if(p===";"||h===v-1){if(f!==-1){var u=pa(t.substring(c,f).trim());if(!l.includes(u)){p!==";"&&h++;var m=t.substring(c,h).trim();n+=" "+m+";"}}c=h+1,f=-1}}}}return r&&(n+=Ml(r)),s&&(n+=Ml(s,!0)),n=n.trim(),n===""?null:n}return t==null?null:String(t)}function ie(t,e,n,r,s,i){var a=t.__className;if(a!==n||a===void 0){var o=vm(n,r,i);o==null?t.removeAttribute("class"):e?t.className=o:t.setAttribute("class",o),t.__className=n}else if(i&&s!==i)for(var l in i){var c=!!i[l];(s==null||c!==!!s[l])&&t.classList.toggle(l,c)}return i}function va(t,e={},n,r){for(var s in n){var i=n[s];e[s]!==i&&(n[s]==null?t.style.removeProperty(s):t.style.setProperty(s,i,r))}}function nn(t,e,n,r){var s=t.__style;if(s!==e){var i=_m(e,r);i==null?t.removeAttribute("style"):t.style.cssText=i,t.__style=e}else r&&(Array.isArray(r)?(va(t,n?.[0],r[0]),va(t,n?.[1],r[1],"important")):va(t,n,r));return r}function qa(t,e,n=!1){if(t.multiple){if(e==null)return;if(!Ni(e))return ph();for(var r of t.options)r.selected=e.includes(Nl(r));return}for(r of t.options){var s=Nl(r);if(Mh(s,e)){r.selected=!0;return}}(!n||e!==void 0)&&(t.selectedIndex=-1)}function gm(t){var e=new MutationObserver(()=>{qa(t,t.__value)});e.observe(t,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),Os(()=>{e.disconnect()})}function Nl(t){return"__value"in t?t.__value:t.value}const ss=Symbol("class"),is=Symbol("style"),bu=Symbol("is custom element"),wu=Symbol("is html");function ym(t,e){e?t.hasAttribute("selected")||t.setAttribute("selected",""):t.removeAttribute("selected")}function Ke(t,e,n,r){var s=$u(t);s[e]!==(s[e]=n)&&(e==="loading"&&(t[zf]=n),n==null?t.removeAttribute(e):typeof n!="string"&&ku(t).includes(e)?t[e]=n:t.setAttribute(e,n))}function bm(t,e,n,r,s=!1,i=!1){var a=$u(t),o=a[bu],l=!a[wu],c=e||{},f=t.tagName==="OPTION";for(var h in e)h in n||(n[h]=null);n.class?n.class=za(n.class):(r||n[ss])&&(n.class=null),n[is]&&(n.style??=null);var p=ku(t);for(const S in n){let C=n[S];if(f&&S==="value"&&C==null){t.value=t.__value="",c[S]=C;continue}if(S==="class"){var u=t.namespaceURI==="http://www.w3.org/1999/xhtml";ie(t,u,C,r,e?.[ss],n[ss]),c[S]=C,c[ss]=n[ss];continue}if(S==="style"){nn(t,C,e?.[is],n[is]),c[S]=C,c[is]=n[is];continue}var m=c[S];if(!(C===m&&!(C===void 0&&t.hasAttribute(S)))){c[S]=C;var v=S[0]+S[1];if(v!=="$$")if(v==="on"){const x={},T="$$"+S;let $=S.slice(2);var _=em($);if(Qh($)&&($=$.slice(0,-7),x.capture=!0),!_&&m){if(C!=null)continue;t.removeEventListener($,c[T],x),c[T]=null}if(C!=null)if(_)t[`__${$}`]=C,Et([$]);else{let A=function(E){c[S].call(this,E)};var k=A;c[T]=vu($,t,A,x)}else _&&(t[`__${$}`]=void 0)}else if(S==="style")Ke(t,S,C);else if(S==="autofocus")Lh(t,!!C);else if(!o&&(S==="__value"||S==="value"&&C!=null))t.value=t.__value=C;else if(S==="selected"&&f)ym(t,C);else{var w=S;l||(w=nm(w));var g=w==="defaultValue"||w==="defaultChecked";if(C==null&&!o&&!g)if(a[S]=null,w==="value"||w==="checked"){let x=t;const T=e===void 0;if(w==="value"){let $=x.defaultValue;x.removeAttribute(w),x.defaultValue=$,x.value=x.__value=T?$:null}else{let $=x.defaultChecked;x.removeAttribute(w),x.defaultChecked=$,x.checked=T?$:!1}}else t.removeAttribute(S);else g||p.includes(w)&&(o||typeof C!="string")?(t[w]=C,w in a&&(a[w]=Xe)):typeof C!="function"&&Ke(t,w,C)}}}return c}function Su(t,e,n=[],r=[],s,i=!1,a=!1){Vc(n,r,o=>{var l=void 0,c={},f=t.nodeName==="SELECT",h=!1;if(Pn(()=>{var u=e(...o.map(d)),m=bm(t,l,u,s,i,a);h&&f&&"value"in u&&qa(t,u.value);for(let _ of Object.getOwnPropertySymbols(c))u[_]||ut(c[_]);for(let _ of Object.getOwnPropertySymbols(u)){var v=u[_];_.description===mh&&(!l||v!==l[_])&&(c[_]&&ut(c[_]),c[_]=ot(()=>mm(t,()=>v))),m[_]=v}l=m}),f){var p=t;Hr(()=>{qa(p,l.value,!0),gm(p)})}h=!0})}function $u(t){return t.__attributes??={[bu]:t.nodeName.includes("-"),[wu]:t.namespaceURI===hh}}var Fl=new Map;function ku(t){var e=t.getAttribute("is")||t.nodeName,n=Fl.get(e);if(n)return n;Fl.set(e,n=[]);for(var r,s=t,i=Element.prototype;i!==s;){r=Ic(s);for(var a in r)r[a].set&&n.push(a);s=wo(s)}return n}const wm=()=>performance.now(),$n={tick:t=>requestAnimationFrame(t),now:()=>wm(),tasks:new Set};function xu(){const t=$n.now();$n.tasks.forEach(e=>{e.c(t)||($n.tasks.delete(e),e.f())}),$n.tasks.size!==0&&$n.tick(xu)}function Sm(t){let e;return $n.tasks.size===0&&$n.tick(xu),{promise:new Promise(n=>{$n.tasks.add(e={c:t,f:n})}),abort(){$n.tasks.delete(e)}}}function Ys(t,e){Wr(()=>{t.dispatchEvent(new CustomEvent(e))})}function $m(t){if(t==="float")return"cssFloat";if(t==="offset")return"cssOffset";if(t.startsWith("--"))return t;const e=t.split("-");return e.length===1?e[0]:e[0]+e.slice(1).map(n=>n[0].toUpperCase()+n.slice(1)).join("")}function Ll(t){const e={},n=t.split(";");for(const r of n){const[s,i]=r.split(":");if(!s||i===void 0)break;const a=$m(s.trim());e[a]=i.trim()}return e}const km=t=>t;function _t(t,e,n,r){var s=(t&lh)!==0,i=(t&ch)!==0,a=s&&i,o=(t&uh)!==0,l=a?"both":s?"in":"out",c,f=e.inert,h=e.style.overflow,p,u;function m(){return Wr(()=>c??=n()(e,r?.()??{},{direction:l}))}var v={is_global:o,in(){if(e.inert=f,!s){u?.abort(),u?.reset?.();return}i||p?.abort(),Ys(e,"introstart"),p=ja(e,m(),u,1,()=>{Ys(e,"introend"),p?.abort(),p=c=void 0,e.style.overflow=h})},out(k){if(!i){k?.(),c=void 0;return}e.inert=!0,Ys(e,"outrostart"),u=ja(e,m(),p,0,()=>{Ys(e,"outroend"),k?.()})},stop:()=>{p?.abort(),u?.abort()}},_=he;if((_.transitions??=[]).push(v),s&&Ha){var w=o;if(!w){for(var g=_.parent;g&&(g.f&dr)!==0;)for(;(g=g.parent)&&(g.f&qn)===0;);w=!g||(g.f&Li)!==0}w&&Hr(()=>{U(()=>v.in())})}}function ja(t,e,n,r,s){var i=r===1;if(Uf(e)){var a,o=!1;return An(()=>{if(!o){var _=e({direction:i?"in":"out"});a=ja(t,_,n,r,s)}}),{abort:()=>{o=!0,a?.abort()},deactivate:()=>a.deactivate(),reset:()=>a.reset(),t:()=>a.t()}}if(n?.deactivate(),!e?.duration)return s(),{abort:gt,deactivate:gt,reset:gt,t:()=>r};const{delay:l=0,css:c,tick:f,easing:h=km}=e;var p=[];if(i&&n===void 0&&(f&&f(0,1),c)){var u=Ll(c(0,1));p.push(u,u)}var m=()=>1-r,v=t.animate(p,{duration:l,fill:"forwards"});return v.onfinish=()=>{v.cancel();var _=n?.t()??1-r;n?.abort();var w=r-_,g=e.duration*Math.abs(w),k=[];if(g>0){var S=!1;if(c)for(var C=Math.ceil(g/16.666666666666668),x=0;x<=C;x+=1){var T=_+w*h(x/C),$=Ll(c(T,1-T));k.push($),S||=$.overflow==="hidden"}S&&(t.style.overflow="hidden"),m=()=>{var A=v.currentTime;return _+w*h(A/g)},f&&Sm(()=>{if(v.playState!=="running")return!1;var A=m();return f(A,1-A),!0})}v=t.animate(k,{duration:g,fill:"forwards"}),v.onfinish=()=>{m=()=>r,f?.(r,1-r),s()}},{abort:()=>{v&&(v.cancel(),v.effect=null,v.onfinish=gt)},deactivate:()=>{s=gt},reset:()=>{r===0&&f?.(1,0)},t:()=>m()}}function Do(t,e,n=e){var r=new WeakSet;Uh(t,"input",async s=>{var i=s?t.defaultValue:t.value;if(i=_a(t)?ga(i):i,n(i),Re!==null&&r.add(Re),await $i(),i!==(i=e())){var a=t.selectionStart,o=t.selectionEnd,l=t.value.length;if(t.value=i??"",o!==null){var c=t.value.length;a===o&&o===l&&c>l?(t.selectionStart=c,t.selectionEnd=c):(t.selectionStart=a,t.selectionEnd=Math.min(o,c))}}}),U(e)==null&&t.value&&(n(_a(t)?ga(t.value):t.value),Re!==null&&r.add(Re)),zr(()=>{var s=e();if(t===document.activeElement){var i=ai??Re;if(r.has(i))return}_a(t)&&s===ga(t.value)||t.type==="date"&&!s&&!t.value||s!==t.value&&(t.value=s??"")})}function _a(t){var e=t.type;return e==="number"||e==="range"}function ga(t){return t===""?null:+t}function On(t,e,n){var r=rr(t,e);r&&r.set&&(t[e]=n,Os(()=>{t[e]=null}))}function Bl(t,e){return t===e||t?.[Cn]===e}function Hn(t={},e,n,r){return Hr(()=>{var s,i;return zr(()=>{s=i,i=r?.()||[],U(()=>{t!==n(...i)&&(e(t,...i),s&&Bl(n(...s),t)&&e(null,...s))})}),()=>{An(()=>{i&&Bl(n(...i),t)&&e(null,...i)})}}),t}function qr(t=!1){const e=Ie,n=e.l.u;if(!n)return;let r=()=>mu(e.s);if(t){let s=0,i={};const a=Is(()=>{let o=!1;const l=e.s;for(const c in l)l[c]!==i[c]&&(i[c]=l[c],o=!0);return o&&s++,s});r=()=>d(a)}n.b.length&&nu(()=>{Ul(e,r),yi(n.b)}),yt(()=>{const s=U(()=>n.m.map(Wf));return()=>{for(const i of s)typeof i=="function"&&i()}}),n.a.length&&yt(()=>{Ul(e,r),yi(n.a)})}function Ul(t,e){if(t.l.s)for(const n of t.l.s)d(n);e()}function Ro(t){var e=Wn(0);return function(){return arguments.length===1?(K(e,d(e)+1),arguments[0]):(d(e),t())}}function Io(t,e,n){if(t==null)return e(void 0),n&&n(void 0),gt;const r=U(()=>t.subscribe(e,n));return r.unsubscribe?()=>r.unsubscribe():r}const yr=[];function Cu(t,e){return{subscribe:St(t,e).subscribe}}function St(t,e=gt){let n=null;const r=new Set;function s(o){if(Wi(t,o)&&(t=o,n)){const l=!yr.length;for(const c of r)c[1](),yr.push(c,t);if(l){for(let c=0;c<yr.length;c+=2)yr[c][0](yr[c+1]);yr.length=0}}}function i(o){s(o(t))}function a(o,l=gt){const c=[o,l];return r.add(c),r.size===1&&(n=e(s,i)||gt),o(t),()=>{r.delete(c),r.size===0&&n&&(n(),n=null)}}return{set:s,update:i,subscribe:a}}function Ot(t,e,n){const r=!Array.isArray(t),s=r?[t]:t;if(!s.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const i=e.length<2;return Cu(n,(a,o)=>{let l=!1;const c=[];let f=0,h=gt;const p=()=>{if(f)return;h();const m=e(r?c[0]:c,a,o);i?a(m):h=typeof m=="function"?m:gt},u=s.map((m,v)=>Io(m,_=>{c[v]=_,f&=~(1<<v),l&&p()},()=>{f|=1<<v}));return l=!0,p(),function(){yi(u),h(),l=!1}})}function Ts(t){let e;return Io(t,n=>e=n)(),e}let Ks=!1,Xa=Symbol();function b(t,e,n){const r=n[e]??={store:null,source:er(void 0),unsubscribe:gt};if(r.store!==t&&!(Xa in n))if(r.unsubscribe(),r.store=t??null,t==null)r.source.v=void 0,r.unsubscribe=gt;else{var s=!0;r.unsubscribe=Io(t,i=>{s?r.source.v=i:K(r.source,i)}),s=!1}return t&&Xa in n?Ts(t):d(r.source)}function Ne(t,e){return t.set(e),e}function Ge(){const t={};function e(){Os(()=>{for(var n in t)t[n].unsubscribe();gi(t,Xa,{enumerable:!1,value:!0})})}return[t,e]}function lt(t,e,n){return t.set(n),e}function xm(t){var e=Ks;try{return Ks=!1,[t(),Ks]}finally{Ks=e}}const Cm={get(t,e){if(!t.exclude.includes(e))return t.props[e]},set(t,e){return!1},getOwnPropertyDescriptor(t,e){if(!t.exclude.includes(e)&&e in t.props)return{enumerable:!0,configurable:!0,value:t.props[e]}},has(t,e){return t.exclude.includes(e)?!1:e in t.props},ownKeys(t){return Reflect.ownKeys(t.props).filter(e=>!t.exclude.includes(e))}};function Eu(t,e,n){return new Proxy({props:t,exclude:e},Cm)}function Ae(t,e,n,r){var s=!Br||(n&sh)!==0,i=(n&ah)!==0,a=(n&oh)!==0,o=r,l=!0,c=()=>(l&&(l=!1,o=a?U(r):r),o),f;if(i){var h=Cn in t||Hf in t;f=rr(t,e)?.set??(h&&e in t?k=>t[e]=k:void 0)}var p,u=!1;i?[p,u]=xm(()=>t[e]):p=t[e],p===void 0&&r!==void 0&&(p=c(),f&&(s&&Kf(),f(p)));var m;if(s?m=()=>{var k=t[e];return k===void 0?c():(l=!0,k)}:m=()=>{var k=t[e];return k!==void 0&&(o=void 0),k===void 0?o:k},s&&(n&ih)===0)return m;if(f){var v=t.$$legacy;return(function(k,S){return arguments.length>0?((!s||!S||v||u)&&f(S?m():k),k):m()})}var _=!1,w=((n&rh)!==0?Is:Tn)(()=>(_=!1,m()));i&&d(w);var g=he;return(function(k,S){if(arguments.length>0){const C=S?d(w):s&&i?Gt(k):k;return K(w,C),_=!0,o!==void 0&&(o=C),k}return fr&&_||(g.f&ur)!==0?w.v:d(w)})}function Fs(t){Ie===null&&Nc(),Br&&Ie.l!==null?Em(Ie).m.push(t):yt(()=>{const e=U(t);if(typeof e=="function")return e})}function Em(t){var e=t.l;return e.u??={a:[],b:[],m:[]}}const Am="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(Am);const Tm=t=>t;function Dm(t){const e=t-1;return e*e*e+1}function Wl(t){const e=typeof t=="string"&&t.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return e?[parseFloat(e[1]),e[2]||"px"]:[t,"px"]}function Va(t,{delay:e=0,duration:n=400,easing:r=Tm}={}){const s=+getComputedStyle(t).opacity;return{delay:e,duration:n,easing:r,css:i=>`opacity: ${i*s}`}}function Qt(t,{delay:e=0,duration:n=400,easing:r=Dm,x:s=0,y:i=0,opacity:a=0}={}){const o=getComputedStyle(t),l=+o.opacity,c=o.transform==="none"?"":o.transform,f=l*(1-a),[h,p]=Wl(s),[u,m]=Wl(i);return{delay:e,duration:n,easing:r,css:(v,_)=>`
			transform: ${c} translate(${(1-v)*h}${p}, ${(1-v)*u}${m});
			opacity: ${l-f*_}`}}bh();var Rm=V('<a href="#" class="svelte-1gft3h5">work@once</a>');function qi(t){var e=Rm();I(t,e)}var Im=V('<div class="emphasized-center-button-container svelte-djjya"><div class="button-background svelte-djjya"></div> <button> </button></div>');function Ds(t,e){let n=Ae(e,"text",3,"Click Me"),r=Ae(e,"color",3,"#DEEBFF"),s=Ae(e,"size",3,"24px"),i=Eu(e,["$$slots","$$events","$$legacy","text","color","size"]);var a=Im(),o=F(a),l=Q(o,2);Su(l,()=>({...i}),void 0,void 0,"svelte-djjya");var c=F(l);be(()=>{nn(a,`font-size: ${s()??""};`),nn(o,`--color: ${r()??""};`),en(c,n())}),I(t,a)}var Pm=V('<div class="ack-step-container svelte-1bjil9h"><h1 class="svelte-1bjil9h">we need to connect to your things</h1> <!></div>');function Om(t,e){Ce(e,!0);let n=Ae(e,"advanceCallback",3,()=>{});var r=Pm(),s=Q(F(r),2);Ds(s,{text:"got it",size:"32px",onclick:()=>n()()}),I(t,r),Ee()}const Fe=Gt({gapiInitialized:!1,gapiToken:"",gapiClient:null,canvasToken:"",canvasConnected:!1,edstemToken:"",edstemConnected:!1,gradescopeToken:"",gradescopeConnected:!1});var Mm=V('<div class="link-container svelte-18n6oxr"><div class="link-background svelte-18n6oxr"></div> <button> </button></div>');function Po(t,e){let n=Ae(e,"text",3,"next"),r=Ae(e,"color",3,"#DEEBFF"),s=Ae(e,"size",3,"24px"),i=Eu(e,["$$slots","$$events","$$legacy","text","color","size"]);var a=Mm(),o=F(a),l=Q(o,2);Su(l,()=>({...i}),void 0,void 0,"svelte-18n6oxr");var c=F(l);be(()=>{nn(a,`font-size: ${s()??""}`),nn(o,`--color: ${r()??""};`),en(c,n())}),I(t,a)}var Ft=Ro(()=>Fe),Nm=V('<div class="canvas-folder-container svelte-3kqok9"><div class="instructions svelte-3kqok9">you’ll need to<br/> <br/> → go to your account settings<br/> → generate a new access token<br/> → paste the access token here</div> <div class="token-input-container"><label for="canvas-token" class="svelte-3kqok9">your access token</label><br/> <input type="password" autocomplete="off" id="canvas-token" placeholder="paste it here" class="svelte-3kqok9"/></div> <!></div>');function Fm(t,e){Ce(e,!1);const n=async()=>{await fetch("https://cloudflare-cors-anywhere.jonahkowal.workers.dev/?https://canvas.instructure.com/api/v1/users/self",{headers:{Authorization:`Bearer ${Ft().canvasToken}`,"Content-Type":"application/json"}}).then(o=>{o.ok?Ft(Ft().canvasConnected=!0):Ft(Ft().canvasConnected=!1)})};qr();var r=Nm(),s=Q(F(r),2),i=Q(F(s),3);i.__input=()=>Ft(Ft().canvasConnected=!1);var a=Q(s,2);{let o=Tn(()=>Ft().canvasConnected?"connected!":"connect"),l=Tn(()=>Ft().canvasConnected?"#A3F7BF":"#DEEBFF");Po(a,{get text(){return d(o)},get color(){return d(l)},onclick:n})}Do(i,()=>Ft().canvasToken,o=>Ft(Ft().canvasToken=o)),I(t,r),Ee()}Et(["input"]);var Lt=Ro(()=>Fe),Lm=V('<div class="edstem-folder-container svelte-1ll1k31"><div class="instructions svelte-1ll1k31">you’ll need to<br/> <br/> → go to your <a href="https://edstem.org/us/settings/api-tokens" target="_blank" class="svelte-1ll1k31">api tokens</a><br/> → generate a new access token<br/> → paste the token here</div> <div class="token-input-container"><label for="edstem-token" class="svelte-1ll1k31">your access token</label><br/> <input type="password" autocomplete="off" id="edstem-token" placeholder="paste it here" class="svelte-1ll1k31"/></div> <!></div>');function Bm(t,e){Ce(e,!1);const n=async()=>{await fetch("https://cloudflare-cors-anywhere.jonahkowal.workers.dev/?https://us.edstem.org/api/user",{headers:{Authorization:`Bearer ${Lt().edstemToken}`,"Content-Type":"application/json"}}).then(o=>{o.ok?Lt(Lt().edstemConnected=!0):Lt(Lt().edstemConnected=!1)})};qr();var r=Lm(),s=Q(F(r),2),i=Q(F(s),3);i.__input=()=>Lt(Lt().edstemConnected=!1);var a=Q(s,2);{let o=Tn(()=>Lt().edstemConnected?"connected!":"connect"),l=Tn(()=>Lt().edstemConnected?"#A3F7BF":"#DEEBFF");Po(a,{get text(){return d(o)},get color(){return d(l)},onclick:n})}Do(i,()=>Lt().edstemToken,o=>Lt(Lt().edstemToken=o)),I(t,r),Ee()}Et(["input"]);var Um=V("<div>unfortunately, gradescope does not have an api available yet :( <br/><br/> support may be added in the future!</div>");function Wm(t){var e=Um();I(t,e)}var as=Ro(()=>Fe),Hm=V(`<div class="demo-folder-container svelte-hz9wza"><div class="instructions svelte-hz9wza">if you don't have access to any of the supported assignment platforms, <br/> you can enable demo mode to explore the app with sample data.</div> <div class="enable svelte-hz9wza"><!></div></div>`);function zm(t,e){Ce(e,!1),qr();var n=Hm(),r=Q(F(n),2),s=F(r);{let i=Tn(()=>as().demoMode?"demo mode enabled":"enable demo mode"),a=Tn(()=>as().demoMode?"#A3F7BF":"#DEEBFF");Po(s,{get text(){return d(i)},get color(){return d(a)},onclick:()=>as(as().demoMode=!as().demoMode)})}I(t,n),Ee()}var qm=(t,e,n)=>K(e,d(n),!0),jm=V("<button> </button>"),Xm=V('<h1 class="svelte-i6jobp">where do you keep your assignments?</h1> <div class="assignments-folder-container svelte-i6jobp"><div class="assigments-folder-tabs"></div> <div class="assignments-folder-content svelte-i6jobp"><!></div></div> <div class="continue-button svelte-i6jobp"><!></div>',1);function Vm(t,e){Ce(e,!0);let n=Ae(e,"advanceCallback",3,()=>{}),r={canvas:Fm,edstem:Bm,gradescope:Wm,demo:zm},s=Te(Gt(Object.keys(r)[0]));var i=Xm(),a=Q(de(i),2),o=F(a);wt(o,21,()=>Object.keys(r),tn,(u,m)=>{var v=jm();v.__click=[qm,s,m];var _=F(v);be(()=>{ie(v,1,`folder-tab ${d(s)===d(m)?"active":""}`,"svelte-i6jobp"),en(_,d(m))}),I(u,v)});var l=Q(o,2),c=F(l);To(c,()=>d(s),u=>{const m=B(()=>r[d(s)]);var v=xe(),_=de(v);Ns(_,()=>d(m),(w,g)=>{g(w,{})}),I(u,v)});var f=Q(a,2),h=F(f);{var p=u=>{Ds(u,{text:"continue",size:"32px",onclick:()=>n()()})};$e(h,u=>{(Fe.canvasConnected||Fe.edstemConnected||Fe.gradescopeConnected||Fe.demoMode)&&u(p)})}_t(1,f,()=>Qt,()=>({y:20,duration:300})),I(t,i),Ee()}Et(["click"]);var Jm=V(`<div class="google-step-container svelte-11pyzxt"><div class="text"><h1 class="svelte-11pyzxt">let's connect to your calendar</h1> <div>we only support google calendar at the moment</div></div> <!></div>`);function Ym(t,e){Ce(e,!0);let n=Ae(e,"advanceCallback",3,()=>{});Fs(()=>{google.accounts.id.renderButton(document.querySelector(".g-button"),{theme:"outline",size:"large",type:"standard"})});let r=!1;nu(()=>{Fe.gapiToken.length>0&&!r&&(n()(),r=!0)});var s=Jm(),i=Q(F(s),2);Ds(i,{onclick:()=>{Fe.gapiClient.requestAccessToken()},text:"authorize"}),I(t,s),Ee()}var Km=V('<div class="step-number-container svelte-57bumr"><div class="step-number svelte-57bumr"> </div> <svg class="step-circle svelte-57bumr"><circle stroke="black" stroke-width="4" fill="none"></circle></svg></div>');function Hl(t,e){let n=Ae(e,"number",3,1),r=Ae(e,"active",3,!0),s=Ae(e,"radius",3,30);var i=Km(),a=F(i),o=F(a),l=Q(a,2),c=F(l);be(()=>{nn(i,`opacity: ${r()?1:.5}; width: ${s()*2+10}px; height: ${s()*2+10}px;`),nn(a,`font-size: ${s()*1.5}px;`),en(o,n()),Ke(l,"width",s()*2+10),Ke(l,"height",s()*2+10),Ke(c,"cx",s()+5),Ke(c,"cy",s()+5),Ke(c,"r",s())}),I(t,i)}var Gm=V('<div class="future-step svelte-k3y627"><!> <svg class="future-step-ellipsis" opacity="0.5" width="8" height="48"><circle cx="3" cy="5" r="3" fill="black"></circle><circle cx="3" cy="25" r="3" fill="black"></circle><circle cx="3" cy="45" r="3" fill="black"></circle></svg></div>'),Qm=V('<div class="steps svelte-k3y627"><div class="current-step svelte-k3y627"><!> <!></div> <!></div>'),Zm=V('<div class="connect-page-container svelte-k3y627"><header class="svelte-k3y627"><!></header> <div class="steps-container svelte-k3y627"><!></div></div>');function ep(t,e){Ce(e,!0);const n=[Om,Ym,Vm];let r=Te(0);addEventListener("hashchange",()=>{const c=window.location.hash;c.includes("#connect")&&K(r,c.split("#connect-")[1]?parseInt(c.split("#connect-")[1])-1:0,!0)}),yt(()=>{window.location.hash=`#connect-${d(r)+1}`});var s=Zm(),i=F(s),a=F(i);qi(a);var o=Q(i,2),l=F(o);To(l,()=>d(r),c=>{const f=B(()=>n[d(r)]);var h=Qm(),p=F(h),u=F(p);{let w=B(()=>d(r)+1);Hl(u,{get number(){return d(w)},active:!0})}var m=Q(u,2);Ns(m,()=>d(f),(w,g)=>{g(w,{advanceCallback:()=>{d(r)<n.length-1?K(r,d(r)+1):location.hash="#plan"}})});var v=Q(p,2);{var _=w=>{var g=Gm(),k=F(g);{let S=B(()=>d(r)+2);Hl(k,{get number(){return d(S)},active:!1})}I(w,g)};$e(v,w=>{d(r)<n.length-1&&w(_)})}_t(2,h,()=>Qt,()=>({y:-20,duration:300})),_t(1,h,()=>Qt,()=>({y:20,duration:300,delay:300})),I(c,h)}),_t(5,i,()=>Va,()=>({duration:500,delay:800})),_t(6,i,()=>Va,()=>({duration:200})),_t(6,o,()=>Qt,()=>({y:-20,duration:400})),_t(5,s,()=>Qt,()=>({y:20,duration:400,delay:400})),I(t,s),Ee()}var tp=V('<div class="link-container svelte-oq6r3"><div class="link-background svelte-oq6r3"></div> <a class="svelte-oq6r3"> <span class="arrow svelte-oq6r3">→</span></a></div>');function np(t,e){let n=Ae(e,"href",3,"#"),r=Ae(e,"text",3,"next"),s=Ae(e,"color",3,"#DEEBFF");var i=tp(),a=F(i),o=Q(a,2),l=F(o);be(()=>{nn(a,`--color: ${s()??""};`),Ke(o,"href",n()),en(l,`${r()??""} `)}),I(t,i)}var rp=V('<span class="changing-hook svelte-1kmbrst"> </span>'),sp=V(`<h1 class="tagline svelte-1kmbrst">you're busy. <br/> let's get you more time to <span class="changing-hook-container svelte-1kmbrst"><!></span></h1> <svg id="filters" class="svelte-1kmbrst"><defs><filter id="threshold"><feColorMatrix in="SourceGraphic" type="matrix" values="
                                    1 0 0 0 0
                                    0 1 0 0 0
                                    0 0 1 0 0
                                    0 0 0 255 -110"></feColorMatrix></filter></defs></svg>`,1);function ip(t,e){Ce(e,!0);const n=["breathe","focus","create","relax","think","explore","build","connect","learn","grow"];let r=Te(Gt(Math.floor(Math.random()*n.length)));setInterval(()=>{const c=Math.floor(Math.random()*n.length);K(r,c,!0)},4e3);function s(c,{duration:f=400,delay:h=0}={duration:400,delay:0}){if(!(c.childNodes.length===1&&c.childNodes[0].nodeType===Node.TEXT_NODE))throw new Error("This transition only works on elements with a single text node child");return{duration:f,delay:h,css:(u,m)=>`
                filter: blur(${Math.min(8/u-8,100)}px);
                opacity: ${Math.pow(u,.4)*100}%;
            `}}var i=sp(),a=de(i),o=Q(F(a),3),l=F(o);To(l,()=>d(r),c=>{var f=rp(),h=F(f);be(()=>en(h,`${n[d(r)]??""}.`)),_t(3,f,()=>s),I(c,f)}),I(t,i),Ee()}var ap=V('<div class="landing-container svelte-y66x1q"><!> <!> <!></div>');function op(t){var e=ap(),n=F(e);qi(n);var r=Q(n,2);ip(r,{});var s=Q(r,2);np(s,{href:"#connect",text:"i'm ready"}),_t(2,e,()=>Qt,()=>({x:40,duration:400})),_t(1,e,()=>Qt,()=>({x:-40,duration:400,delay:200})),I(t,e)}const Ja=Symbol();class lp extends URLSearchParams{#e=Te(0);#n=cp();#i=!1;#t(){if(!this.#n||this.#i)return;this.#i=!0;const e=this.toString();this.#n.search=e&&`?${e}`,this.#i=!1}[Ja](e){if(!this.#i){this.#i=!0;for(const n of[...super.keys()])super.delete(n);for(const[n,r]of e)super.append(n,r);dn(this.#e),this.#i=!1}}append(e,n){super.append(e,n),this.#t(),dn(this.#e)}delete(e,n){var r=super.has(e,n);super.delete(e,n),r&&(this.#t(),dn(this.#e))}get(e){return d(this.#e),super.get(e)}getAll(e){return d(this.#e),super.getAll(e)}has(e,n){return d(this.#e),super.has(e,n)}keys(){return d(this.#e),super.keys()}set(e,n){var r=super.getAll(e).join("");super.set(e,n),r!==super.getAll(e).join("")&&(this.#t(),dn(this.#e))}sort(){super.sort(),this.#t(),dn(this.#e)}toString(){return d(this.#e),super.toString()}values(){return d(this.#e),super.values()}entries(){return d(this.#e),super.entries()}[Symbol.iterator](){return this.entries()}get size(){return d(this.#e),super.size}}let Ya=null;function cp(){return Ya}class up extends URL{#e=Te(super.protocol);#n=Te(super.username);#i=Te(super.password);#t=Te(super.hostname);#o=Te(super.port);#a=Te(super.pathname);#s=Te(super.hash);#r=Te(super.search);#l;constructor(e,n){e=new URL(e,n),super(e),Ya=this,this.#l=new lp(e.searchParams),Ya=null}get hash(){return d(this.#s)}set hash(e){super.hash=e,K(this.#s,super.hash)}get host(){return d(this.#t),d(this.#o),super.host}set host(e){super.host=e,K(this.#t,super.hostname),K(this.#o,super.port)}get hostname(){return d(this.#t)}set hostname(e){super.hostname=e,K(this.#t,super.hostname)}get href(){return d(this.#e),d(this.#n),d(this.#i),d(this.#t),d(this.#o),d(this.#a),d(this.#s),d(this.#r),super.href}set href(e){super.href=e,K(this.#e,super.protocol),K(this.#n,super.username),K(this.#i,super.password),K(this.#t,super.hostname),K(this.#o,super.port),K(this.#a,super.pathname),K(this.#s,super.hash),K(this.#r,super.search),this.#l[Ja](super.searchParams)}get password(){return d(this.#i)}set password(e){super.password=e,K(this.#i,super.password)}get pathname(){return d(this.#a)}set pathname(e){super.pathname=e,K(this.#a,super.pathname)}get port(){return d(this.#o)}set port(e){super.port=e,K(this.#o,super.port)}get protocol(){return d(this.#e)}set protocol(e){super.protocol=e,K(this.#e,super.protocol)}get search(){return d(this.#r)}set search(e){super.search=e,K(this.#r,e),this.#l[Ja](super.searchParams)}get username(){return d(this.#n)}set username(e){super.username=e,K(this.#n,super.username)}get origin(){return d(this.#e),d(this.#t),d(this.#o),super.origin}get searchParams(){return this.#l}toString(){return this.href}toJSON(){return this.href}}function ee(t,e,n,r,s){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,n),n}function y(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)}let Au=function(){const{crypto:t}=globalThis;if(t?.randomUUID)return Au=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,r=>(+r^n()&15>>+r/4).toString(16))};function Ka(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const Ga=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};class Y extends Error{}class rt extends Y{constructor(e,n,r,s){super(`${rt.makeMessage(e,n,r)}`),this.status=e,this.headers=s,this.requestID=s?.get("x-request-id"),this.error=n;const i=n;this.code=i?.code,this.param=i?.param,this.type=i?.type}static makeMessage(e,n,r){const s=n?.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):r;return e&&s?`${e} ${s}`:e?`${e} status code (no body)`:s||"(no status code or body)"}static generate(e,n,r,s){if(!e||!s)return new ji({message:r,cause:Ga(n)});const i=n?.error;return e===400?new Tu(e,i,r,s):e===401?new Du(e,i,r,s):e===403?new Ru(e,i,r,s):e===404?new Iu(e,i,r,s):e===409?new Pu(e,i,r,s):e===422?new Ou(e,i,r,s):e===429?new Mu(e,i,r,s):e>=500?new Nu(e,i,r,s):new rt(e,i,r,s)}}class zt extends rt{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class ji extends rt{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class Oo extends ji{constructor({message:e}={}){super({message:e??"Request timed out."})}}class Tu extends rt{}class Du extends rt{}class Ru extends rt{}class Iu extends rt{}class Pu extends rt{}class Ou extends rt{}class Mu extends rt{}class Nu extends rt{}class Fu extends Y{constructor(){super("Could not parse response content as the length limit was reached")}}class Lu extends Y{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}class fs extends Error{constructor(e){super(e)}}const dp=/^[a-z][a-z0-9+.-]*:/i,fp=t=>dp.test(t);let $t=t=>($t=Array.isArray,$t(t)),zl=$t;function Bu(t){return typeof t!="object"?{}:t??{}}function hp(t){if(!t)return!0;for(const e in t)return!1;return!0}function mp(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function ya(t){return t!=null&&typeof t=="object"&&!Array.isArray(t)}const pp=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new Y(`${t} must be an integer`);if(e<0)throw new Y(`${t} must be a positive integer`);return e},vp=t=>{try{return JSON.parse(t)}catch{return}},Ls=t=>new Promise(e=>setTimeout(e,t)),$r="6.5.0",_p=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u";function gp(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const yp=()=>{const t=gp();if(t==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":$r,"X-Stainless-OS":jl(Deno.build.os),"X-Stainless-Arch":ql(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:Deno.version?.deno??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":$r,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(t==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":$r,"X-Stainless-OS":jl(globalThis.process.platform??"unknown"),"X-Stainless-Arch":ql(globalThis.process.arch??"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":globalThis.process.version??"unknown"};const e=bp();return e?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":$r,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${e.browser}`,"X-Stainless-Runtime-Version":e.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":$r,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function bp(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const r=n.exec(navigator.userAgent);if(r){const s=r[1]||0,i=r[2]||0,a=r[3]||0;return{browser:e,version:`${s}.${i}.${a}`}}}return null}const ql=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",jl=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let Xl;const wp=()=>Xl??(Xl=yp());function Sp(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new OpenAI({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function Uu(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function Wu(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return Uu({start(){},async pull(n){const{done:r,value:s}=await e.next();r?n.close():n.enqueue(s)},async cancel(){await e.return?.()}})}function Hu(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n?.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function $p(t){if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await t[Symbol.asyncIterator]().return?.();return}const e=t.getReader(),n=e.cancel();e.releaseLock(),await n}const kp=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)}),zu="RFC3986",qu=t=>String(t),Vl={RFC1738:t=>String(t).replace(/%20/g,"+"),RFC3986:qu},xp="RFC1738";let Qa=(t,e)=>(Qa=Object.hasOwn??Function.prototype.call.bind(Object.prototype.hasOwnProperty),Qa(t,e));const on=(()=>{const t=[];for(let e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t})(),ba=1024,Cp=(t,e,n,r,s)=>{if(t.length===0)return t;let i=t;if(typeof t=="symbol"?i=Symbol.prototype.toString.call(t):typeof t!="string"&&(i=String(t)),n==="iso-8859-1")return escape(i).replace(/%u[0-9a-f]{4}/gi,function(o){return"%26%23"+parseInt(o.slice(2),16)+"%3B"});let a="";for(let o=0;o<i.length;o+=ba){const l=i.length>=ba?i.slice(o,o+ba):i,c=[];for(let f=0;f<l.length;++f){let h=l.charCodeAt(f);if(h===45||h===46||h===95||h===126||h>=48&&h<=57||h>=65&&h<=90||h>=97&&h<=122||s===xp&&(h===40||h===41)){c[c.length]=l.charAt(f);continue}if(h<128){c[c.length]=on[h];continue}if(h<2048){c[c.length]=on[192|h>>6]+on[128|h&63];continue}if(h<55296||h>=57344){c[c.length]=on[224|h>>12]+on[128|h>>6&63]+on[128|h&63];continue}f+=1,h=65536+((h&1023)<<10|l.charCodeAt(f)&1023),c[c.length]=on[240|h>>18]+on[128|h>>12&63]+on[128|h>>6&63]+on[128|h&63]}a+=c.join("")}return a};function Ep(t){return!t||typeof t!="object"?!1:!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))}function Jl(t,e){if($t(t)){const n=[];for(let r=0;r<t.length;r+=1)n.push(e(t[r]));return n}return e(t)}const ju={brackets(t){return String(t)+"[]"},comma:"comma",indices(t,e){return String(t)+"["+e+"]"},repeat(t){return String(t)}},Xu=function(t,e){Array.prototype.push.apply(t,$t(e)?e:[e])};let Yl;const je={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:Cp,encodeValuesOnly:!1,format:zu,formatter:qu,indices:!1,serializeDate(t){return(Yl??(Yl=Function.prototype.call.bind(Date.prototype.toISOString)))(t)},skipNulls:!1,strictNullHandling:!1};function Ap(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"||typeof t=="symbol"||typeof t=="bigint"}const wa={};function Vu(t,e,n,r,s,i,a,o,l,c,f,h,p,u,m,v,_,w){let g=t,k=w,S=0,C=!1;for(;(k=k.get(wa))!==void 0&&!C;){const E=k.get(t);if(S+=1,typeof E<"u"){if(E===S)throw new RangeError("Cyclic object value");C=!0}typeof k.get(wa)>"u"&&(S=0)}if(typeof c=="function"?g=c(e,g):g instanceof Date?g=p?.(g):n==="comma"&&$t(g)&&(g=Jl(g,function(E){return E instanceof Date?p?.(E):E})),g===null){if(i)return l&&!v?l(e,je.encoder,_,"key",u):e;g=""}if(Ap(g)||Ep(g)){if(l){const E=v?e:l(e,je.encoder,_,"key",u);return[m?.(E)+"="+m?.(l(g,je.encoder,_,"value",u))]}return[m?.(e)+"="+m?.(String(g))]}const x=[];if(typeof g>"u")return x;let T;if(n==="comma"&&$t(g))v&&l&&(g=Jl(g,l)),T=[{value:g.length>0?g.join(",")||null:void 0}];else if($t(c))T=c;else{const E=Object.keys(g);T=f?E.sort(f):E}const $=o?String(e).replace(/\./g,"%2E"):String(e),A=r&&$t(g)&&g.length===1?$+"[]":$;if(s&&$t(g)&&g.length===0)return A+"[]";for(let E=0;E<T.length;++E){const D=T[E],M=typeof D=="object"&&typeof D.value<"u"?D.value:g[D];if(a&&M===null)continue;const P=h&&o?D.replace(/\./g,"%2E"):D,X=$t(g)?typeof n=="function"?n(A,P):A:A+(h?"."+P:"["+P+"]");w.set(t,S);const te=new WeakMap;te.set(wa,w),Xu(x,Vu(M,X,n,r,s,i,a,o,n==="comma"&&v&&$t(g)?null:l,c,f,h,p,u,m,v,_,te))}return x}function Tp(t=je){if(typeof t.allowEmptyArrays<"u"&&typeof t.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof t.encodeDotInKeys<"u"&&typeof t.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(t.encoder!==null&&typeof t.encoder<"u"&&typeof t.encoder!="function")throw new TypeError("Encoder has to be a function.");const e=t.charset||je.charset;if(typeof t.charset<"u"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let n=zu;if(typeof t.format<"u"){if(!Qa(Vl,t.format))throw new TypeError("Unknown format option provided.");n=t.format}const r=Vl[n];let s=je.filter;(typeof t.filter=="function"||$t(t.filter))&&(s=t.filter);let i;if(t.arrayFormat&&t.arrayFormat in ju?i=t.arrayFormat:"indices"in t?i=t.indices?"indices":"repeat":i=je.arrayFormat,"commaRoundTrip"in t&&typeof t.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");const a=typeof t.allowDots>"u"?t.encodeDotInKeys?!0:je.allowDots:!!t.allowDots;return{addQueryPrefix:typeof t.addQueryPrefix=="boolean"?t.addQueryPrefix:je.addQueryPrefix,allowDots:a,allowEmptyArrays:typeof t.allowEmptyArrays=="boolean"?!!t.allowEmptyArrays:je.allowEmptyArrays,arrayFormat:i,charset:e,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:je.charsetSentinel,commaRoundTrip:!!t.commaRoundTrip,delimiter:typeof t.delimiter>"u"?je.delimiter:t.delimiter,encode:typeof t.encode=="boolean"?t.encode:je.encode,encodeDotInKeys:typeof t.encodeDotInKeys=="boolean"?t.encodeDotInKeys:je.encodeDotInKeys,encoder:typeof t.encoder=="function"?t.encoder:je.encoder,encodeValuesOnly:typeof t.encodeValuesOnly=="boolean"?t.encodeValuesOnly:je.encodeValuesOnly,filter:s,format:n,formatter:r,serializeDate:typeof t.serializeDate=="function"?t.serializeDate:je.serializeDate,skipNulls:typeof t.skipNulls=="boolean"?t.skipNulls:je.skipNulls,sort:typeof t.sort=="function"?t.sort:null,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:je.strictNullHandling}}function Dp(t,e={}){let n=t;const r=Tp(e);let s,i;typeof r.filter=="function"?(i=r.filter,n=i("",n)):$t(r.filter)&&(i=r.filter,s=i);const a=[];if(typeof n!="object"||n===null)return"";const o=ju[r.arrayFormat],l=o==="comma"&&r.commaRoundTrip;s||(s=Object.keys(n)),r.sort&&s.sort(r.sort);const c=new WeakMap;for(let p=0;p<s.length;++p){const u=s[p];r.skipNulls&&n[u]===null||Xu(a,Vu(n[u],u,o,l,r.allowEmptyArrays,r.strictNullHandling,r.skipNulls,r.encodeDotInKeys,r.encode?r.encoder:null,r.filter,r.sort,r.allowDots,r.serializeDate,r.format,r.formatter,r.encodeValuesOnly,r.charset,c))}const f=a.join(r.delimiter);let h=r.addQueryPrefix===!0?"?":"";return r.charsetSentinel&&(r.charset==="iso-8859-1"?h+="utf8=%26%2310003%3B&":h+="utf8=%E2%9C%93&"),f.length>0?h+f:""}function Rp(t){let e=0;for(const s of t)e+=s.length;const n=new Uint8Array(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return n}let Kl;function Mo(t){let e;return(Kl??(e=new globalThis.TextEncoder,Kl=e.encode.bind(e)))(t)}let Gl;function Ql(t){let e;return(Gl??(e=new globalThis.TextDecoder,Gl=e.decode.bind(e)))(t)}var At,Tt;class Xi{constructor(){At.set(this,void 0),Tt.set(this,void 0),ee(this,At,new Uint8Array),ee(this,Tt,null)}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?Mo(e):e;ee(this,At,Rp([y(this,At,"f"),n]));const r=[];let s;for(;(s=Ip(y(this,At,"f"),y(this,Tt,"f")))!=null;){if(s.carriage&&y(this,Tt,"f")==null){ee(this,Tt,s.index);continue}if(y(this,Tt,"f")!=null&&(s.index!==y(this,Tt,"f")+1||s.carriage)){r.push(Ql(y(this,At,"f").subarray(0,y(this,Tt,"f")-1))),ee(this,At,y(this,At,"f").subarray(y(this,Tt,"f"))),ee(this,Tt,null);continue}const i=y(this,Tt,"f")!==null?s.preceding-1:s.preceding,a=Ql(y(this,At,"f").subarray(0,i));r.push(a),ee(this,At,y(this,At,"f").subarray(s.index)),ee(this,Tt,null)}return r}flush(){return y(this,At,"f").length?this.decode(`
`):[]}}At=new WeakMap,Tt=new WeakMap;Xi.NEWLINE_CHARS=new Set([`
`,"\r"]);Xi.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function Ip(t,e){for(let s=e??0;s<t.length;s++){if(t[s]===10)return{preceding:s,index:s+1,carriage:!1};if(t[s]===13)return{preceding:s,index:s+1,carriage:!0}}return null}function Pp(t){for(let r=0;r<t.length-1;r++){if(t[r]===10&&t[r+1]===10||t[r]===13&&t[r+1]===13)return r+2;if(t[r]===13&&t[r+1]===10&&r+3<t.length&&t[r+2]===13&&t[r+3]===10)return r+4}return-1}const ki={off:0,error:200,warn:300,info:400,debug:500},Zl=(t,e,n)=>{if(t){if(mp(ki,t))return t;Ze(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(ki))}`)}};function hs(){}function Gs(t,e,n){return!e||ki[t]>ki[n]?hs:e[t].bind(e)}const Op={error:hs,warn:hs,info:hs,debug:hs};let ec=new WeakMap;function Ze(t){const e=t.logger,n=t.logLevel??"off";if(!e)return Op;const r=ec.get(e);if(r&&r[0]===n)return r[1];const s={error:Gs("error",e,n),warn:Gs("warn",e,n),info:Gs("info",e,n),debug:Gs("debug",e,n)};return ec.set(e,[n,s]),s}const Kn=t=>(t.options&&(t.options={...t.options},delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);var os;class hn{constructor(e,n,r){this.iterator=e,os.set(this,void 0),this.controller=n,ee(this,os,r)}static fromSSEResponse(e,n,r){let s=!1;const i=r?Ze(r):console;async function*a(){if(s)throw new Y("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let o=!1;try{for await(const l of Mp(e,n))if(!o){if(l.data.startsWith("[DONE]")){o=!0;continue}if(l.event===null||!l.event.startsWith("thread.")){let c;try{c=JSON.parse(l.data)}catch(f){throw i.error("Could not parse message into JSON:",l.data),i.error("From chunk:",l.raw),f}if(c&&c.error)throw new rt(void 0,c.error,void 0,e.headers);yield c}else{let c;try{c=JSON.parse(l.data)}catch(f){throw console.error("Could not parse message into JSON:",l.data),console.error("From chunk:",l.raw),f}if(l.event=="error")throw new rt(void 0,c.error,c.message,void 0);yield{event:l.event,data:c}}}o=!0}catch(l){if(Ka(l))return;throw l}finally{o||n.abort()}}return new hn(a,n,r)}static fromReadableStream(e,n,r){let s=!1;async function*i(){const o=new Xi,l=Hu(e);for await(const c of l)for(const f of o.decode(c))yield f;for(const c of o.flush())yield c}async function*a(){if(s)throw new Y("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let o=!1;try{for await(const l of i())o||l&&(yield JSON.parse(l));o=!0}catch(l){if(Ka(l))return;throw l}finally{o||n.abort()}}return new hn(a,n,r)}[(os=new WeakMap,Symbol.asyncIterator)](){return this.iterator()}tee(){const e=[],n=[],r=this.iterator(),s=i=>({next:()=>{if(i.length===0){const a=r.next();e.push(a),n.push(a)}return i.shift()}});return[new hn(()=>s(e),this.controller,y(this,os,"f")),new hn(()=>s(n),this.controller,y(this,os,"f"))]}toReadableStream(){const e=this;let n;return Uu({async start(){n=e[Symbol.asyncIterator]()},async pull(r){try{const{value:s,done:i}=await n.next();if(i)return r.close();const a=Mo(JSON.stringify(s)+`
`);r.enqueue(a)}catch(s){r.error(s)}},async cancel(){await n.return?.()}})}}async function*Mp(t,e){if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Y("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Y("Attempted to iterate over a response with no body");const n=new Fp,r=new Xi,s=Hu(t.body);for await(const i of Np(s))for(const a of r.decode(i)){const o=n.decode(a);o&&(yield o)}for(const i of r.flush()){const a=n.decode(i);a&&(yield a)}}async function*Np(t){let e=new Uint8Array;for await(const n of t){if(n==null)continue;const r=n instanceof ArrayBuffer?new Uint8Array(n):typeof n=="string"?Mo(n):n;let s=new Uint8Array(e.length+r.length);s.set(e),s.set(r,e.length),e=s;let i;for(;(i=Pp(e))!==-1;)yield e.slice(0,i),e=e.slice(i)}e.length>0&&(yield e)}class Fp{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const i={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],i}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,r,s]=Lp(e,":");return s.startsWith(" ")&&(s=s.substring(1)),n==="event"?this.event=s:n==="data"&&this.data.push(s),null}}function Lp(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}async function Ju(t,e){const{response:n,requestLogID:r,retryOfRequestLogID:s,startTime:i}=e,a=await(async()=>{if(e.options.stream)return Ze(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):hn.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const l=n.headers.get("content-type")?.split(";")[0]?.trim();if(l?.includes("application/json")||l?.endsWith("+json")){const h=await n.json();return Yu(h,n)}return await n.text()})();return Ze(t).debug(`[${r}] response parsed`,Kn({retryOfRequestLogID:s,url:n.url,status:n.status,body:a,durationMs:Date.now()-i})),a}function Yu(t,e){return!t||typeof t!="object"||Array.isArray(t)?t:Object.defineProperty(t,"_request_id",{value:e.headers.get("x-request-id"),enumerable:!1})}var ms;class Vi extends Promise{constructor(e,n,r=Ju){super(s=>{s(null)}),this.responsePromise=n,this.parseResponse=r,ms.set(this,void 0),ee(this,ms,e)}_thenUnwrap(e){return new Vi(y(this,ms,"f"),this.responsePromise,async(n,r)=>Yu(e(await this.parseResponse(n,r),r),r.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n,request_id:n.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(y(this,ms,"f"),e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}ms=new WeakMap;var Qs;class No{constructor(e,n,r,s){Qs.set(this,void 0),ee(this,Qs,e),this.options=s,this.response=n,this.body=r}hasNextPage(){return this.getPaginatedItems().length?this.nextPageRequestOptions()!=null:!1}async getNextPage(){const e=this.nextPageRequestOptions();if(!e)throw new Y("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");return await y(this,Qs,"f").requestAPIList(this.constructor,e)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(Qs=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const n of e.getPaginatedItems())yield n}}class Bp extends Vi{constructor(e,n,r){super(e,n,async(s,i)=>new r(s,i.response,await Ju(s,i),i.options))}async*[Symbol.asyncIterator](){const e=await this;for await(const n of e)yield n}}class Ji extends No{constructor(e,n,r,s){super(e,n,r,s),this.data=r.data||[],this.object=r.object}getPaginatedItems(){return this.data??[]}nextPageRequestOptions(){return null}}class Ue extends No{constructor(e,n,r,s){super(e,n,r,s),this.data=r.data||[],this.has_more=r.has_more||!1}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){const e=this.getPaginatedItems(),n=e[e.length-1]?.id;return n?{...this.options,query:{...Bu(this.options.query),after:n}}:null}}class xi extends No{constructor(e,n,r,s){super(e,n,r,s),this.data=r.data||[],this.has_more=r.has_more||!1,this.last_id=r.last_id||""}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){const e=this.last_id;return e?{...this.options,query:{...Bu(this.options.query),after:e}}:null}}const Ku=()=>{if(typeof File>"u"){const{process:t}=globalThis,e=typeof t?.versions?.node=="string"&&parseInt(t.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(e?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function $s(t,e,n){return Ku(),new File(t,e??"unknown_file",n)}function oi(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const Fo=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function",tc=async(t,e)=>Za(t.body)?{...t,body:await Gu(t.body,e)}:t,lr=async(t,e)=>({...t,body:await Gu(t.body,e)}),nc=new WeakMap;function Up(t){const e=typeof t=="function"?t:t.fetch,n=nc.get(e);if(n)return n;const r=(async()=>{try{const s="Response"in e?e.Response:(await e("data:,")).constructor,i=new FormData;return i.toString()!==await new s(i).text()}catch{return!0}})();return nc.set(e,r),r}const Gu=async(t,e)=>{if(!await Up(e))throw new TypeError("The provided fetch function does not support file uploads with the current global FormData class.");const n=new FormData;return await Promise.all(Object.entries(t||{}).map(([r,s])=>eo(n,r,s))),n},Qu=t=>t instanceof Blob&&"name"in t,Wp=t=>typeof t=="object"&&t!==null&&(t instanceof Response||Fo(t)||Qu(t)),Za=t=>{if(Wp(t))return!0;if(Array.isArray(t))return t.some(Za);if(t&&typeof t=="object"){for(const e in t)if(Za(t[e]))return!0}return!1},eo=async(t,e,n)=>{if(n!==void 0){if(n==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")t.append(e,String(n));else if(n instanceof Response)t.append(e,$s([await n.blob()],oi(n)));else if(Fo(n))t.append(e,$s([await new Response(Wu(n)).blob()],oi(n)));else if(Qu(n))t.append(e,n,oi(n));else if(Array.isArray(n))await Promise.all(n.map(r=>eo(t,e+"[]",r)));else if(typeof n=="object")await Promise.all(Object.entries(n).map(([r,s])=>eo(t,`${e}[${r}]`,s)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${n} instead`)}},Zu=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",Hp=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&Zu(t),zp=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function qp(t,e,n){if(Ku(),t=await t,Hp(t))return t instanceof File?t:$s([await t.arrayBuffer()],t.name);if(zp(t)){const s=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),$s(await to(s),e,n)}const r=await to(t);if(e||(e=oi(t)),!n?.type){const s=r.find(i=>typeof i=="object"&&"type"in i&&i.type);typeof s=="string"&&(n={...n,type:s})}return $s(r,e,n)}async function to(t){let e=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)e.push(t);else if(Zu(t))e.push(t instanceof Blob?t:await t.arrayBuffer());else if(Fo(t))for await(const n of t)e.push(...await to(n));else{const n=t?.constructor?.name;throw new Error(`Unexpected data type: ${typeof t}${n?`; constructor: ${n}`:""}${jp(t)}`)}return e}function jp(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}class J{constructor(e){this._client=e}}function ed(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const rc=Object.freeze(Object.create(null)),Xp=(t=ed)=>function(n,...r){if(n.length===1)return n[0];let s=!1;const i=[],a=n.reduce((f,h,p)=>{/[?#]/.test(h)&&(s=!0);const u=r[p];let m=(s?encodeURIComponent:t)(""+u);return p!==r.length&&(u==null||typeof u=="object"&&u.toString===Object.getPrototypeOf(Object.getPrototypeOf(u.hasOwnProperty??rc)??rc)?.toString)&&(m=u+"",i.push({start:f.length+h.length,length:m.length,error:`Value of type ${Object.prototype.toString.call(u).slice(8,-1)} is not a valid path parameter`})),f+h+(p===r.length?"":m)},""),o=a.split(/[?#]/,1)[0],l=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let c;for(;(c=l.exec(o))!==null;)i.push({start:c.index,length:c[0].length,error:`Value "${c[0]}" can't be safely passed as a path parameter`});if(i.sort((f,h)=>f.start-h.start),i.length>0){let f=0;const h=i.reduce((p,u)=>{const m=" ".repeat(u.start-f),v="^".repeat(u.length);return f=u.start+u.length,p+m+v},"");throw new Y(`Path parameters result in path with invalid segments:
${i.map(p=>p.error).join(`
`)}
${a}
${h}`)}return a},R=Xp(ed);let td=class extends J{list(e,n={},r){return this._client.getAPIList(R`/chat/completions/${e}/messages`,Ue,{query:n,...r})}};function Ci(t){return t!==void 0&&"function"in t&&t.function!==void 0}function Lo(t){return t?.$brand==="auto-parseable-response-format"}function Bs(t){return t?.$brand==="auto-parseable-tool"}function Vp(t,e){return!e||!nd(e)?{...t,choices:t.choices.map(n=>(rd(n.message.tool_calls),{...n,message:{...n.message,parsed:null,...n.message.tool_calls?{tool_calls:n.message.tool_calls}:void 0}}))}:Bo(t,e)}function Bo(t,e){const n=t.choices.map(r=>{if(r.finish_reason==="length")throw new Fu;if(r.finish_reason==="content_filter")throw new Lu;return rd(r.message.tool_calls),{...r,message:{...r.message,...r.message.tool_calls?{tool_calls:r.message.tool_calls?.map(s=>Yp(e,s))??void 0}:void 0,parsed:r.message.content&&!r.message.refusal?Jp(e,r.message.content):null}}});return{...t,choices:n}}function Jp(t,e){return t.response_format?.type!=="json_schema"?null:t.response_format?.type==="json_schema"?"$parseRaw"in t.response_format?t.response_format.$parseRaw(e):JSON.parse(e):null}function Yp(t,e){const n=t.tools?.find(r=>Ci(r)&&r.function?.name===e.function.name);return{...e,function:{...e.function,parsed_arguments:Bs(n)?n.$parseRaw(e.function.arguments):n?.function.strict?JSON.parse(e.function.arguments):null}}}function Kp(t,e){if(!t||!("tools"in t)||!t.tools)return!1;const n=t.tools?.find(r=>Ci(r)&&r.function?.name===e.function.name);return Ci(n)&&(Bs(n)||n?.function.strict||!1)}function nd(t){return Lo(t.response_format)?!0:t.tools?.some(e=>Bs(e)||e.type==="function"&&e.function.strict===!0)??!1}function rd(t){for(const e of t||[])if(e.type!=="function")throw new Y(`Currently only \`function\` tool calls are supported; Received \`${e.type}\``)}function Gp(t){for(const e of t??[]){if(e.type!=="function")throw new Y(`Currently only \`function\` tool types support auto-parsing; Received \`${e.type}\``);if(e.function.strict!==!0)throw new Y(`The \`${e.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}const Ei=t=>t?.role==="assistant",sd=t=>t?.role==="tool";var no,li,ci,ps,vs,ui,_s,Sn,gs,Ai,Ti,kr,id;class Uo{constructor(){no.add(this),this.controller=new AbortController,li.set(this,void 0),ci.set(this,()=>{}),ps.set(this,()=>{}),vs.set(this,void 0),ui.set(this,()=>{}),_s.set(this,()=>{}),Sn.set(this,{}),gs.set(this,!1),Ai.set(this,!1),Ti.set(this,!1),kr.set(this,!1),ee(this,li,new Promise((e,n)=>{ee(this,ci,e,"f"),ee(this,ps,n,"f")})),ee(this,vs,new Promise((e,n)=>{ee(this,ui,e,"f"),ee(this,_s,n,"f")})),y(this,li,"f").catch(()=>{}),y(this,vs,"f").catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emitFinal(),this._emit("end")},y(this,no,"m",id).bind(this))},0)}_connected(){this.ended||(y(this,ci,"f").call(this),this._emit("connect"))}get ended(){return y(this,gs,"f")}get errored(){return y(this,Ai,"f")}get aborted(){return y(this,Ti,"f")}abort(){this.controller.abort()}on(e,n){return(y(this,Sn,"f")[e]||(y(this,Sn,"f")[e]=[])).push({listener:n}),this}off(e,n){const r=y(this,Sn,"f")[e];if(!r)return this;const s=r.findIndex(i=>i.listener===n);return s>=0&&r.splice(s,1),this}once(e,n){return(y(this,Sn,"f")[e]||(y(this,Sn,"f")[e]=[])).push({listener:n,once:!0}),this}emitted(e){return new Promise((n,r)=>{ee(this,kr,!0),e!=="error"&&this.once("error",r),this.once(e,n)})}async done(){ee(this,kr,!0),await y(this,vs,"f")}_emit(e,...n){if(y(this,gs,"f"))return;e==="end"&&(ee(this,gs,!0),y(this,ui,"f").call(this));const r=y(this,Sn,"f")[e];if(r&&(y(this,Sn,"f")[e]=r.filter(s=>!s.once),r.forEach(({listener:s})=>s(...n))),e==="abort"){const s=n[0];!y(this,kr,"f")&&!r?.length&&Promise.reject(s),y(this,ps,"f").call(this,s),y(this,_s,"f").call(this,s),this._emit("end");return}if(e==="error"){const s=n[0];!y(this,kr,"f")&&!r?.length&&Promise.reject(s),y(this,ps,"f").call(this,s),y(this,_s,"f").call(this,s),this._emit("end")}}_emitFinal(){}}li=new WeakMap,ci=new WeakMap,ps=new WeakMap,vs=new WeakMap,ui=new WeakMap,_s=new WeakMap,Sn=new WeakMap,gs=new WeakMap,Ai=new WeakMap,Ti=new WeakMap,kr=new WeakMap,no=new WeakSet,id=function(e){if(ee(this,Ai,!0),e instanceof Error&&e.name==="AbortError"&&(e=new zt),e instanceof zt)return ee(this,Ti,!0),this._emit("abort",e);if(e instanceof Y)return this._emit("error",e);if(e instanceof Error){const n=new Y(e.message);return n.cause=e,this._emit("error",n)}return this._emit("error",new Y(String(e)))};function Qp(t){return typeof t.parse=="function"}var pt,ro,Di,so,io,ao,ad,od;const Zp=10;class ld extends Uo{constructor(){super(...arguments),pt.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(e){this._chatCompletions.push(e),this._emit("chatCompletion",e);const n=e.choices[0]?.message;return n&&this._addMessage(n),e}_addMessage(e,n=!0){if("content"in e||(e.content=null),this.messages.push(e),n){if(this._emit("message",e),sd(e)&&e.content)this._emit("functionToolCallResult",e.content);else if(Ei(e)&&e.tool_calls)for(const r of e.tool_calls)r.type==="function"&&this._emit("functionToolCall",r.function)}}async finalChatCompletion(){await this.done();const e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new Y("stream ended without producing a ChatCompletion");return e}async finalContent(){return await this.done(),y(this,pt,"m",ro).call(this)}async finalMessage(){return await this.done(),y(this,pt,"m",Di).call(this)}async finalFunctionToolCall(){return await this.done(),y(this,pt,"m",so).call(this)}async finalFunctionToolCallResult(){return await this.done(),y(this,pt,"m",io).call(this)}async totalUsage(){return await this.done(),y(this,pt,"m",ao).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){const e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);const n=y(this,pt,"m",Di).call(this);n&&this._emit("finalMessage",n);const r=y(this,pt,"m",ro).call(this);r&&this._emit("finalContent",r);const s=y(this,pt,"m",so).call(this);s&&this._emit("finalFunctionToolCall",s);const i=y(this,pt,"m",io).call(this);i!=null&&this._emit("finalFunctionToolCallResult",i),this._chatCompletions.some(a=>a.usage)&&this._emit("totalUsage",y(this,pt,"m",ao).call(this))}async _createChatCompletion(e,n,r){const s=r?.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),y(this,pt,"m",ad).call(this,n);const i=await e.chat.completions.create({...n,stream:!1},{...r,signal:this.controller.signal});return this._connected(),this._addChatCompletion(Bo(i,n))}async _runChatCompletion(e,n,r){for(const s of n.messages)this._addMessage(s,!1);return await this._createChatCompletion(e,n,r)}async _runTools(e,n,r){const s="tool",{tool_choice:i="auto",stream:a,...o}=n,l=typeof i!="string"&&i.type==="function"&&i?.function?.name,{maxChatCompletions:c=Zp}=r||{},f=n.tools.map(u=>{if(Bs(u)){if(!u.$callback)throw new Y("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:u.$callback,name:u.function.name,description:u.function.description||"",parameters:u.function.parameters,parse:u.$parseRaw,strict:!0}}}return u}),h={};for(const u of f)u.type==="function"&&(h[u.function.name||u.function.function.name]=u.function);const p="tools"in n?f.map(u=>u.type==="function"?{type:"function",function:{name:u.function.name||u.function.function.name,parameters:u.function.parameters,description:u.function.description,strict:u.function.strict}}:u):void 0;for(const u of n.messages)this._addMessage(u,!1);for(let u=0;u<c;++u){const v=(await this._createChatCompletion(e,{...o,tool_choice:i,tools:p,messages:[...this.messages]},r)).choices[0]?.message;if(!v)throw new Y("missing message in ChatCompletion response");if(!v.tool_calls?.length)return;for(const _ of v.tool_calls){if(_.type!=="function")continue;const w=_.id,{name:g,arguments:k}=_.function,S=h[g];if(S){if(l&&l!==g){const $=`Invalid tool_call: ${JSON.stringify(g)}. ${JSON.stringify(l)} requested. Please try again`;this._addMessage({role:s,tool_call_id:w,content:$});continue}}else{const $=`Invalid tool_call: ${JSON.stringify(g)}. Available options are: ${Object.keys(h).map(A=>JSON.stringify(A)).join(", ")}. Please try again`;this._addMessage({role:s,tool_call_id:w,content:$});continue}let C;try{C=Qp(S)?await S.parse(k):k}catch($){const A=$ instanceof Error?$.message:String($);this._addMessage({role:s,tool_call_id:w,content:A});continue}const x=await S.function(C,this),T=y(this,pt,"m",od).call(this,x);if(this._addMessage({role:s,tool_call_id:w,content:T}),l)return}}}}pt=new WeakSet,ro=function(){return y(this,pt,"m",Di).call(this).content??null},Di=function(){let e=this.messages.length;for(;e-- >0;){const n=this.messages[e];if(Ei(n))return{...n,content:n.content??null,refusal:n.refusal??null}}throw new Y("stream ended without producing a ChatCompletionMessage with role=assistant")},so=function(){for(let e=this.messages.length-1;e>=0;e--){const n=this.messages[e];if(Ei(n)&&n?.tool_calls?.length)return n.tool_calls.filter(r=>r.type==="function").at(-1)?.function}},io=function(){for(let e=this.messages.length-1;e>=0;e--){const n=this.messages[e];if(sd(n)&&n.content!=null&&typeof n.content=="string"&&this.messages.some(r=>r.role==="assistant"&&r.tool_calls?.some(s=>s.type==="function"&&s.id===n.tool_call_id)))return n.content}},ao=function(){const e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:n}of this._chatCompletions)n&&(e.completion_tokens+=n.completion_tokens,e.prompt_tokens+=n.prompt_tokens,e.total_tokens+=n.total_tokens);return e},ad=function(e){if(e.n!=null&&e.n>1)throw new Y("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},od=function(e){return typeof e=="string"?e:e===void 0?"undefined":JSON.stringify(e)};class Wo extends ld{static runTools(e,n,r){const s=new Wo,i={...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"runTools"}};return s._run(()=>s._runTools(e,n,i)),s}_addMessage(e,n=!0){super._addMessage(e,n),Ei(e)&&e.content&&this._emit("content",e.content)}}const cd=1,ud=2,dd=4,fd=8,hd=16,md=32,pd=64,vd=128,_d=256,gd=vd|_d,yd=hd|md|gd|pd,bd=cd|ud|yd,wd=dd|fd,ev=bd|wd,Je={STR:cd,NUM:ud,ARR:dd,OBJ:fd,NULL:hd,BOOL:md,NAN:pd,INFINITY:vd,MINUS_INFINITY:_d,INF:gd,SPECIAL:yd,ATOM:bd,COLLECTION:wd,ALL:ev};class tv extends Error{}class nv extends Error{}function rv(t,e=Je.ALL){if(typeof t!="string")throw new TypeError(`expecting str, got ${typeof t}`);if(!t.trim())throw new Error(`${t} is empty`);return sv(t.trim(),e)}const sv=(t,e)=>{const n=t.length;let r=0;const s=p=>{throw new tv(`${p} at position ${r}`)},i=p=>{throw new nv(`${p} at position ${r}`)},a=()=>(h(),r>=n&&s("Unexpected end of input"),t[r]==='"'?o():t[r]==="{"?l():t[r]==="["?c():t.substring(r,r+4)==="null"||Je.NULL&e&&n-r<4&&"null".startsWith(t.substring(r))?(r+=4,null):t.substring(r,r+4)==="true"||Je.BOOL&e&&n-r<4&&"true".startsWith(t.substring(r))?(r+=4,!0):t.substring(r,r+5)==="false"||Je.BOOL&e&&n-r<5&&"false".startsWith(t.substring(r))?(r+=5,!1):t.substring(r,r+8)==="Infinity"||Je.INFINITY&e&&n-r<8&&"Infinity".startsWith(t.substring(r))?(r+=8,1/0):t.substring(r,r+9)==="-Infinity"||Je.MINUS_INFINITY&e&&1<n-r&&n-r<9&&"-Infinity".startsWith(t.substring(r))?(r+=9,-1/0):t.substring(r,r+3)==="NaN"||Je.NAN&e&&n-r<3&&"NaN".startsWith(t.substring(r))?(r+=3,NaN):f()),o=()=>{const p=r;let u=!1;for(r++;r<n&&(t[r]!=='"'||u&&t[r-1]==="\\");)u=t[r]==="\\"?!u:!1,r++;if(t.charAt(r)=='"')try{return JSON.parse(t.substring(p,++r-Number(u)))}catch(m){i(String(m))}else if(Je.STR&e)try{return JSON.parse(t.substring(p,r-Number(u))+'"')}catch{return JSON.parse(t.substring(p,t.lastIndexOf("\\"))+'"')}s("Unterminated string literal")},l=()=>{r++,h();const p={};try{for(;t[r]!=="}";){if(h(),r>=n&&Je.OBJ&e)return p;const u=o();h(),r++;try{const m=a();Object.defineProperty(p,u,{value:m,writable:!0,enumerable:!0,configurable:!0})}catch(m){if(Je.OBJ&e)return p;throw m}h(),t[r]===","&&r++}}catch{if(Je.OBJ&e)return p;s("Expected '}' at end of object")}return r++,p},c=()=>{r++;const p=[];try{for(;t[r]!=="]";)p.push(a()),h(),t[r]===","&&r++}catch{if(Je.ARR&e)return p;s("Expected ']' at end of array")}return r++,p},f=()=>{if(r===0){t==="-"&&Je.NUM&e&&s("Not sure what '-' is");try{return JSON.parse(t)}catch(u){if(Je.NUM&e)try{return t[t.length-1]==="."?JSON.parse(t.substring(0,t.lastIndexOf("."))):JSON.parse(t.substring(0,t.lastIndexOf("e")))}catch{}i(String(u))}}const p=r;for(t[r]==="-"&&r++;t[r]&&!",]}".includes(t[r]);)r++;r==n&&!(Je.NUM&e)&&s("Unterminated number literal");try{return JSON.parse(t.substring(p,r))}catch{t.substring(p,r)==="-"&&Je.NUM&e&&s("Not sure what '-' is");try{return JSON.parse(t.substring(p,t.lastIndexOf("e")))}catch(m){i(String(m))}}},h=()=>{for(;r<n&&` 
\r	`.includes(t[r]);)r++};return a()},sc=t=>rv(t,Je.ALL^Je.NUM);var qe,wn,br,Mn,Sa,Zs,$a,ka,xa,ei,Ca,ic;class Rs extends ld{constructor(e){super(),qe.add(this),wn.set(this,void 0),br.set(this,void 0),Mn.set(this,void 0),ee(this,wn,e),ee(this,br,[])}get currentChatCompletionSnapshot(){return y(this,Mn,"f")}static fromReadableStream(e){const n=new Rs(null);return n._run(()=>n._fromReadableStream(e)),n}static createChatCompletion(e,n,r){const s=new Rs(n);return s._run(()=>s._runChatCompletion(e,{...n,stream:!0},{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"stream"}})),s}async _createChatCompletion(e,n,r){super._createChatCompletion;const s=r?.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),y(this,qe,"m",Sa).call(this);const i=await e.chat.completions.create({...n,stream:!0},{...r,signal:this.controller.signal});this._connected();for await(const a of i)y(this,qe,"m",$a).call(this,a);if(i.controller.signal?.aborted)throw new zt;return this._addChatCompletion(y(this,qe,"m",ei).call(this))}async _fromReadableStream(e,n){const r=n?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),y(this,qe,"m",Sa).call(this),this._connected();const s=hn.fromReadableStream(e,this.controller);let i;for await(const a of s)i&&i!==a.id&&this._addChatCompletion(y(this,qe,"m",ei).call(this)),y(this,qe,"m",$a).call(this,a),i=a.id;if(s.controller.signal?.aborted)throw new zt;return this._addChatCompletion(y(this,qe,"m",ei).call(this))}[(wn=new WeakMap,br=new WeakMap,Mn=new WeakMap,qe=new WeakSet,Sa=function(){this.ended||ee(this,Mn,void 0)},Zs=function(n){let r=y(this,br,"f")[n.index];return r||(r={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},y(this,br,"f")[n.index]=r,r)},$a=function(n){if(this.ended)return;const r=y(this,qe,"m",ic).call(this,n);this._emit("chunk",n,r);for(const s of n.choices){const i=r.choices[s.index];s.delta.content!=null&&i.message?.role==="assistant"&&i.message?.content&&(this._emit("content",s.delta.content,i.message.content),this._emit("content.delta",{delta:s.delta.content,snapshot:i.message.content,parsed:i.message.parsed})),s.delta.refusal!=null&&i.message?.role==="assistant"&&i.message?.refusal&&this._emit("refusal.delta",{delta:s.delta.refusal,snapshot:i.message.refusal}),s.logprobs?.content!=null&&i.message?.role==="assistant"&&this._emit("logprobs.content.delta",{content:s.logprobs?.content,snapshot:i.logprobs?.content??[]}),s.logprobs?.refusal!=null&&i.message?.role==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:s.logprobs?.refusal,snapshot:i.logprobs?.refusal??[]});const a=y(this,qe,"m",Zs).call(this,i);i.finish_reason&&(y(this,qe,"m",xa).call(this,i),a.current_tool_call_index!=null&&y(this,qe,"m",ka).call(this,i,a.current_tool_call_index));for(const o of s.delta.tool_calls??[])a.current_tool_call_index!==o.index&&(y(this,qe,"m",xa).call(this,i),a.current_tool_call_index!=null&&y(this,qe,"m",ka).call(this,i,a.current_tool_call_index)),a.current_tool_call_index=o.index;for(const o of s.delta.tool_calls??[]){const l=i.message.tool_calls?.[o.index];l?.type&&(l?.type==="function"?this._emit("tool_calls.function.arguments.delta",{name:l.function?.name,index:o.index,arguments:l.function.arguments,parsed_arguments:l.function.parsed_arguments,arguments_delta:o.function?.arguments??""}):(l?.type,void 0))}}},ka=function(n,r){if(y(this,qe,"m",Zs).call(this,n).done_tool_calls.has(r))return;const i=n.message.tool_calls?.[r];if(!i)throw new Error("no tool call snapshot");if(!i.type)throw new Error("tool call snapshot missing `type`");if(i.type==="function"){const a=y(this,wn,"f")?.tools?.find(o=>Ci(o)&&o.function.name===i.function.name);this._emit("tool_calls.function.arguments.done",{name:i.function.name,index:r,arguments:i.function.arguments,parsed_arguments:Bs(a)?a.$parseRaw(i.function.arguments):a?.function.strict?JSON.parse(i.function.arguments):null})}else i.type},xa=function(n){const r=y(this,qe,"m",Zs).call(this,n);if(n.message.content&&!r.content_done){r.content_done=!0;const s=y(this,qe,"m",Ca).call(this);this._emit("content.done",{content:n.message.content,parsed:s?s.$parseRaw(n.message.content):null})}n.message.refusal&&!r.refusal_done&&(r.refusal_done=!0,this._emit("refusal.done",{refusal:n.message.refusal})),n.logprobs?.content&&!r.logprobs_content_done&&(r.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:n.logprobs.content})),n.logprobs?.refusal&&!r.logprobs_refusal_done&&(r.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:n.logprobs.refusal}))},ei=function(){if(this.ended)throw new Y("stream has ended, this shouldn't happen");const n=y(this,Mn,"f");if(!n)throw new Y("request ended without sending any chunks");return ee(this,Mn,void 0),ee(this,br,[]),iv(n,y(this,wn,"f"))},Ca=function(){const n=y(this,wn,"f")?.response_format;return Lo(n)?n:null},ic=function(n){var r,s,i,a;let o=y(this,Mn,"f");const{choices:l,...c}=n;o?Object.assign(o,c):o=ee(this,Mn,{...c,choices:[]});for(const{delta:f,finish_reason:h,index:p,logprobs:u=null,...m}of n.choices){let v=o.choices[p];if(v||(v=o.choices[p]={finish_reason:h,index:p,message:{},logprobs:u,...m}),u)if(!v.logprobs)v.logprobs=Object.assign({},u);else{const{content:x,refusal:T,...$}=u;Object.assign(v.logprobs,$),x&&((r=v.logprobs).content??(r.content=[]),v.logprobs.content.push(...x)),T&&((s=v.logprobs).refusal??(s.refusal=[]),v.logprobs.refusal.push(...T))}if(h&&(v.finish_reason=h,y(this,wn,"f")&&nd(y(this,wn,"f")))){if(h==="length")throw new Fu;if(h==="content_filter")throw new Lu}if(Object.assign(v,m),!f)continue;const{content:_,refusal:w,function_call:g,role:k,tool_calls:S,...C}=f;if(Object.assign(v.message,C),w&&(v.message.refusal=(v.message.refusal||"")+w),k&&(v.message.role=k),g&&(v.message.function_call?(g.name&&(v.message.function_call.name=g.name),g.arguments&&((i=v.message.function_call).arguments??(i.arguments=""),v.message.function_call.arguments+=g.arguments)):v.message.function_call=g),_&&(v.message.content=(v.message.content||"")+_,!v.message.refusal&&y(this,qe,"m",Ca).call(this)&&(v.message.parsed=sc(v.message.content))),S){v.message.tool_calls||(v.message.tool_calls=[]);for(const{index:x,id:T,type:$,function:A,...E}of S){const D=(a=v.message.tool_calls)[x]??(a[x]={});Object.assign(D,E),T&&(D.id=T),$&&(D.type=$),A&&(D.function??(D.function={name:A.name??"",arguments:""})),A?.name&&(D.function.name=A.name),A?.arguments&&(D.function.arguments+=A.arguments,Kp(y(this,wn,"f"),D)&&(D.function.parsed_arguments=sc(D.function.arguments)))}}}return o},Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("chunk",s=>{const i=n.shift();i?i.resolve(s):e.push(s)}),this.on("end",()=>{r=!0;for(const s of n)s.resolve(void 0);n.length=0}),this.on("abort",s=>{r=!0;for(const i of n)i.reject(s);n.length=0}),this.on("error",s=>{r=!0;for(const i of n)i.reject(s);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((i,a)=>n.push({resolve:i,reject:a})).then(i=>i?{value:i,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new hn(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function iv(t,e){const{id:n,choices:r,created:s,model:i,system_fingerprint:a,...o}=t,l={...o,id:n,choices:r.map(({message:c,finish_reason:f,index:h,logprobs:p,...u})=>{if(!f)throw new Y(`missing finish_reason for choice ${h}`);const{content:m=null,function_call:v,tool_calls:_,...w}=c,g=c.role;if(!g)throw new Y(`missing role for choice ${h}`);if(v){const{arguments:k,name:S}=v;if(k==null)throw new Y(`missing function_call.arguments for choice ${h}`);if(!S)throw new Y(`missing function_call.name for choice ${h}`);return{...u,message:{content:m,function_call:{arguments:k,name:S},role:g,refusal:c.refusal??null},finish_reason:f,index:h,logprobs:p}}return _?{...u,index:h,finish_reason:f,logprobs:p,message:{...w,role:g,content:m,refusal:c.refusal??null,tool_calls:_.map((k,S)=>{const{function:C,type:x,id:T,...$}=k,{arguments:A,name:E,...D}=C||{};if(T==null)throw new Y(`missing choices[${h}].tool_calls[${S}].id
${ti(t)}`);if(x==null)throw new Y(`missing choices[${h}].tool_calls[${S}].type
${ti(t)}`);if(E==null)throw new Y(`missing choices[${h}].tool_calls[${S}].function.name
${ti(t)}`);if(A==null)throw new Y(`missing choices[${h}].tool_calls[${S}].function.arguments
${ti(t)}`);return{...$,id:T,type:x,function:{...D,name:E,arguments:A}}})}}:{...u,message:{...w,content:m,role:g,refusal:c.refusal??null},finish_reason:f,index:h,logprobs:p}}),created:s,model:i,object:"chat.completion",...a?{system_fingerprint:a}:{}};return Vp(l,e)}function ti(t){return JSON.stringify(t)}class Ri extends Rs{static fromReadableStream(e){const n=new Ri(null);return n._run(()=>n._fromReadableStream(e)),n}static runTools(e,n,r){const s=new Ri(n),i={...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"runTools"}};return s._run(()=>s._runTools(e,n,i)),s}}let Ho=class extends J{constructor(){super(...arguments),this.messages=new td(this._client)}create(e,n){return this._client.post("/chat/completions",{body:e,...n,stream:e.stream??!1})}retrieve(e,n){return this._client.get(R`/chat/completions/${e}`,n)}update(e,n,r){return this._client.post(R`/chat/completions/${e}`,{body:n,...r})}list(e={},n){return this._client.getAPIList("/chat/completions",Ue,{query:e,...n})}delete(e,n){return this._client.delete(R`/chat/completions/${e}`,n)}parse(e,n){return Gp(e.tools),this._client.chat.completions.create(e,{...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"chat.completions.parse"}})._thenUnwrap(r=>Bo(r,e))}runTools(e,n){return e.stream?Ri.runTools(this._client,e,n):Wo.runTools(this._client,e,n)}stream(e,n){return Rs.createChatCompletion(this._client,e,n)}};Ho.Messages=td;class zo extends J{constructor(){super(...arguments),this.completions=new Ho(this._client)}}zo.Completions=Ho;const Sd=Symbol("brand.privateNullableHeaders");function*av(t){if(!t)return;if(Sd in t){const{values:r,nulls:s}=t;yield*r.entries();for(const i of s)yield[i,null];return}let e=!1,n;t instanceof Headers?n=t.entries():zl(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let r of n){const s=r[0];if(typeof s!="string")throw new TypeError("expected header name to be a string");const i=zl(r[1])?r[1]:[r[1]];let a=!1;for(const o of i)o!==void 0&&(e&&!a&&(a=!0,yield[s,null]),yield[s,o])}}const H=t=>{const e=new Headers,n=new Set;for(const r of t){const s=new Set;for(const[i,a]of av(r)){const o=i.toLowerCase();s.has(o)||(e.delete(i),s.add(o)),a===null?(e.delete(i),n.add(o)):(e.append(i,a),n.delete(o))}}return{[Sd]:!0,values:e,nulls:n}};class $d extends J{create(e,n){return this._client.post("/audio/speech",{body:e,...n,headers:H([{Accept:"application/octet-stream"},n?.headers]),__binaryResponse:!0})}}class kd extends J{create(e,n){return this._client.post("/audio/transcriptions",lr({body:e,...n,stream:e.stream??!1,__metadata:{model:e.model}},this._client))}}class xd extends J{create(e,n){return this._client.post("/audio/translations",lr({body:e,...n,__metadata:{model:e.model}},this._client))}}class Us extends J{constructor(){super(...arguments),this.transcriptions=new kd(this._client),this.translations=new xd(this._client),this.speech=new $d(this._client)}}Us.Transcriptions=kd;Us.Translations=xd;Us.Speech=$d;class Cd extends J{create(e,n){return this._client.post("/batches",{body:e,...n})}retrieve(e,n){return this._client.get(R`/batches/${e}`,n)}list(e={},n){return this._client.getAPIList("/batches",Ue,{query:e,...n})}cancel(e,n){return this._client.post(R`/batches/${e}/cancel`,n)}}class Ed extends J{create(e,n){return this._client.post("/assistants",{body:e,...n,headers:H([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}retrieve(e,n){return this._client.get(R`/assistants/${e}`,{...n,headers:H([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}update(e,n,r){return this._client.post(R`/assistants/${e}`,{body:n,...r,headers:H([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}list(e={},n){return this._client.getAPIList("/assistants",Ue,{query:e,...n,headers:H([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}delete(e,n){return this._client.delete(R`/assistants/${e}`,{...n,headers:H([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}}let Ad=class extends J{create(e,n){return this._client.post("/realtime/sessions",{body:e,...n,headers:H([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}};class Td extends J{create(e,n){return this._client.post("/realtime/transcription_sessions",{body:e,...n,headers:H([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}}let Yi=class extends J{constructor(){super(...arguments),this.sessions=new Ad(this._client),this.transcriptionSessions=new Td(this._client)}};Yi.Sessions=Ad;Yi.TranscriptionSessions=Td;class Dd extends J{create(e,n){return this._client.post("/chatkit/sessions",{body:e,...n,headers:H([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}cancel(e,n){return this._client.post(R`/chatkit/sessions/${e}/cancel`,{...n,headers:H([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}}let Rd=class extends J{retrieve(e,n){return this._client.get(R`/chatkit/threads/${e}`,{...n,headers:H([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}list(e={},n){return this._client.getAPIList("/chatkit/threads",xi,{query:e,...n,headers:H([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}delete(e,n){return this._client.delete(R`/chatkit/threads/${e}`,{...n,headers:H([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}listItems(e,n={},r){return this._client.getAPIList(R`/chatkit/threads/${e}/items`,xi,{query:n,...r,headers:H([{"OpenAI-Beta":"chatkit_beta=v1"},r?.headers])})}};class Ki extends J{constructor(){super(...arguments),this.sessions=new Dd(this._client),this.threads=new Rd(this._client)}}Ki.Sessions=Dd;Ki.Threads=Rd;class Id extends J{create(e,n,r){return this._client.post(R`/threads/${e}/messages`,{body:n,...r,headers:H([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}retrieve(e,n,r){const{thread_id:s}=n;return this._client.get(R`/threads/${s}/messages/${e}`,{...r,headers:H([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}update(e,n,r){const{thread_id:s,...i}=n;return this._client.post(R`/threads/${s}/messages/${e}`,{body:i,...r,headers:H([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}list(e,n={},r){return this._client.getAPIList(R`/threads/${e}/messages`,Ue,{query:n,...r,headers:H([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}delete(e,n,r){const{thread_id:s}=n;return this._client.delete(R`/threads/${s}/messages/${e}`,{...r,headers:H([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}}class Pd extends J{retrieve(e,n,r){const{thread_id:s,run_id:i,...a}=n;return this._client.get(R`/threads/${s}/runs/${i}/steps/${e}`,{query:a,...r,headers:H([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}list(e,n,r){const{thread_id:s,...i}=n;return this._client.getAPIList(R`/threads/${s}/runs/${e}/steps`,Ue,{query:i,...r,headers:H([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}}const ov=t=>{if(typeof Buffer<"u"){const e=Buffer.from(t,"base64");return Array.from(new Float32Array(e.buffer,e.byteOffset,e.length/Float32Array.BYTES_PER_ELEMENT))}else{const e=atob(t),n=e.length,r=new Uint8Array(n);for(let s=0;s<n;s++)r[s]=e.charCodeAt(s);return Array.from(new Float32Array(r.buffer))}};var lv={};const wr=t=>{if(typeof globalThis.process<"u")return lv?.[t]?.trim()??void 0;if(typeof globalThis.Deno<"u")return globalThis.Deno.env?.get?.(t)?.trim()};var et,tr,oo,cn,di,Jt,nr,Er,Qn,Ii,Rt,fi,hi,ks,ys,bs,ac,oc,lc,cc,uc,dc,fc;class xs extends Uo{constructor(){super(...arguments),et.add(this),oo.set(this,[]),cn.set(this,{}),di.set(this,{}),Jt.set(this,void 0),nr.set(this,void 0),Er.set(this,void 0),Qn.set(this,void 0),Ii.set(this,void 0),Rt.set(this,void 0),fi.set(this,void 0),hi.set(this,void 0),ks.set(this,void 0)}[(oo=new WeakMap,cn=new WeakMap,di=new WeakMap,Jt=new WeakMap,nr=new WeakMap,Er=new WeakMap,Qn=new WeakMap,Ii=new WeakMap,Rt=new WeakMap,fi=new WeakMap,hi=new WeakMap,ks=new WeakMap,et=new WeakSet,Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("event",s=>{const i=n.shift();i?i.resolve(s):e.push(s)}),this.on("end",()=>{r=!0;for(const s of n)s.resolve(void 0);n.length=0}),this.on("abort",s=>{r=!0;for(const i of n)i.reject(s);n.length=0}),this.on("error",s=>{r=!0;for(const i of n)i.reject(s);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((i,a)=>n.push({resolve:i,reject:a})).then(i=>i?{value:i,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(e){const n=new tr;return n._run(()=>n._fromReadableStream(e)),n}async _fromReadableStream(e,n){const r=n?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),this._connected();const s=hn.fromReadableStream(e,this.controller);for await(const i of s)y(this,et,"m",ys).call(this,i);if(s.controller.signal?.aborted)throw new zt;return this._addRun(y(this,et,"m",bs).call(this))}toReadableStream(){return new hn(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(e,n,r,s){const i=new tr;return i._run(()=>i._runToolAssistantStream(e,n,r,{...s,headers:{...s?.headers,"X-Stainless-Helper-Method":"stream"}})),i}async _createToolAssistantStream(e,n,r,s){const i=s?.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort()));const a={...r,stream:!0},o=await e.submitToolOutputs(n,a,{...s,signal:this.controller.signal});this._connected();for await(const l of o)y(this,et,"m",ys).call(this,l);if(o.controller.signal?.aborted)throw new zt;return this._addRun(y(this,et,"m",bs).call(this))}static createThreadAssistantStream(e,n,r){const s=new tr;return s._run(()=>s._threadAssistantStream(e,n,{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"stream"}})),s}static createAssistantStream(e,n,r,s){const i=new tr;return i._run(()=>i._runAssistantStream(e,n,r,{...s,headers:{...s?.headers,"X-Stainless-Helper-Method":"stream"}})),i}currentEvent(){return y(this,fi,"f")}currentRun(){return y(this,hi,"f")}currentMessageSnapshot(){return y(this,Jt,"f")}currentRunStepSnapshot(){return y(this,ks,"f")}async finalRunSteps(){return await this.done(),Object.values(y(this,cn,"f"))}async finalMessages(){return await this.done(),Object.values(y(this,di,"f"))}async finalRun(){if(await this.done(),!y(this,nr,"f"))throw Error("Final run was not received.");return y(this,nr,"f")}async _createThreadAssistantStream(e,n,r){const s=r?.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort()));const i={...n,stream:!0},a=await e.createAndRun(i,{...r,signal:this.controller.signal});this._connected();for await(const o of a)y(this,et,"m",ys).call(this,o);if(a.controller.signal?.aborted)throw new zt;return this._addRun(y(this,et,"m",bs).call(this))}async _createAssistantStream(e,n,r,s){const i=s?.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort()));const a={...r,stream:!0},o=await e.create(n,a,{...s,signal:this.controller.signal});this._connected();for await(const l of o)y(this,et,"m",ys).call(this,l);if(o.controller.signal?.aborted)throw new zt;return this._addRun(y(this,et,"m",bs).call(this))}static accumulateDelta(e,n){for(const[r,s]of Object.entries(n)){if(!e.hasOwnProperty(r)){e[r]=s;continue}let i=e[r];if(i==null){e[r]=s;continue}if(r==="index"||r==="type"){e[r]=s;continue}if(typeof i=="string"&&typeof s=="string")i+=s;else if(typeof i=="number"&&typeof s=="number")i+=s;else if(ya(i)&&ya(s))i=this.accumulateDelta(i,s);else if(Array.isArray(i)&&Array.isArray(s)){if(i.every(a=>typeof a=="string"||typeof a=="number")){i.push(...s);continue}for(const a of s){if(!ya(a))throw new Error(`Expected array delta entry to be an object but got: ${a}`);const o=a.index;if(o==null)throw console.error(a),new Error("Expected array delta entry to have an `index` property");if(typeof o!="number")throw new Error(`Expected array delta entry \`index\` property to be a number but got ${o}`);const l=i[o];l==null?i.push(a):i[o]=this.accumulateDelta(l,a)}continue}else throw Error(`Unhandled record type: ${r}, deltaValue: ${s}, accValue: ${i}`);e[r]=i}return e}_addRun(e){return e}async _threadAssistantStream(e,n,r){return await this._createThreadAssistantStream(n,e,r)}async _runAssistantStream(e,n,r,s){return await this._createAssistantStream(n,e,r,s)}async _runToolAssistantStream(e,n,r,s){return await this._createToolAssistantStream(n,e,r,s)}}tr=xs,ys=function(e){if(!this.ended)switch(ee(this,fi,e),y(this,et,"m",lc).call(this,e),e.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.incomplete":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":y(this,et,"m",fc).call(this,e);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":y(this,et,"m",oc).call(this,e);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":y(this,et,"m",ac).call(this,e);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},bs=function(){if(this.ended)throw new Y("stream has ended, this shouldn't happen");if(!y(this,nr,"f"))throw Error("Final run has not been received");return y(this,nr,"f")},ac=function(e){const[n,r]=y(this,et,"m",uc).call(this,e,y(this,Jt,"f"));ee(this,Jt,n),y(this,di,"f")[n.id]=n;for(const s of r){const i=n.content[s.index];i?.type=="text"&&this._emit("textCreated",i.text)}switch(e.event){case"thread.message.created":this._emit("messageCreated",e.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",e.data.delta,n),e.data.delta.content)for(const s of e.data.delta.content){if(s.type=="text"&&s.text){let i=s.text,a=n.content[s.index];if(a&&a.type=="text")this._emit("textDelta",i,a.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(s.index!=y(this,Er,"f")){if(y(this,Qn,"f"))switch(y(this,Qn,"f").type){case"text":this._emit("textDone",y(this,Qn,"f").text,y(this,Jt,"f"));break;case"image_file":this._emit("imageFileDone",y(this,Qn,"f").image_file,y(this,Jt,"f"));break}ee(this,Er,s.index)}ee(this,Qn,n.content[s.index])}break;case"thread.message.completed":case"thread.message.incomplete":if(y(this,Er,"f")!==void 0){const s=e.data.content[y(this,Er,"f")];if(s)switch(s.type){case"image_file":this._emit("imageFileDone",s.image_file,y(this,Jt,"f"));break;case"text":this._emit("textDone",s.text,y(this,Jt,"f"));break}}y(this,Jt,"f")&&this._emit("messageDone",e.data),ee(this,Jt,void 0)}},oc=function(e){const n=y(this,et,"m",cc).call(this,e);switch(ee(this,ks,n),e.event){case"thread.run.step.created":this._emit("runStepCreated",e.data);break;case"thread.run.step.delta":const r=e.data.delta;if(r.step_details&&r.step_details.type=="tool_calls"&&r.step_details.tool_calls&&n.step_details.type=="tool_calls")for(const i of r.step_details.tool_calls)i.index==y(this,Ii,"f")?this._emit("toolCallDelta",i,n.step_details.tool_calls[i.index]):(y(this,Rt,"f")&&this._emit("toolCallDone",y(this,Rt,"f")),ee(this,Ii,i.index),ee(this,Rt,n.step_details.tool_calls[i.index]),y(this,Rt,"f")&&this._emit("toolCallCreated",y(this,Rt,"f")));this._emit("runStepDelta",e.data.delta,n);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":ee(this,ks,void 0),e.data.step_details.type=="tool_calls"&&y(this,Rt,"f")&&(this._emit("toolCallDone",y(this,Rt,"f")),ee(this,Rt,void 0)),this._emit("runStepDone",e.data,n);break}},lc=function(e){y(this,oo,"f").push(e),this._emit("event",e)},cc=function(e){switch(e.event){case"thread.run.step.created":return y(this,cn,"f")[e.data.id]=e.data,e.data;case"thread.run.step.delta":let n=y(this,cn,"f")[e.data.id];if(!n)throw Error("Received a RunStepDelta before creation of a snapshot");let r=e.data;if(r.delta){const s=tr.accumulateDelta(n,r.delta);y(this,cn,"f")[e.data.id]=s}return y(this,cn,"f")[e.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":y(this,cn,"f")[e.data.id]=e.data;break}if(y(this,cn,"f")[e.data.id])return y(this,cn,"f")[e.data.id];throw new Error("No snapshot available")},uc=function(e,n){let r=[];switch(e.event){case"thread.message.created":return[e.data,r];case"thread.message.delta":if(!n)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let s=e.data;if(s.delta.content)for(const i of s.delta.content)if(i.index in n.content){let a=n.content[i.index];n.content[i.index]=y(this,et,"m",dc).call(this,i,a)}else n.content[i.index]=i,r.push(i);return[n,r];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(n)return[n,r];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},dc=function(e,n){return tr.accumulateDelta(n,e)},fc=function(e){switch(ee(this,hi,e.data),e.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":case"thread.run.incomplete":ee(this,nr,e.data),y(this,Rt,"f")&&(this._emit("toolCallDone",y(this,Rt,"f")),ee(this,Rt,void 0));break}};let qo=class extends J{constructor(){super(...arguments),this.steps=new Pd(this._client)}create(e,n,r){const{include:s,...i}=n;return this._client.post(R`/threads/${e}/runs`,{query:{include:s},body:i,...r,headers:H([{"OpenAI-Beta":"assistants=v2"},r?.headers]),stream:n.stream??!1})}retrieve(e,n,r){const{thread_id:s}=n;return this._client.get(R`/threads/${s}/runs/${e}`,{...r,headers:H([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}update(e,n,r){const{thread_id:s,...i}=n;return this._client.post(R`/threads/${s}/runs/${e}`,{body:i,...r,headers:H([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}list(e,n={},r){return this._client.getAPIList(R`/threads/${e}/runs`,Ue,{query:n,...r,headers:H([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}cancel(e,n,r){const{thread_id:s}=n;return this._client.post(R`/threads/${s}/runs/${e}/cancel`,{...r,headers:H([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}async createAndPoll(e,n,r){const s=await this.create(e,n,r);return await this.poll(s.id,{thread_id:e},r)}createAndStream(e,n,r){return xs.createAssistantStream(e,this._client.beta.threads.runs,n,r)}async poll(e,n,r){const s=H([r?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":r?.pollIntervalMs?.toString()??void 0}]);for(;;){const{data:i,response:a}=await this.retrieve(e,n,{...r,headers:{...r?.headers,...s}}).withResponse();switch(i.status){case"queued":case"in_progress":case"cancelling":let o=5e3;if(r?.pollIntervalMs)o=r.pollIntervalMs;else{const l=a.headers.get("openai-poll-after-ms");if(l){const c=parseInt(l);isNaN(c)||(o=c)}}await Ls(o);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return i}}}stream(e,n,r){return xs.createAssistantStream(e,this._client.beta.threads.runs,n,r)}submitToolOutputs(e,n,r){const{thread_id:s,...i}=n;return this._client.post(R`/threads/${s}/runs/${e}/submit_tool_outputs`,{body:i,...r,headers:H([{"OpenAI-Beta":"assistants=v2"},r?.headers]),stream:n.stream??!1})}async submitToolOutputsAndPoll(e,n,r){const s=await this.submitToolOutputs(e,n,r);return await this.poll(s.id,n,r)}submitToolOutputsStream(e,n,r){return xs.createToolAssistantStream(e,this._client.beta.threads.runs,n,r)}};qo.Steps=Pd;class Gi extends J{constructor(){super(...arguments),this.runs=new qo(this._client),this.messages=new Id(this._client)}create(e={},n){return this._client.post("/threads",{body:e,...n,headers:H([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}retrieve(e,n){return this._client.get(R`/threads/${e}`,{...n,headers:H([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}update(e,n,r){return this._client.post(R`/threads/${e}`,{body:n,...r,headers:H([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}delete(e,n){return this._client.delete(R`/threads/${e}`,{...n,headers:H([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}createAndRun(e,n){return this._client.post("/threads/runs",{body:e,...n,headers:H([{"OpenAI-Beta":"assistants=v2"},n?.headers]),stream:e.stream??!1})}async createAndRunPoll(e,n){const r=await this.createAndRun(e,n);return await this.runs.poll(r.id,{thread_id:r.thread_id},n)}createAndRunStream(e,n){return xs.createThreadAssistantStream(e,this._client.beta.threads,n)}}Gi.Runs=qo;Gi.Messages=Id;class jr extends J{constructor(){super(...arguments),this.realtime=new Yi(this._client),this.chatkit=new Ki(this._client),this.assistants=new Ed(this._client),this.threads=new Gi(this._client)}}jr.Realtime=Yi;jr.ChatKit=Ki;jr.Assistants=Ed;jr.Threads=Gi;class Od extends J{create(e,n){return this._client.post("/completions",{body:e,...n,stream:e.stream??!1})}}class Md extends J{retrieve(e,n,r){const{container_id:s}=n;return this._client.get(R`/containers/${s}/files/${e}/content`,{...r,headers:H([{Accept:"application/binary"},r?.headers]),__binaryResponse:!0})}}let jo=class extends J{constructor(){super(...arguments),this.content=new Md(this._client)}create(e,n,r){return this._client.post(R`/containers/${e}/files`,lr({body:n,...r},this._client))}retrieve(e,n,r){const{container_id:s}=n;return this._client.get(R`/containers/${s}/files/${e}`,r)}list(e,n={},r){return this._client.getAPIList(R`/containers/${e}/files`,Ue,{query:n,...r})}delete(e,n,r){const{container_id:s}=n;return this._client.delete(R`/containers/${s}/files/${e}`,{...r,headers:H([{Accept:"*/*"},r?.headers])})}};jo.Content=Md;class Xo extends J{constructor(){super(...arguments),this.files=new jo(this._client)}create(e,n){return this._client.post("/containers",{body:e,...n})}retrieve(e,n){return this._client.get(R`/containers/${e}`,n)}list(e={},n){return this._client.getAPIList("/containers",Ue,{query:e,...n})}delete(e,n){return this._client.delete(R`/containers/${e}`,{...n,headers:H([{Accept:"*/*"},n?.headers])})}}Xo.Files=jo;class Nd extends J{create(e,n,r){const{include:s,...i}=n;return this._client.post(R`/conversations/${e}/items`,{query:{include:s},body:i,...r})}retrieve(e,n,r){const{conversation_id:s,...i}=n;return this._client.get(R`/conversations/${s}/items/${e}`,{query:i,...r})}list(e,n={},r){return this._client.getAPIList(R`/conversations/${e}/items`,xi,{query:n,...r})}delete(e,n,r){const{conversation_id:s}=n;return this._client.delete(R`/conversations/${s}/items/${e}`,r)}}class Vo extends J{constructor(){super(...arguments),this.items=new Nd(this._client)}create(e={},n){return this._client.post("/conversations",{body:e,...n})}retrieve(e,n){return this._client.get(R`/conversations/${e}`,n)}update(e,n,r){return this._client.post(R`/conversations/${e}`,{body:n,...r})}delete(e,n){return this._client.delete(R`/conversations/${e}`,n)}}Vo.Items=Nd;class Fd extends J{create(e,n){const r=!!e.encoding_format;let s=r?e.encoding_format:"base64";r&&Ze(this._client).debug("embeddings/user defined encoding_format:",e.encoding_format);const i=this._client.post("/embeddings",{body:{...e,encoding_format:s},...n});return r?i:(Ze(this._client).debug("embeddings/decoding base64 embeddings from base64"),i._thenUnwrap(a=>(a&&a.data&&a.data.forEach(o=>{const l=o.embedding;o.embedding=ov(l)}),a)))}}class Ld extends J{retrieve(e,n,r){const{eval_id:s,run_id:i}=n;return this._client.get(R`/evals/${s}/runs/${i}/output_items/${e}`,r)}list(e,n,r){const{eval_id:s,...i}=n;return this._client.getAPIList(R`/evals/${s}/runs/${e}/output_items`,Ue,{query:i,...r})}}class Jo extends J{constructor(){super(...arguments),this.outputItems=new Ld(this._client)}create(e,n,r){return this._client.post(R`/evals/${e}/runs`,{body:n,...r})}retrieve(e,n,r){const{eval_id:s}=n;return this._client.get(R`/evals/${s}/runs/${e}`,r)}list(e,n={},r){return this._client.getAPIList(R`/evals/${e}/runs`,Ue,{query:n,...r})}delete(e,n,r){const{eval_id:s}=n;return this._client.delete(R`/evals/${s}/runs/${e}`,r)}cancel(e,n,r){const{eval_id:s}=n;return this._client.post(R`/evals/${s}/runs/${e}`,r)}}Jo.OutputItems=Ld;class Yo extends J{constructor(){super(...arguments),this.runs=new Jo(this._client)}create(e,n){return this._client.post("/evals",{body:e,...n})}retrieve(e,n){return this._client.get(R`/evals/${e}`,n)}update(e,n,r){return this._client.post(R`/evals/${e}`,{body:n,...r})}list(e={},n){return this._client.getAPIList("/evals",Ue,{query:e,...n})}delete(e,n){return this._client.delete(R`/evals/${e}`,n)}}Yo.Runs=Jo;let Bd=class extends J{create(e,n){return this._client.post("/files",lr({body:e,...n},this._client))}retrieve(e,n){return this._client.get(R`/files/${e}`,n)}list(e={},n){return this._client.getAPIList("/files",Ue,{query:e,...n})}delete(e,n){return this._client.delete(R`/files/${e}`,n)}content(e,n){return this._client.get(R`/files/${e}/content`,{...n,headers:H([{Accept:"application/binary"},n?.headers]),__binaryResponse:!0})}async waitForProcessing(e,{pollInterval:n=5e3,maxWait:r=1800*1e3}={}){const s=new Set(["processed","error","deleted"]),i=Date.now();let a=await this.retrieve(e);for(;!a.status||!s.has(a.status);)if(await Ls(n),a=await this.retrieve(e),Date.now()-i>r)throw new Oo({message:`Giving up on waiting for file ${e} to finish processing after ${r} milliseconds.`});return a}};class Ud extends J{}let Wd=class extends J{run(e,n){return this._client.post("/fine_tuning/alpha/graders/run",{body:e,...n})}validate(e,n){return this._client.post("/fine_tuning/alpha/graders/validate",{body:e,...n})}};class Ko extends J{constructor(){super(...arguments),this.graders=new Wd(this._client)}}Ko.Graders=Wd;class Hd extends J{create(e,n,r){return this._client.getAPIList(R`/fine_tuning/checkpoints/${e}/permissions`,Ji,{body:n,method:"post",...r})}retrieve(e,n={},r){return this._client.get(R`/fine_tuning/checkpoints/${e}/permissions`,{query:n,...r})}delete(e,n,r){const{fine_tuned_model_checkpoint:s}=n;return this._client.delete(R`/fine_tuning/checkpoints/${s}/permissions/${e}`,r)}}let Go=class extends J{constructor(){super(...arguments),this.permissions=new Hd(this._client)}};Go.Permissions=Hd;class zd extends J{list(e,n={},r){return this._client.getAPIList(R`/fine_tuning/jobs/${e}/checkpoints`,Ue,{query:n,...r})}}class Qo extends J{constructor(){super(...arguments),this.checkpoints=new zd(this._client)}create(e,n){return this._client.post("/fine_tuning/jobs",{body:e,...n})}retrieve(e,n){return this._client.get(R`/fine_tuning/jobs/${e}`,n)}list(e={},n){return this._client.getAPIList("/fine_tuning/jobs",Ue,{query:e,...n})}cancel(e,n){return this._client.post(R`/fine_tuning/jobs/${e}/cancel`,n)}listEvents(e,n={},r){return this._client.getAPIList(R`/fine_tuning/jobs/${e}/events`,Ue,{query:n,...r})}pause(e,n){return this._client.post(R`/fine_tuning/jobs/${e}/pause`,n)}resume(e,n){return this._client.post(R`/fine_tuning/jobs/${e}/resume`,n)}}Qo.Checkpoints=zd;class Xr extends J{constructor(){super(...arguments),this.methods=new Ud(this._client),this.jobs=new Qo(this._client),this.checkpoints=new Go(this._client),this.alpha=new Ko(this._client)}}Xr.Methods=Ud;Xr.Jobs=Qo;Xr.Checkpoints=Go;Xr.Alpha=Ko;class qd extends J{}class Zo extends J{constructor(){super(...arguments),this.graderModels=new qd(this._client)}}Zo.GraderModels=qd;class jd extends J{createVariation(e,n){return this._client.post("/images/variations",lr({body:e,...n},this._client))}edit(e,n){return this._client.post("/images/edits",lr({body:e,...n,stream:e.stream??!1},this._client))}generate(e,n){return this._client.post("/images/generations",{body:e,...n,stream:e.stream??!1})}}class Xd extends J{retrieve(e,n){return this._client.get(R`/models/${e}`,n)}list(e){return this._client.getAPIList("/models",Ji,e)}delete(e,n){return this._client.delete(R`/models/${e}`,n)}}class Vd extends J{create(e,n){return this._client.post("/moderations",{body:e,...n})}}class Jd extends J{accept(e,n,r){return this._client.post(R`/realtime/calls/${e}/accept`,{body:n,...r,headers:H([{Accept:"*/*"},r?.headers])})}hangup(e,n){return this._client.post(R`/realtime/calls/${e}/hangup`,{...n,headers:H([{Accept:"*/*"},n?.headers])})}refer(e,n,r){return this._client.post(R`/realtime/calls/${e}/refer`,{body:n,...r,headers:H([{Accept:"*/*"},r?.headers])})}reject(e,n={},r){return this._client.post(R`/realtime/calls/${e}/reject`,{body:n,...r,headers:H([{Accept:"*/*"},r?.headers])})}}class Yd extends J{create(e,n){return this._client.post("/realtime/client_secrets",{body:e,...n})}}class Qi extends J{constructor(){super(...arguments),this.clientSecrets=new Yd(this._client),this.calls=new Jd(this._client)}}Qi.ClientSecrets=Yd;Qi.Calls=Jd;function cv(t,e){return!e||!dv(e)?{...t,output_parsed:null,output:t.output.map(n=>n.type==="function_call"?{...n,parsed_arguments:null}:n.type==="message"?{...n,content:n.content.map(r=>({...r,parsed:null}))}:n)}:Kd(t,e)}function Kd(t,e){const n=t.output.map(s=>{if(s.type==="function_call")return{...s,parsed_arguments:mv(e,s)};if(s.type==="message"){const i=s.content.map(a=>a.type==="output_text"?{...a,parsed:uv(e,a.text)}:a);return{...s,content:i}}return s}),r=Object.assign({},t,{output:n});return Object.getOwnPropertyDescriptor(t,"output_text")||lo(r),Object.defineProperty(r,"output_parsed",{enumerable:!0,get(){for(const s of r.output)if(s.type==="message"){for(const i of s.content)if(i.type==="output_text"&&i.parsed!==null)return i.parsed}return null}}),r}function uv(t,e){return t.text?.format?.type!=="json_schema"?null:"$parseRaw"in t.text?.format?(t.text?.format).$parseRaw(e):JSON.parse(e)}function dv(t){return!!Lo(t.text?.format)}function fv(t){return t?.$brand==="auto-parseable-tool"}function hv(t,e){return t.find(n=>n.type==="function"&&n.name===e)}function mv(t,e){const n=hv(t.tools??[],e.name);return{...e,...e,parsed_arguments:fv(n)?n.$parseRaw(e.arguments):n?.strict?JSON.parse(e.arguments):null}}function lo(t){const e=[];for(const n of t.output)if(n.type==="message")for(const r of n.content)r.type==="output_text"&&e.push(r.text);t.output_text=e.join("")}var Sr,ni,Nn,ri,hc,mc,pc,vc;class el extends Uo{constructor(e){super(),Sr.add(this),ni.set(this,void 0),Nn.set(this,void 0),ri.set(this,void 0),ee(this,ni,e)}static createResponse(e,n,r){const s=new el(n);return s._run(()=>s._createOrRetrieveResponse(e,n,{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"stream"}})),s}async _createOrRetrieveResponse(e,n,r){const s=r?.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),y(this,Sr,"m",hc).call(this);let i,a=null;"response_id"in n?(i=await e.responses.retrieve(n.response_id,{stream:!0},{...r,signal:this.controller.signal,stream:!0}),a=n.starting_after??null):i=await e.responses.create({...n,stream:!0},{...r,signal:this.controller.signal}),this._connected();for await(const o of i)y(this,Sr,"m",mc).call(this,o,a);if(i.controller.signal?.aborted)throw new zt;return y(this,Sr,"m",pc).call(this)}[(ni=new WeakMap,Nn=new WeakMap,ri=new WeakMap,Sr=new WeakSet,hc=function(){this.ended||ee(this,Nn,void 0)},mc=function(n,r){if(this.ended)return;const s=(a,o)=>{(r==null||o.sequence_number>r)&&this._emit(a,o)},i=y(this,Sr,"m",vc).call(this,n);switch(s("event",n),n.type){case"response.output_text.delta":{const a=i.output[n.output_index];if(!a)throw new Y(`missing output at index ${n.output_index}`);if(a.type==="message"){const o=a.content[n.content_index];if(!o)throw new Y(`missing content at index ${n.content_index}`);if(o.type!=="output_text")throw new Y(`expected content to be 'output_text', got ${o.type}`);s("response.output_text.delta",{...n,snapshot:o.text})}break}case"response.function_call_arguments.delta":{const a=i.output[n.output_index];if(!a)throw new Y(`missing output at index ${n.output_index}`);a.type==="function_call"&&s("response.function_call_arguments.delta",{...n,snapshot:a.arguments});break}default:s(n.type,n);break}},pc=function(){if(this.ended)throw new Y("stream has ended, this shouldn't happen");const n=y(this,Nn,"f");if(!n)throw new Y("request ended without sending any events");ee(this,Nn,void 0);const r=pv(n,y(this,ni,"f"));return ee(this,ri,r),r},vc=function(n){let r=y(this,Nn,"f");if(!r){if(n.type!=="response.created")throw new Y(`When snapshot hasn't been set yet, expected 'response.created' event, got ${n.type}`);return r=ee(this,Nn,n.response),r}switch(n.type){case"response.output_item.added":{r.output.push(n.item);break}case"response.content_part.added":{const s=r.output[n.output_index];if(!s)throw new Y(`missing output at index ${n.output_index}`);const i=s.type,a=n.part;i==="message"&&a.type!=="reasoning_text"?s.content.push(a):i==="reasoning"&&a.type==="reasoning_text"&&(s.content||(s.content=[]),s.content.push(a));break}case"response.output_text.delta":{const s=r.output[n.output_index];if(!s)throw new Y(`missing output at index ${n.output_index}`);if(s.type==="message"){const i=s.content[n.content_index];if(!i)throw new Y(`missing content at index ${n.content_index}`);if(i.type!=="output_text")throw new Y(`expected content to be 'output_text', got ${i.type}`);i.text+=n.delta}break}case"response.function_call_arguments.delta":{const s=r.output[n.output_index];if(!s)throw new Y(`missing output at index ${n.output_index}`);s.type==="function_call"&&(s.arguments+=n.delta);break}case"response.reasoning_text.delta":{const s=r.output[n.output_index];if(!s)throw new Y(`missing output at index ${n.output_index}`);if(s.type==="reasoning"){const i=s.content?.[n.content_index];if(!i)throw new Y(`missing content at index ${n.content_index}`);if(i.type!=="reasoning_text")throw new Y(`expected content to be 'reasoning_text', got ${i.type}`);i.text+=n.delta}break}case"response.completed":{ee(this,Nn,n.response);break}}return r},Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("event",s=>{const i=n.shift();i?i.resolve(s):e.push(s)}),this.on("end",()=>{r=!0;for(const s of n)s.resolve(void 0);n.length=0}),this.on("abort",s=>{r=!0;for(const i of n)i.reject(s);n.length=0}),this.on("error",s=>{r=!0;for(const i of n)i.reject(s);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((i,a)=>n.push({resolve:i,reject:a})).then(i=>i?{value:i,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}async finalResponse(){await this.done();const e=y(this,ri,"f");if(!e)throw new Y("stream ended without producing a ChatCompletion");return e}}function pv(t,e){return cv(t,e)}class Gd extends J{list(e,n={},r){return this._client.getAPIList(R`/responses/${e}/input_items`,Ue,{query:n,...r})}}class tl extends J{constructor(){super(...arguments),this.inputItems=new Gd(this._client)}create(e,n){return this._client.post("/responses",{body:e,...n,stream:e.stream??!1})._thenUnwrap(r=>("object"in r&&r.object==="response"&&lo(r),r))}retrieve(e,n={},r){return this._client.get(R`/responses/${e}`,{query:n,...r,stream:n?.stream??!1})._thenUnwrap(s=>("object"in s&&s.object==="response"&&lo(s),s))}delete(e,n){return this._client.delete(R`/responses/${e}`,{...n,headers:H([{Accept:"*/*"},n?.headers])})}parse(e,n){return this._client.responses.create(e,n)._thenUnwrap(r=>Kd(r,e))}stream(e,n){return el.createResponse(this._client,e,n)}cancel(e,n){return this._client.post(R`/responses/${e}/cancel`,n)}}tl.InputItems=Gd;class Qd extends J{create(e,n,r){return this._client.post(R`/uploads/${e}/parts`,lr({body:n,...r},this._client))}}class nl extends J{constructor(){super(...arguments),this.parts=new Qd(this._client)}create(e,n){return this._client.post("/uploads",{body:e,...n})}cancel(e,n){return this._client.post(R`/uploads/${e}/cancel`,n)}complete(e,n,r){return this._client.post(R`/uploads/${e}/complete`,{body:n,...r})}}nl.Parts=Qd;const vv=async t=>{const e=await Promise.allSettled(t),n=e.filter(s=>s.status==="rejected");if(n.length){for(const s of n)console.error(s.reason);throw new Error(`${n.length} promise(s) failed - see the above errors`)}const r=[];for(const s of e)s.status==="fulfilled"&&r.push(s.value);return r};class Zd extends J{create(e,n,r){return this._client.post(R`/vector_stores/${e}/file_batches`,{body:n,...r,headers:H([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}retrieve(e,n,r){const{vector_store_id:s}=n;return this._client.get(R`/vector_stores/${s}/file_batches/${e}`,{...r,headers:H([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}cancel(e,n,r){const{vector_store_id:s}=n;return this._client.post(R`/vector_stores/${s}/file_batches/${e}/cancel`,{...r,headers:H([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}async createAndPoll(e,n,r){const s=await this.create(e,n);return await this.poll(e,s.id,r)}listFiles(e,n,r){const{vector_store_id:s,...i}=n;return this._client.getAPIList(R`/vector_stores/${s}/file_batches/${e}/files`,Ue,{query:i,...r,headers:H([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}async poll(e,n,r){const s=H([r?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":r?.pollIntervalMs?.toString()??void 0}]);for(;;){const{data:i,response:a}=await this.retrieve(n,{vector_store_id:e},{...r,headers:s}).withResponse();switch(i.status){case"in_progress":let o=5e3;if(r?.pollIntervalMs)o=r.pollIntervalMs;else{const l=a.headers.get("openai-poll-after-ms");if(l){const c=parseInt(l);isNaN(c)||(o=c)}}await Ls(o);break;case"failed":case"cancelled":case"completed":return i}}}async uploadAndPoll(e,{files:n,fileIds:r=[]},s){if(n==null||n.length==0)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");const i=s?.maxConcurrency??5,a=Math.min(i,n.length),o=this._client,l=n.values(),c=[...r];async function f(p){for(let u of p){const m=await o.files.create({file:u,purpose:"assistants"},s);c.push(m.id)}}const h=Array(a).fill(l).map(f);return await vv(h),await this.createAndPoll(e,{file_ids:c})}}class ef extends J{create(e,n,r){return this._client.post(R`/vector_stores/${e}/files`,{body:n,...r,headers:H([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}retrieve(e,n,r){const{vector_store_id:s}=n;return this._client.get(R`/vector_stores/${s}/files/${e}`,{...r,headers:H([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}update(e,n,r){const{vector_store_id:s,...i}=n;return this._client.post(R`/vector_stores/${s}/files/${e}`,{body:i,...r,headers:H([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}list(e,n={},r){return this._client.getAPIList(R`/vector_stores/${e}/files`,Ue,{query:n,...r,headers:H([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}delete(e,n,r){const{vector_store_id:s}=n;return this._client.delete(R`/vector_stores/${s}/files/${e}`,{...r,headers:H([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}async createAndPoll(e,n,r){const s=await this.create(e,n,r);return await this.poll(e,s.id,r)}async poll(e,n,r){const s=H([r?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":r?.pollIntervalMs?.toString()??void 0}]);for(;;){const i=await this.retrieve(n,{vector_store_id:e},{...r,headers:s}).withResponse(),a=i.data;switch(a.status){case"in_progress":let o=5e3;if(r?.pollIntervalMs)o=r.pollIntervalMs;else{const l=i.response.headers.get("openai-poll-after-ms");if(l){const c=parseInt(l);isNaN(c)||(o=c)}}await Ls(o);break;case"failed":case"completed":return a}}}async upload(e,n,r){const s=await this._client.files.create({file:n,purpose:"assistants"},r);return this.create(e,{file_id:s.id},r)}async uploadAndPoll(e,n,r){const s=await this.upload(e,n,r);return await this.poll(e,s.id,r)}content(e,n,r){const{vector_store_id:s}=n;return this._client.getAPIList(R`/vector_stores/${s}/files/${e}/content`,Ji,{...r,headers:H([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}}class Zi extends J{constructor(){super(...arguments),this.files=new ef(this._client),this.fileBatches=new Zd(this._client)}create(e,n){return this._client.post("/vector_stores",{body:e,...n,headers:H([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}retrieve(e,n){return this._client.get(R`/vector_stores/${e}`,{...n,headers:H([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}update(e,n,r){return this._client.post(R`/vector_stores/${e}`,{body:n,...r,headers:H([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}list(e={},n){return this._client.getAPIList("/vector_stores",Ue,{query:e,...n,headers:H([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}delete(e,n){return this._client.delete(R`/vector_stores/${e}`,{...n,headers:H([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}search(e,n,r){return this._client.getAPIList(R`/vector_stores/${e}/search`,Ji,{body:n,method:"post",...r,headers:H([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}}Zi.Files=ef;Zi.FileBatches=Zd;class tf extends J{create(e,n){return this._client.post("/videos",tc({body:e,...n},this._client))}retrieve(e,n){return this._client.get(R`/videos/${e}`,n)}list(e={},n){return this._client.getAPIList("/videos",xi,{query:e,...n})}delete(e,n){return this._client.delete(R`/videos/${e}`,n)}downloadContent(e,n={},r){return this._client.get(R`/videos/${e}/content`,{query:n,...r,headers:H([{Accept:"application/binary"},r?.headers]),__binaryResponse:!0})}remix(e,n,r){return this._client.post(R`/videos/${e}/remix`,tc({body:n,...r},this._client))}}var xr,nf,mi;class rf extends J{constructor(){super(...arguments),xr.add(this)}async unwrap(e,n,r=this._client.webhookSecret,s=300){return await this.verifySignature(e,n,r,s),JSON.parse(e)}async verifySignature(e,n,r=this._client.webhookSecret,s=300){if(typeof crypto>"u"||typeof crypto.subtle.importKey!="function"||typeof crypto.subtle.verify!="function")throw new Error("Webhook signature verification is only supported when the `crypto` global is defined");y(this,xr,"m",nf).call(this,r);const i=H([n]).values,a=y(this,xr,"m",mi).call(this,i,"webhook-signature"),o=y(this,xr,"m",mi).call(this,i,"webhook-timestamp"),l=y(this,xr,"m",mi).call(this,i,"webhook-id"),c=parseInt(o,10);if(isNaN(c))throw new fs("Invalid webhook timestamp format");const f=Math.floor(Date.now()/1e3);if(f-c>s)throw new fs("Webhook timestamp is too old");if(c>f+s)throw new fs("Webhook timestamp is too new");const h=a.split(" ").map(v=>v.startsWith("v1,")?v.substring(3):v),p=r.startsWith("whsec_")?Buffer.from(r.replace("whsec_",""),"base64"):Buffer.from(r,"utf-8"),u=l?`${l}.${o}.${e}`:`${o}.${e}`,m=await crypto.subtle.importKey("raw",p,{name:"HMAC",hash:"SHA-256"},!1,["verify"]);for(const v of h)try{const _=Buffer.from(v,"base64");if(await crypto.subtle.verify("HMAC",m,_,new TextEncoder().encode(u)))return}catch{continue}throw new fs("The given webhook signature does not match the expected signature")}}xr=new WeakSet,nf=function(e){if(typeof e!="string"||e.length===0)throw new Error("The webhook secret must either be set using the env var, OPENAI_WEBHOOK_SECRET, on the client class, OpenAI({ webhookSecret: '123' }), or passed to this function")},mi=function(e,n){if(!e)throw new Error("Headers are required");const r=e.get(n);if(r==null)throw new Error(`Missing required header: ${n}`);return r};var co,rl,pi,sf;class ce{constructor({baseURL:e=wr("OPENAI_BASE_URL"),apiKey:n=wr("OPENAI_API_KEY"),organization:r=wr("OPENAI_ORG_ID")??null,project:s=wr("OPENAI_PROJECT_ID")??null,webhookSecret:i=wr("OPENAI_WEBHOOK_SECRET")??null,...a}={}){if(co.add(this),pi.set(this,void 0),this.completions=new Od(this),this.chat=new zo(this),this.embeddings=new Fd(this),this.files=new Bd(this),this.images=new jd(this),this.audio=new Us(this),this.moderations=new Vd(this),this.models=new Xd(this),this.fineTuning=new Xr(this),this.graders=new Zo(this),this.vectorStores=new Zi(this),this.webhooks=new rf(this),this.beta=new jr(this),this.batches=new Cd(this),this.uploads=new nl(this),this.responses=new tl(this),this.realtime=new Qi(this),this.conversations=new Vo(this),this.evals=new Yo(this),this.containers=new Xo(this),this.videos=new tf(this),n===void 0)throw new Y("Missing credentials. Please pass an `apiKey`, or set the `OPENAI_API_KEY` environment variable.");const o={apiKey:n,organization:r,project:s,webhookSecret:i,...a,baseURL:e||"https://api.openai.com/v1"};if(!o.dangerouslyAllowBrowser&&_p())throw new Y(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);this.baseURL=o.baseURL,this.timeout=o.timeout??rl.DEFAULT_TIMEOUT,this.logger=o.logger??console;const l="warn";this.logLevel=l,this.logLevel=Zl(o.logLevel,"ClientOptions.logLevel",this)??Zl(wr("OPENAI_LOG"),"process.env['OPENAI_LOG']",this)??l,this.fetchOptions=o.fetchOptions,this.maxRetries=o.maxRetries??2,this.fetch=o.fetch??Sp(),ee(this,pi,kp),this._options=o,this.apiKey=typeof n=="string"?n:"Missing Key",this.organization=r,this.project=s,this.webhookSecret=i}withOptions(e){return new this.constructor({...this._options,baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,organization:this.organization,project:this.project,webhookSecret:this.webhookSecret,...e})}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){}async authHeaders(e){return H([{Authorization:`Bearer ${this.apiKey}`}])}stringifyQuery(e){return Dp(e,{arrayFormat:"brackets"})}getUserAgent(){return`${this.constructor.name}/JS ${$r}`}defaultIdempotencyKey(){return`stainless-node-retry-${Au()}`}makeStatusError(e,n,r,s){return rt.generate(e,n,r,s)}async _callApiKey(){const e=this._options.apiKey;if(typeof e!="function")return!1;let n;try{n=await e()}catch(r){throw r instanceof Y?r:new Y(`Failed to get token from 'apiKey' function: ${r.message}`,{cause:r})}if(typeof n!="string"||!n)throw new Y(`Expected 'apiKey' function argument to return a string but it returned ${n}`);return this.apiKey=n,!0}buildURL(e,n,r){const s=!y(this,co,"m",sf).call(this)&&r||this.baseURL,i=fp(e)?new URL(e):new URL(s+(s.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),a=this.defaultQuery();return hp(a)||(n={...a,...n}),typeof n=="object"&&n&&!Array.isArray(n)&&(i.search=this.stringifyQuery(n)),i.toString()}async prepareOptions(e){await this._callApiKey()}async prepareRequest(e,{url:n,options:r}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,r){return this.request(Promise.resolve(r).then(s=>({method:e,path:n,...s})))}request(e,n=null){return new Vi(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,r){const s=await e,i=s.maxRetries??this.maxRetries;n==null&&(n=i),await this.prepareOptions(s);const{req:a,url:o,timeout:l}=await this.buildRequest(s,{retryCount:i-n});await this.prepareRequest(a,{url:o,options:s});const c="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),f=r===void 0?"":`, retryOf: ${r}`,h=Date.now();if(Ze(this).debug(`[${c}] sending request`,Kn({retryOfRequestLogID:r,method:s.method,url:o,options:s,headers:a.headers})),s.signal?.aborted)throw new zt;const p=new AbortController,u=await this.fetchWithTimeout(o,a,l,p).catch(Ga),m=Date.now();if(u instanceof globalThis.Error){const w=`retrying, ${n} attempts remaining`;if(s.signal?.aborted)throw new zt;const g=Ka(u)||/timed? ?out/i.test(String(u)+("cause"in u?String(u.cause):""));if(n)return Ze(this).info(`[${c}] connection ${g?"timed out":"failed"} - ${w}`),Ze(this).debug(`[${c}] connection ${g?"timed out":"failed"} (${w})`,Kn({retryOfRequestLogID:r,url:o,durationMs:m-h,message:u.message})),this.retryRequest(s,n,r??c);throw Ze(this).info(`[${c}] connection ${g?"timed out":"failed"} - error; no more retries left`),Ze(this).debug(`[${c}] connection ${g?"timed out":"failed"} (error; no more retries left)`,Kn({retryOfRequestLogID:r,url:o,durationMs:m-h,message:u.message})),g?new Oo:new ji({cause:u})}const v=[...u.headers.entries()].filter(([w])=>w==="x-request-id").map(([w,g])=>", "+w+": "+JSON.stringify(g)).join(""),_=`[${c}${f}${v}] ${a.method} ${o} ${u.ok?"succeeded":"failed"} with status ${u.status} in ${m-h}ms`;if(!u.ok){const w=await this.shouldRetry(u);if(n&&w){const T=`retrying, ${n} attempts remaining`;return await $p(u.body),Ze(this).info(`${_} - ${T}`),Ze(this).debug(`[${c}] response error (${T})`,Kn({retryOfRequestLogID:r,url:u.url,status:u.status,headers:u.headers,durationMs:m-h})),this.retryRequest(s,n,r??c,u.headers)}const g=w?"error; no more retries left":"error; not retryable";Ze(this).info(`${_} - ${g}`);const k=await u.text().catch(T=>Ga(T).message),S=vp(k),C=S?void 0:k;throw Ze(this).debug(`[${c}] response error (${g})`,Kn({retryOfRequestLogID:r,url:u.url,status:u.status,headers:u.headers,message:C,durationMs:Date.now()-h})),this.makeStatusError(u.status,S,C,u.headers)}return Ze(this).info(_),Ze(this).debug(`[${c}] response start`,Kn({retryOfRequestLogID:r,url:u.url,status:u.status,headers:u.headers,durationMs:m-h})),{response:u,options:s,controller:p,requestLogID:c,retryOfRequestLogID:r,startTime:h}}getAPIList(e,n,r){return this.requestAPIList(n,{method:"get",path:e,...r})}requestAPIList(e,n){const r=this.makeRequest(n,null,void 0);return new Bp(this,r,e)}async fetchWithTimeout(e,n,r,s){const{signal:i,method:a,...o}=n||{};i&&i.addEventListener("abort",()=>s.abort());const l=setTimeout(()=>s.abort(),r),c=globalThis.ReadableStream&&o.body instanceof globalThis.ReadableStream||typeof o.body=="object"&&o.body!==null&&Symbol.asyncIterator in o.body,f={signal:s.signal,...c?{duplex:"half"}:{},method:"GET",...o};a&&(f.method=a.toUpperCase());try{return await this.fetch.call(void 0,e,f)}finally{clearTimeout(l)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,r,s){let i;const a=s?.get("retry-after-ms");if(a){const l=parseFloat(a);Number.isNaN(l)||(i=l)}const o=s?.get("retry-after");if(o&&!i){const l=parseFloat(o);Number.isNaN(l)?i=Date.parse(o)-Date.now():i=l*1e3}if(!(i&&0<=i&&i<60*1e3)){const l=e.maxRetries??this.maxRetries;i=this.calculateDefaultRetryTimeoutMillis(n,l)}return await Ls(i),this.makeRequest(e,n-1,r)}calculateDefaultRetryTimeoutMillis(e,n){const i=n-e,a=Math.min(.5*Math.pow(2,i),8),o=1-Math.random()*.25;return a*o*1e3}async buildRequest(e,{retryCount:n=0}={}){const r={...e},{method:s,path:i,query:a,defaultBaseURL:o}=r,l=this.buildURL(i,a,o);"timeout"in r&&pp("timeout",r.timeout),r.timeout=r.timeout??this.timeout;const{bodyHeaders:c,body:f}=this.buildBody({options:r}),h=await this.buildHeaders({options:e,method:s,bodyHeaders:c,retryCount:n});return{req:{method:s,headers:h,...r.signal&&{signal:r.signal},...globalThis.ReadableStream&&f instanceof globalThis.ReadableStream&&{duplex:"half"},...f&&{body:f},...this.fetchOptions??{},...r.fetchOptions??{}},url:l,timeout:r.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:r,retryCount:s}){let i={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),i[this.idempotencyHeader]=e.idempotencyKey);const a=H([i,{Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(s),...e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{},...wp(),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project},await this.authHeaders(e),this._options.defaultHeaders,r,e.headers]);return this.validateHeaders(a),a.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const r=H([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&r.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:Wu(e)}:y(this,pi,"f").call(this,{body:e,headers:r})}}rl=ce,pi=new WeakMap,co=new WeakSet,sf=function(){return this.baseURL!=="https://api.openai.com/v1"};ce.OpenAI=rl;ce.DEFAULT_TIMEOUT=6e5;ce.OpenAIError=Y;ce.APIError=rt;ce.APIConnectionError=ji;ce.APIConnectionTimeoutError=Oo;ce.APIUserAbortError=zt;ce.NotFoundError=Iu;ce.ConflictError=Pu;ce.RateLimitError=Mu;ce.BadRequestError=Tu;ce.AuthenticationError=Du;ce.InternalServerError=Nu;ce.PermissionDeniedError=Ru;ce.UnprocessableEntityError=Ou;ce.InvalidWebhookSignatureError=fs;ce.toFile=qp;ce.Completions=Od;ce.Chat=zo;ce.Embeddings=Fd;ce.Files=Bd;ce.Images=jd;ce.Audio=Us;ce.Moderations=Vd;ce.Models=Xd;ce.FineTuning=Xr;ce.Graders=Zo;ce.VectorStores=Zi;ce.Webhooks=rf;ce.Beta=jr;ce.Batches=Cd;ce.Uploads=nl;ce.Responses=tl;ce.Realtime=Qi;ce.Conversations=Vo;ce.Evals=Yo;ce.Containers=Xo;ce.Videos=tf;const si=43200,_c=1440,gc=Symbol.for("constructDateFrom");function ea(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&gc in t?t[gc](e):t instanceof Date?new t.constructor(e):new Date(e)}function Dn(t,e){return ea(t,t)}function ls(t,e,n){const r=Dn(t);return isNaN(e)?ea(t,NaN):(e&&r.setDate(r.getDate()+e),r)}let _v={};function gv(){return _v}function yc(t){const e=Dn(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function sl(t,...e){const n=ea.bind(null,e.find(r=>typeof r=="object"));return e.map(n)}function vi(t,e){const n=+Dn(t)-+Dn(e);return n<0?-1:n>0?1:n}function yv(t){return ea(t,Date.now())}function bv(t,e,n){const[r,s]=sl(n?.in,t,e),i=r.getFullYear()-s.getFullYear(),a=r.getMonth()-s.getMonth();return i*12+a}function wv(t){return e=>{const n=Math.trunc,r=n(e);return r===0?0:r}}function Sv(t,e){return+Dn(t)-+Dn(e)}function $v(t,e){const n=Dn(t);return n.setHours(23,59,59,999),n}function kv(t,e){const n=Dn(t),r=n.getMonth();return n.setFullYear(n.getFullYear(),r+1,0),n.setHours(23,59,59,999),n}function xv(t,e){const n=Dn(t);return+$v(n)==+kv(n)}function Cv(t,e,n){const[r,s,i]=sl(n?.in,t,t,e),a=vi(s,i),o=Math.abs(bv(s,i));if(o<1)return 0;s.getMonth()===1&&s.getDate()>27&&s.setDate(30),s.setMonth(s.getMonth()-a*o);let l=vi(s,i)===-a;xv(r)&&o===1&&vi(r,i)===1&&(l=!1);const c=a*(o-+l);return c===0?0:c}function Ev(t,e,n){const r=Sv(t,e)/1e3;return wv()(r)}const Av={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Tv=(t,e,n)=>{let r;const s=Av[t];return typeof s=="string"?r=s:e===1?r=s.one:r=s.other.replace("{{count}}",e.toString()),n?.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function Ea(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const Dv={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Rv={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Iv={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Pv={date:Ea({formats:Dv,defaultWidth:"full"}),time:Ea({formats:Rv,defaultWidth:"full"}),dateTime:Ea({formats:Iv,defaultWidth:"full"})},Ov={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Mv=(t,e,n,r)=>Ov[t];function cs(t){return(e,n)=>{const r=n?.context?String(n.context):"standalone";let s;if(r==="formatting"&&t.formattingValues){const a=t.defaultFormattingWidth||t.defaultWidth,o=n?.width?String(n.width):a;s=t.formattingValues[o]||t.formattingValues[a]}else{const a=t.defaultWidth,o=n?.width?String(n.width):t.defaultWidth;s=t.values[o]||t.values[a]}const i=t.argumentCallback?t.argumentCallback(e):e;return s[i]}}const Nv={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Fv={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Lv={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Bv={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Uv={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Wv={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Hv=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},zv={ordinalNumber:Hv,era:cs({values:Nv,defaultWidth:"wide"}),quarter:cs({values:Fv,defaultWidth:"wide",argumentCallback:t=>t-1}),month:cs({values:Lv,defaultWidth:"wide"}),day:cs({values:Bv,defaultWidth:"wide"}),dayPeriod:cs({values:Uv,defaultWidth:"wide",formattingValues:Wv,defaultFormattingWidth:"wide"})};function us(t){return(e,n={})=>{const r=n.width,s=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],i=e.match(s);if(!i)return null;const a=i[0],o=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(o)?jv(o,h=>h.test(a)):qv(o,h=>h.test(a));let c;c=t.valueCallback?t.valueCallback(l):l,c=n.valueCallback?n.valueCallback(c):c;const f=e.slice(a.length);return{value:c,rest:f}}}function qv(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function jv(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function Xv(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const s=r[0],i=e.match(t.parsePattern);if(!i)return null;let a=t.valueCallback?t.valueCallback(i[0]):i[0];a=n.valueCallback?n.valueCallback(a):a;const o=e.slice(s.length);return{value:a,rest:o}}}const Vv=/^(\d+)(th|st|nd|rd)?/i,Jv=/\d+/i,Yv={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Kv={any:[/^b/i,/^(a|c)/i]},Gv={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Qv={any:[/1/i,/2/i,/3/i,/4/i]},Zv={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},e_={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},t_={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},n_={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},r_={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},s_={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},i_={ordinalNumber:Xv({matchPattern:Vv,parsePattern:Jv,valueCallback:t=>parseInt(t,10)}),era:us({matchPatterns:Yv,defaultMatchWidth:"wide",parsePatterns:Kv,defaultParseWidth:"any"}),quarter:us({matchPatterns:Gv,defaultMatchWidth:"wide",parsePatterns:Qv,defaultParseWidth:"any",valueCallback:t=>t+1}),month:us({matchPatterns:Zv,defaultMatchWidth:"wide",parsePatterns:e_,defaultParseWidth:"any"}),day:us({matchPatterns:t_,defaultMatchWidth:"wide",parsePatterns:n_,defaultParseWidth:"any"}),dayPeriod:us({matchPatterns:r_,defaultMatchWidth:"any",parsePatterns:s_,defaultParseWidth:"any"})},a_={code:"en-US",formatDistance:Tv,formatLong:Pv,formatRelative:Mv,localize:zv,match:i_,options:{weekStartsOn:0,firstWeekContainsDate:1}};function o_(t,e,n){const r=gv(),s=n?.locale??r.locale??a_,i=2520,a=vi(t,e);if(isNaN(a))throw new RangeError("Invalid time value");const o=Object.assign({},n,{addSuffix:n?.addSuffix,comparison:a}),[l,c]=sl(n?.in,...a>0?[e,t]:[t,e]),f=Ev(c,l),h=(yc(c)-yc(l))/1e3,p=Math.round((f-h)/60);let u;if(p<2)return p===0?s.formatDistance("lessThanXMinutes",1,o):s.formatDistance("xMinutes",p,o);if(p<45)return s.formatDistance("xMinutes",p,o);if(p<90)return s.formatDistance("aboutXHours",1,o);if(p<_c){const m=Math.round(p/60);return s.formatDistance("aboutXHours",m,o)}else{if(p<i)return s.formatDistance("xDays",1,o);if(p<si){const m=Math.round(p/_c);return s.formatDistance("xDays",m,o)}else if(p<si*2)return u=Math.round(p/si),s.formatDistance("aboutXMonths",u,o)}if(u=Cv(c,l),u<12){const m=Math.round(p/si);return s.formatDistance("xMonths",m,o)}else{const m=u%12,v=Math.trunc(u/12);return m<3?s.formatDistance("aboutXYears",v,o):m<9?s.formatDistance("overXYears",v,o):s.formatDistance("almostXYears",v+1,o)}}function l_(t,e){return o_(t,yv(t),e)}function c_(t){return function(e){return e.key==="Enter"||e.key===" "&&!e.preventDefault()?t.call(this,e):void 0}}function Or(t,e){let n={update(r){typeof r=="string"?t.innerText=r:r?.domNodes?t.replaceChildren(...r.domNodes):r?.html&&(t.innerHTML=r.html)}};return n.update(e),n}function u_(t,e){let n=new ResizeObserver(r=>{for(let s of r)e(s)});return n.observe(t),{destroy(){n.unobserve(t)}}}const uo=86400;function vn(t=void 0){return t!==void 0?t instanceof Date?wc(t):f_(t):wc(new Date)}function tt(t){if(typeof t=="number")t={seconds:t};else if(typeof t=="string"){let n=0,r=2;for(let s of t.split(":",3))n+=parseInt(s,10)*Math.pow(60,r--);t={seconds:n}}else t instanceof Date&&(t={hours:t.getUTCHours(),minutes:t.getUTCMinutes(),seconds:t.getUTCSeconds()});let e=t.weeks||t.week||0;return{years:t.years||t.year||0,months:t.months||t.month||0,days:e*7+(t.days||t.day||0),seconds:(t.hours||t.hour||0)*60*60+(t.minutes||t.minute||0)*60+(t.seconds||t.second||0),inWeeks:!!e}}function ae(t){return new Date(t.getTime())}function Oe(t,e,n=1){t.setUTCFullYear(t.getUTCFullYear()+n*e.years);let r=t.getUTCMonth()+n*e.months;for(t.setUTCMonth(r),r%=12,r<0&&(r+=12);t.getUTCMonth()!==r;)Mr(t);return t.setUTCDate(t.getUTCDate()+n*e.days),t.setUTCSeconds(t.getUTCSeconds()+n*e.seconds),t}function _i(t,e,n=1){return Oe(t,e,-n)}function zn(t,e=1){return t.setUTCDate(t.getUTCDate()+e),t}function Mr(t,e=1){return zn(t,-e)}function Pt(t){return t.setUTCHours(0,0,0,0),t}function nt(t){return new Date(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds())}function mn(t,e=19){return t.toISOString().substring(0,e)}function Ht(t,...e){return e.every(n=>t.getTime()===n.getTime())}function d_(t,e){let n=e-t.getUTCDay();return t.setUTCDate(t.getUTCDate()+(n>=0?n:n+7)),t}function af(t,e){let n=e-t.getUTCDay();return t.setUTCDate(t.getUTCDate()+(n<=0?n:n-7)),t}function bc(t){return typeof t=="string"&&t.length<=10}function fo(t,e){return t.setUTCHours(e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),0),t}function Bt(t){return t.seconds}function ho(t,e){return Oe(t,e),t}function mo(t,e,n){if(_i(t,e),n.length&&n.length<7)for(;n.includes(t.getUTCDay());)Mr(t);return t}function wc(t){return new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds()))}function f_(t){const e=t.match(/\d+/g);return new Date(Date.UTC(Number(e[0]),Number(e[1])-1,Number(e[2]),Number(e[3]||0),Number(e[4]||0),Number(e[5]||0)))}function Nr(...t){return Object.assign(...t)}function xn(t){return Object.keys(t)}function h_(t){return Object.entries(t)}function m_(t){return Math.floor(t)}function Fn(...t){return Math.min(...t)}function kn(...t){return Math.max(...t)}function p_(){return Symbol("ec")}function il(t){return Array.isArray(t)}function Pe(t){return typeof t=="function"}function v_(t){return t()}function of(t){t.forEach(v_)}function __(){}const po=t=>t;function lf(t,e,n){n.update(r=>r.set(e,t))}function g_(t){of(t),t.clear()}function y_(t,e,n){e??=t,n.has(e)||n.set(e,setTimeout(()=>{n.delete(e),t()}))}let al=p_();function ol(t,e){t[al]=e}function b_(t){return!!t?.[al]}function Cs(t){return t[al]}function cf(t,e,n,r=[]){let s=document.createElement(t);s.className=e,typeof n=="string"?s.innerText=n:n.domNodes?s.replaceChildren(...n.domNodes):n.html&&(s.innerHTML=n.html);for(let i of r)s.setAttribute(...i);return s}function w_(t){return t.scrollHeight>t.clientHeight}function Fr(t){return t.getBoundingClientRect()}function vo(t,e){for(;e--;)t=t.parentElement;return t}function S_(t){return Fr(t).height}function Tr(t,e,n=document,r=[]){r.push(n);for(let s of n.elementsFromPoint(t,e)){if(b_(s))return s;if(s.shadowRoot&&!r.includes(s.shadowRoot)){let i=Tr(t,e,s.shadowRoot,r);if(i)return i}}return null}function ws(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function $_(t,e,n,r){return{type:t,title:e,currentStart:n.start,currentEnd:n.end,activeStart:r.start,activeEnd:r.end,calendar:void 0}}function kt(t){return t=Nr({},t),t.currentStart=nt(t.currentStart),t.currentEnd=nt(t.currentEnd),t.activeStart=nt(t.activeStart),t.activeEnd=nt(t.activeEnd),t}function uf(t){return t.startsWith("list")}function Aa(t){return t.includes("Timeline")}let k_=1;function Pi(t){return t.map(e=>{let n={id:"id"in e?String(e.id):`{generated-${k_++}}`,resourceIds:Ta(e,"resourceId").map(String),allDay:e.allDay??(bc(e.start)&&bc(e.end)),start:vn(e.start),end:vn(e.end),title:e.title??"",editable:e.editable,startEditable:e.startEditable,durationEditable:e.durationEditable,display:e.display??"auto",extendedProps:e.extendedProps??{},backgroundColor:e.backgroundColor??e.color,textColor:e.textColor,classNames:Ta(e,"className"),styles:Ta(e,"style")};if(n.allDay){Pt(n.start);let r=ae(n.end);Pt(n.end),(!Ht(n.end,r)||Ht(n.end,n.start))&&zn(n.end)}return n})}function Ta(t,e){let n=t[e+"s"]??t[e]??[];return il(n)?n:[n]}function x_(t){return t.map(e=>({events:e.events,url:e.url&&e.url.trimEnd("&")||"",method:e.method&&e.method.toUpperCase()||"GET",extraParams:e.extraParams||{}}))}function Oi(t,e,n){let r={start:t.start>e?t.start:e,end:t.end<n?t.end:n,event:t};return r.zeroDuration=Ht(r.start,r.end),r}function df(t,e){Pe(e)?t.sort((n,r)=>e(Sc(n),Sc(r))):t.sort((n,r)=>n.start-r.start||r.event.allDay-n.event.allDay)}function Sc(t){return{...t,start:nt(t.start),end:nt(t.end),event:xt(t.event)}}function C_(t,e,n,r,s,i){let a=s.formatRange(t.start,e&&t.event.display!=="pointer"&&!t.zeroDuration?fo(ae(t.start),t.end):t.start),o;if(n&&(o=Pe(n)?n({event:xt(t.event),timeText:a,view:kt(i)}):n),o===void 0){let l;switch(t.event.display){case"background":l=[];break;case"pointer":l=[$c(a,t,r)];break;default:l=[...t.event.allDay?[]:[$c(a,t,r)],cf("h4",r.eventTitle,t.event.title)]}o={domNodes:l}}return[a,o]}function $c(t,e,n){return cf("time",n.eventTime,t,[["datetime",mn(e.start)]])}function E_(t,e,n){let r=e.classNames;return t&&(Pe(t)&&(t=t({event:xt(e),view:kt(n)})),r=[...il(t)?t:[t],...r]),r}function xt(t){return ff(t,nt)}function Da(t){return ff(t,ae)}function ff(t,e){return t=Nr({},t),t.start=e(t.start),t.end=e(t.end),t}function Ra(t,e,n){let r={};if(t.length){df(t,n);let s;for(let i of t){let a=[],o=Pt(ae(i.start));for(;i.end>o;){if(!e.includes(o.getUTCDay())&&(a.push(ae(o)),a.length>1)){let l=o.getTime();r[l]?r[l].chunks.push(i):r[l]={sorted:!1,chunks:[i]}}zn(o)}if(a.length){i.date=a[0],i.days=a.length,i.dates=a,i.start<a[0]&&(i.start=a[0]);let l=zn(ae(a.at(-1)));i.end>l&&(i.end=l)}else i.date=Pt(ae(i.start)),i.days=1,i.dates=[i.date];s&&Ht(s.date,i.date)&&(i.prev=s),s=i}}return r}function A_(t,e,n){t.top=0,t.prev&&(t.top=t.prev.bottom+1),t.bottom=t.top+n;let r=1,s=t.date.getTime();if(e[s]){e[s].sorted||(e[s].chunks.sort((i,a)=>i.top-a.top),e[s].sorted=!0);for(let i of e[s].chunks)if(t.top<i.bottom&&t.bottom>i.top){let a=i.bottom-t.top+1;r+=a,t.top+=a,t.bottom+=a}}return r}function hf(t,e){t.length=e.length;let n=[];for(let r of t)n.push(r?.reposition?.());return n}function Mi(t,e,n,r){return t.start<n&&t.end>e?r?(il(r)||(r=[r]),r.some(s=>t.resourceIds.includes(s.id))):!0:!1}function Ws(t){return T_(t)||mf(t)||D_(t)}function _n(t){return t==="background"}function T_(t){return t==="preview"}function mf(t){return t==="ghost"}function D_(t){return t==="pointer"}function R_(t){return pf(t,"day")}function I_(t){return pf(t,"week")}function pf(t,e){return{...t,next:"Next "+e,prev:"Previous "+e}}function kc(t){return e=>({...e,view:t})}function P_(t){let e,n;return t&&({start:e,end:n}=t,e&&(e=Pt(vn(e))),n&&(n=Pt(vn(n)))),{start:e,end:n}}function ll(t,e){return e.start&&t<e.start||e.end&&t>e.end}function xc(t,e){return e.start&&t<e.start&&(t=e.start),e.end&&t>e.end&&(t=e.end),t}function O_(t){let e=[];return vf(t,0,e),e}function vf(t,e,n){let r=[];for(let s of t){let i=M_(s);r.push(i),n.push(i);let a={level:e,children:[],expanded:!0,hidden:!1};ol(i,a),s.children&&(a.children=vf(s.children,e+1,n))}return r}function M_(t){return{id:String(t.id),title:t.title||"",eventBackgroundColor:t.eventBackgroundColor,eventTextColor:t.eventTextColor,extendedProps:t.extendedProps??{}}}function N_(t,e){return _f(t,e)?.eventBackgroundColor}function F_(t,e){return _f(t,e)?.eventTextColor}function _f(t,e){return e.find(n=>t.resourceIds.includes(n.id))}function Ia(t,e){return Ot([t,e],([n,r])=>{let s=Pe(r)?{format:r}:new Intl.DateTimeFormat(n,r);return{format:i=>s.format(nt(i))}})}function Cc(t,e){return Ot([t,e],([n,r])=>{let s;if(Pe(r))s=r;else{let i=new Intl.DateTimeFormat(n,r);s=(a,o)=>{if(a<=o)return i.formatRange(a,o);{let l=i.formatRangeToParts(o,a),c="",f=["startRange","endRange"],h=[!1,!1];for(let p of l){let u=f.indexOf(p.source);u>=0?h[u]||(c+=L_(f[1-u],l),h[u]=!0):c+=p.value}return c}}}return{formatRange:(i,a)=>s(nt(i),nt(a))}})}function L_(t,e){let n="";for(let r of e)r.source==t&&(n+=r.value);return n}function B_(t,e,n,r,s){t=ae(t);let i=[],a=ae(t);Oe(t,r.min),Oe(a,r.max),n===void 0&&(n=e.seconds<3600?tt(e.seconds*2):e);let o=ae(t);for(;t<a;){for(i.push([mn(t),s.format(t),t>=o]);n.seconds&&t>=o;)Oe(o,n);Oe(t,e)}return i}function U_(t,e,n,r,s){let i=tt(t),a=tt(e);if(n){let o=tt(Fn(Bt(i),kn(0,Bt(a)-uo))),l=tt(kn(Bt(a),Bt(o)+uo)),c=Pe(n?.eventFilter)?n.eventFilter:f=>!_n(f.display);e:for(let f of r){let h=Oe(ae(f),i),p=Oe(ae(f),a),u=Oe(ae(f),o),m=Oe(ae(f),l);for(let v of s)if(!v.allDay&&c(v)&&v.start<m&&v.end>u){if(v.start<h){let _=kn((v.start-f)/1e3,Bt(o));_<Bt(i)&&(i.seconds=_)}if(v.end>p){let _=Fn((v.end-f)/1e3,Bt(l));_>Bt(a)&&(a.seconds=_)}if(Bt(i)===Bt(o)&&Bt(a)===Bt(l))break e}}}return{min:i,max:a}}const gf=["buttonText","customButtons","theme"];function W_(t){let e={allDayContent:void 0,allDaySlot:!0,buttonText:{today:"today"},customButtons:{},date:new Date,datesSet:void 0,dayHeaderFormat:{weekday:"short",month:"numeric",day:"numeric"},dayHeaderAriaLabelFormat:{dateStyle:"full"},displayEventEnd:!0,duration:{weeks:1},events:[],eventAllUpdated:void 0,eventBackgroundColor:void 0,eventClassNames:void 0,eventClick:void 0,eventColor:void 0,eventContent:void 0,eventDidMount:void 0,eventFilter:void 0,eventMouseEnter:void 0,eventMouseLeave:void 0,eventOrder:void 0,eventSources:[],eventTextColor:void 0,eventTimeFormat:{hour:"numeric",minute:"2-digit"},filterEventsWithResources:!1,filterResourcesWithEvents:!1,firstDay:0,flexibleSlotTimeLimits:!1,headerToolbar:{start:"title",center:"",end:"today prev,next"},height:void 0,hiddenDays:[],highlightedDates:[],lazyFetching:!0,loading:void 0,locale:void 0,nowIndicator:!1,resourceLabelContent:void 0,resourceLabelDidMount:void 0,resources:[],selectable:!1,scrollTime:"06:00:00",slotDuration:"00:30:00",slotEventOverlap:!0,slotHeight:24,slotLabelInterval:void 0,slotLabelFormat:{hour:"numeric",minute:"2-digit"},slotMaxTime:"24:00:00",slotMinTime:"00:00:00",slotWidth:72,theme:{allDay:"ec-all-day",active:"ec-active",bgEvent:"ec-bg-event",bgEvents:"ec-bg-events",body:"ec-body",button:"ec-button",buttonGroup:"ec-button-group",calendar:"ec",content:"ec-content",day:"ec-day",dayHead:"ec-day-head",days:"ec-days",disabled:"ec-disabled",event:"ec-event",eventBody:"ec-event-body",eventTime:"ec-event-time",eventTitle:"ec-event-title",events:"ec-events",extra:"ec-extra",handle:"ec-handle",header:"ec-header",hiddenScroll:"ec-hidden-scroll",highlight:"ec-highlight",icon:"ec-icon",line:"ec-line",lines:"ec-lines",minor:"ec-minor",nowIndicator:"ec-now-indicator",otherMonth:"ec-other-month",resource:"ec-resource",sidebar:"ec-sidebar",sidebarTitle:"ec-sidebar-title",today:"ec-today",time:"ec-time",title:"ec-title",toolbar:"ec-toolbar",view:"",weekdays:["ec-sun","ec-mon","ec-tue","ec-wed","ec-thu","ec-fri","ec-sat"],withScroll:"ec-with-scroll"},titleFormat:{year:"numeric",month:"short",day:"numeric"},validRange:void 0,view:void 0,viewDidMount:void 0,views:{}};for(let n of t)n.createOptions?.(e);return e}function H_(t){let e={date:n=>Pt(vn(n)),duration:tt,events:Pi,eventSources:x_,hiddenDays:n=>[...new Set(n)],highlightedDates:n=>n.map(r=>Pt(vn(r))),resources:O_,scrollTime:tt,slotDuration:tt,slotLabelInterval:n=>n!==void 0?tt(n):void 0,slotMaxTime:tt,slotMinTime:tt,validRange:P_};for(let n of t)n.createParsers?.(e);return e}function z_(t,e){let n=[];for(let r of xn(t))t[r]!==e[r]&&n.push([r,t[r]]);return n}function q_(t){return Ot(t.view,e=>e?.startsWith("dayGrid"))}function j_(t){return Ot([t._currentRange,t.firstDay,t.slotMaxTime,t._dayGrid],([e,n,r,s])=>{let i=ae(e.start),a=ae(e.end);if(s)af(i,n),d_(a,n);else if(r.days||r.seconds>uo){Oe(Mr(a),r);let o=Mr(ae(a));o<i&&(i=o)}return{start:i,end:a}})}function X_(t){return Ot([t.date,t.duration,t.firstDay],([e,n,r])=>{let s=ae(e),i;return n.months?s.setUTCDate(1):n.inWeeks&&af(s,r),i=Oe(ae(s),n),{start:s,end:i}})}function V_(t){return Ot([t._activeRange,t.hiddenDays],([e,n])=>{let r=[],s=Pt(ae(e.start)),i=Pt(ae(e.end));for(;s<i;)n.includes(s.getUTCDay())||r.push(ae(s)),zn(s);return!r.length&&n.length&&n.length<7&&(t.date.update(a=>{for(;n.includes(a.getUTCDay());)zn(a);return a}),r=Ts(t._viewDates)),r})}function J_(t){return Ot([t.date,t._activeRange,t._intlTitle,t._dayGrid],([e,n,r,s])=>s?r.formatRange(e,e):r.formatRange(n.start,Mr(ae(n.end))))}function Y_(t){return Ot([t.view,t._viewTitle,t._currentRange,t._activeRange],e=>$_(...e))}function K_(t){let e=St([]),n,r=0,s={};return Ot([t.events,t.eventSources,t._activeRange,t._fetchedRange,t.lazyFetching,t.loading],(i,a)=>lf(()=>{let[o,l,c,f,h,p]=i;if(!l.length){a(o);return}if(!f.start||f.start>c.start||f.end<c.end||!h){n&&n.abort(),n=new AbortController,Pe(p)&&!r&&p(!0);let u=()=>{--r===0&&Pe(p)&&p(!1)},m=[],v=k=>u(),_=k=>{m=m.concat(Pi(k)),a(m),u()},w=mn(c.start),g=mn(c.end);for(let k of l){if(Pe(k.events)){let S=k.events({start:nt(c.start),end:nt(c.end),startStr:w,endStr:g},_,v);S!==void 0&&Promise.resolve(S).then(_,v)}else{let S=Pe(k.extraParams)?k.extraParams():Nr({},k.extraParams);S.start=w,S.end=g,S=new URLSearchParams(S);let C=k.url,x={},T;["GET","HEAD"].includes(k.method)?C+=(C.includes("?")?"&":"?")+S:(x["content-type"]="application/x-www-form-urlencoded;charset=UTF-8",T=String(S)),fetch(C,{method:k.method,headers:x,body:T,signal:n.signal,credentials:"same-origin"}).then($=>$.json()).then(_).catch(v)}++r}f.start=c.start,f.end=c.end}},s,t._queue),[]).subscribe(e.set),e}function G_(t){let e;t._view.subscribe(r=>e=r);let n={};return Ot([t._events,t.eventFilter],(r,s)=>lf(()=>{let[i,a]=r;s(Pe(a)?i.filter((o,l,c)=>a({event:o,index:l,events:c,view:e})):i)},n,t._queue),[])}function Q_(){return Cu(vn(),t=>{let e=setInterval(()=>{t(vn())},1e3);return()=>clearInterval(e)})}function Z_(t){return Ot(t._now,e=>Pt(ae(e)))}class eg{constructor(e,n){e=e||[];let r=W_(e),s=H_(e);r=_o(r,s),n=_o(n,s);for(let[a,o]of Object.entries(r))this[a]=St(o);this._queue=St(new Map),this._tasks=new Map,this._auxiliary=St([]),this._dayGrid=q_(this),this._currentRange=X_(this),this._activeRange=j_(this),this._fetchedRange=St({start:void 0,end:void 0}),this._events=K_(this),this._now=Q_(),this._today=Z_(this),this._intlEventTime=Cc(this.locale,this.eventTimeFormat),this._intlSlotLabel=Ia(this.locale,this.slotLabelFormat),this._intlDayHeader=Ia(this.locale,this.dayHeaderFormat),this._intlDayHeaderAL=Ia(this.locale,this.dayHeaderAriaLabelFormat),this._intlTitle=Cc(this.locale,this.titleFormat),this._bodyEl=St(void 0),this._scrollable=St(!1),this._recheckScrollable=St(!1),this._viewTitle=J_(this),this._viewDates=V_(this),this._view=Y_(this),this._viewComponent=St(void 0),this._filteredEvents=G_(this),this._interaction=St({}),this._iEvents=St([null,null]),this._iClasses=St(po),this._iClass=St(void 0),this._set=(a,o)=>{go(a,this)&&(s[a]&&(o=s[a](o)),this[a].set(o))},this._get=a=>go(a,this)?Ts(this[a]):void 0;for(let a of e)a.createStores?.(this);n.view&&this.view.set(n.view);let i=new Set([...xn(r.views),...xn(n.views??{})]);for(let a of i){let o=Ec(r,r.views[a]??{}),l=Ec(o,n,n.views?.[a]??{}),c=l.component;tg(l,this);for(let f of xn(l)){let{set:h,_set:p=h,...u}=this[f];this[f]={set:gf.includes(f)?m=>{if(Pe(m)){let v=m(o[f]);l[f]=v,h(h===p?v:m)}else l[f]=m,h(m)}:m=>{l[f]=m,h(m)},_set:p,...u}}this.view.subscribe(f=>{if(f===a){this._viewComponent.set(c),Pe(l.viewDidMount)&&$i().then(()=>l.viewDidMount({view:kt(Ts(this._view))}));for(let h of xn(l))this[h]._set(l[h])}})}}}function _o(t,e){let n={...t};for(let r of xn(e))r in n&&(n[r]=e[r](n[r]));if(t.views){n.views={};for(let r of xn(t.views))n.views[r]=_o(t.views[r],e)}return n}function Ec(...t){let e={};for(let n of t){let r={};for(let s of gf)Pe(n[s])&&(r[s]=n[s](e[s]));e={...e,...n,...r}}return e}function tg(t,e){xn(t).filter(n=>!go(n,e)||n==="view").forEach(n=>delete t[n])}function go(t,e){return e.hasOwnProperty(t)&&t[0]!=="_"}var ng=V("<h2></h2>"),rg=V("<button><i></i></button>"),sg=V("<button><i></i></button>"),ig=V("<button> </button>"),ag=V("<button></button>"),og=V("<button> </button>");function Ac(t,e){Ce(e,!1);const n=()=>b(A,"$validRange",u),r=()=>b(C,"$date",u),s=()=>b(x,"$duration",u),i=()=>b(T,"$hiddenDays",u),a=()=>b(_,"$_currentRange",u),o=()=>b(g,"$_viewDates",u),l=()=>b($,"$theme",u),c=()=>b(w,"$_viewTitle",u),f=()=>b(k,"$buttonText",u),h=()=>b(S,"$customButtons",u),p=()=>b(E,"$view",u),[u,m]=Ge();let v=Ae(e,"buttons",8),{_currentRange:_,_viewTitle:w,_viewDates:g,buttonText:k,customButtons:S,date:C,duration:x,hiddenDays:T,theme:$,validRange:A,view:E}=st("state"),D=Pt(vn()),M=er(),P=er(),X=er(),te=er(!1);function Z(){return d(te)}function W(){return o().every(G=>ll(G,n()))}function ne(){Ne(C,mo(r(),s(),i()))}function z(){Ne(C,ho(r(),s()))}qh(()=>(n(),r(),s(),i(),d(X),a(),$i),()=>{if(!Z()){if(K(te,!0),K(M,!1),K(P,!1),n().start){let G=ae(r());Ne(C,mo(r(),s(),i())),K(M,W()),Ne(C,G)}if(n().end){let G=ae(r());Ne(C,ho(r(),s())),K(P,W()),Ne(C,G)}if(K(X,D>=a().start&&D<a().end),!d(X)&&(n().start||n().end)){let G=ae(r());Ne(C,ae(D)),K(X,W()),Ne(C,G)}$i().then(()=>K(te,!1))}}),jh(),qr();var N=xe(),O=de(N);wt(O,1,v,tn,(G,q)=>{var fe=xe(),we=de(fe);{var ue=oe=>{var ve=ng();or(ve,(ge,Le)=>Or?.(ge,Le),c),be(()=>ie(ve,1,(l(),U(()=>l().title)))),I(oe,ve)},Me=oe=>{var ve=xe(),ge=de(ve);{var Le=We=>{var ye=rg(),jt=F(ye);be(()=>{ie(ye,1,`${l(),U(()=>l().button)??""} ec-${d(q)??""}`),Ke(ye,"aria-label",(f(),U(()=>f().prev))),Ke(ye,"title",(f(),U(()=>f().prev))),ye.disabled=d(M),ie(jt,1,`${l(),U(()=>l().icon)??""} ec-${d(q)??""}`)}),Ye("click",ye,ne),I(We,ye)},it=We=>{var ye=xe(),jt=de(ye);{var me=pe=>{var Se=sg(),re=F(Se);be(()=>{ie(Se,1,`${l(),U(()=>l().button)??""} ec-${d(q)??""}`),Ke(Se,"aria-label",(f(),U(()=>f().next))),Ke(Se,"title",(f(),U(()=>f().next))),Se.disabled=d(P),ie(re,1,`${l(),U(()=>l().icon)??""} ec-${d(q)??""}`)}),Ye("click",Se,z),I(pe,Se)},ke=pe=>{var Se=xe(),re=de(Se);{var He=Qe=>{var ft=ig(),Xn=F(ft);be(()=>{ie(ft,1,`${l(),U(()=>l().button)??""} ec-${d(q)??""}`),ft.disabled=d(X),en(Xn,(f(),d(q),U(()=>f()[d(q)])))}),Ye("click",ft,()=>Ne(C,ae(D))),I(Qe,ft)},at=Qe=>{var ft=xe(),Xn=de(ft);{var Vr=rn=>{var yn=ag();Hr(()=>Ye("click",yn,function(...Vn){h()[d(q)].click?.apply(this,Vn)})),or(yn,(Vn,Jr)=>Or?.(Vn,Jr),()=>h()[d(q)].text),be(()=>ie(yn,1,`${l(),U(()=>l().button)??""} ec-${d(q)??""}${h(),d(q),l(),U(()=>h()[d(q)].active?" "+l().active:"")??""}`)),I(rn,yn)},ht=rn=>{var yn=xe(),Vn=de(yn);{var Jr=Yr=>{var hr=og(),ta=F(hr);be(()=>{ie(hr,1,`${l(),U(()=>l().button)??""}${p(),d(q),l(),U(()=>p()===d(q)?" "+l().active:"")??""} ec-${d(q)??""}`),en(ta,(f(),d(q),U(()=>f()[d(q)])))}),Ye("click",hr,()=>Ne(E,d(q))),I(Yr,hr)};$e(Vn,Yr=>{d(q)!=""&&Yr(Jr)},!0)}I(rn,yn)};$e(Xn,rn=>{h(),d(q),U(()=>h()[d(q)])?rn(Vr):rn(ht,!1)},!0)}I(Qe,ft)};$e(re,Qe=>{d(q)=="today"?Qe(He):Qe(at,!1)},!0)}I(pe,Se)};$e(jt,pe=>{d(q)=="next"?pe(me):pe(ke,!1)},!0)}I(We,ye)};$e(ge,We=>{d(q)=="prev"?We(Le):We(it,!1)},!0)}I(oe,ve)};$e(we,oe=>{d(q)=="title"?oe(ue):oe(Me,!1)})}I(G,fe)}),I(t,N),Ee(),m()}var lg=V("<div><!></div>"),cg=V("<div></div>"),ug=V("<nav></nav>");function dg(t,e){Ce(e,!0);const n=()=>b(a,"$headerToolbar",s),r=()=>b(o,"$theme",s),[s,i]=Ge();let{headerToolbar:a,theme:o}=st("state"),l=B(()=>{let f={};for(let h of["start","center","end"])f[h]=n()[h]?.split(" ").map(p=>p.split(","))??[];return f});var c=ug();wt(c,21,()=>xn(d(l)),tn,(f,h)=>{var p=cg();wt(p,21,()=>d(l)[d(h)],tn,(u,m)=>{var v=xe(),_=de(v);{var w=k=>{var S=lg(),C=F(S);Ac(C,{get buttons(){return d(m)}}),be(()=>ie(S,1,r().buttonGroup)),I(k,S)},g=k=>{Ac(k,{get buttons(){return d(m)}})};$e(_,k=>{d(m).length>1?k(w):k(g,!1)})}I(u,v)}),be(()=>ie(p,1,`ec-${d(h)??""}`)),I(f,p)}),be(()=>ie(c,1,r().toolbar)),I(t,c),Ee(),i()}function fg(t,e){Ce(e,!0);const n=()=>b(_,"$_activeRange",h),r=()=>b(u,"$datesSet",h),s=()=>b(T,"$_view",h),i=()=>b(w,"$_filteredEvents",h),a=()=>b(m,"$eventAllUpdated",h),o=()=>b(x,"$_queue",h),l=()=>b(C,"$_recheckScrollable",h),c=()=>b(k,"$_bodyEl",h),f=()=>b(v,"$_auxiliary",h),[h,p]=Ge();let{datesSet:u,eventAllUpdated:m,_auxiliary:v,_activeRange:_,_filteredEvents:w,_scrollable:g,_bodyEl:k,_tasks:S,_recheckScrollable:C,_queue:x,_view:T}=st("state");yt(()=>{n(),U(()=>{Pe(r())&&r()({start:nt(n().start),end:nt(n().end),startStr:mn(n().start),endStr:mn(n().end),view:kt(s())})})}),yt(()=>{i(),U(()=>{Pe(a())&&y_(()=>a()({view:kt(s())}),"eau",S)})}),yt(()=>{o(),U(()=>{g_(o())})}),yt(()=>{l(),U(()=>{c()&&Ne(g,w_(c())),Ne(C,!1)})});var $=xe(),A=de($);wt(A,1,f,tn,(E,D)=>{var M=xe(),P=de(M);Ns(P,()=>d(D),(X,te)=>{te(X,{})}),I(E,M)}),I(t,$),Ee(),p()}var hg=V("<div><!> <!></div> <!>",1);function mg(t,e){Ce(e,!0);const n=()=>b(C,"$_events",u),r=()=>b(k,"$_interaction",u),s=()=>b(T,"$date",u),i=()=>b($,"$duration",u),a=()=>b(A,"$hiddenDays",u),o=()=>b(g,"$_viewComponent",u),l=()=>b(D,"$theme",u),c=()=>b(x,"$_scrollable",u),f=()=>b(S,"$_iClass",u),h=()=>b(E,"$height",u),p=()=>b(M,"$view",u),[u,m]=Ge();let v=Ae(e,"plugins",19,()=>[]),_=Ae(e,"options",19,()=>({})),w=new eg(v(),_());wh("state",w);let{_viewComponent:g,_interaction:k,_iClass:S,_events:C,_scrollable:x,date:T,duration:$,hiddenDays:A,height:E,theme:D,view:M}=w,P={..._()};yt(()=>{for(let[me,ke]of z_(_(),P))U(()=>{X(me,ke)});Nr(P,_())});function X(me,ke){return w._set(me,ke),this}function te(me){let ke=w._get(me);return ke instanceof Date?nt(ke):ke}function Z(){return w._fetchedRange.set({start:void 0,end:void 0}),this}function W(){return n().map(xt)}function ne(me){for(let ke of n())if(ke.id==me)return xt(ke);return null}function z(me){return me=Pi([me])[0],n().push(me),Ne(C,n()),xt(me)}function N(me){let ke=String(me.id),pe=n().findIndex(Se=>Se.id===ke);return pe>=0?(me=Pi([me])[0],lt(C,U(n)[pe]=me,U(n)),xt(me)):null}function O(me){me=String(me);let ke=n().findIndex(pe=>pe.id===me);return ke>=0&&(n().splice(ke,1),Ne(C,n())),this}function G(){return kt(Ts(w._view))}function q(){return r().action?.unselect(),this}function fe(me,ke){let pe=Tr(me,ke);if(pe){let Se=Cs(pe)(me,ke);return Se.date=nt(Se.date),Se}return null}function we(){return Ne(T,ho(s(),i())),this}function ue(){return Ne(T,mo(s(),i(),a())),this}let Me=B(o);var oe={setOption:X,getOption:te,refetchEvents:Z,getEvents:W,getEventById:ne,addEvent:z,updateEvent:N,removeEventById:O,getView:G,unselect:q,dateFromPoint:fe,next:we,prev:ue},ve=hg(),ge=de(ve);let Le;var it=F(ge);dg(it,{});var We=Q(it,2);Ns(We,()=>d(Me),(me,ke)=>{ke(me,{})});var ye=Q(ge,2);fg(ye,{}),be((me,ke)=>{ie(ge,1,`${l().calendar??""} ${l().view??""}${c()?" "+l().withScroll:""}${f()?" "+l()[f()]:""}`),Ke(ge,"role",me),Le=nn(ge,"",Le,ke)},[()=>uf(p())?"list":"table",()=>({height:h()})]),I(t,ve);var jt=Ee(oe);return m(),jt}var pg=V("<div></div>"),vg=V("<article><!></article>");function _g(t,e){Ce(e,!0);const n=()=>b(te,"$resources",_),r=()=>b(x,"$eventBackgroundColor",_),s=()=>b(T,"$eventColor",_),i=()=>b(X,"$eventTextColor",_),a=()=>b(Z,"$theme",_),o=()=>b(D,"$eventClassNames",_),l=()=>b(W,"$_view",_),c=()=>b(C,"$displayEventEnd",_),f=()=>b($,"$eventContent",_),h=()=>b(ne,"$_intlEventTime",_),p=()=>b(E,"$eventDidMount",_),u=()=>b(A,"$eventClick",_),m=()=>b(M,"$eventMouseEnter",_),v=()=>b(P,"$eventMouseLeave",_),[_,w]=Ge();let g=Ae(e,"el",15),k=Ae(e,"classes",3,po),S=Ae(e,"styles",3,po),{displayEventEnd:C,eventBackgroundColor:x,eventColor:T,eventContent:$,eventClick:A,eventDidMount:E,eventClassNames:D,eventMouseEnter:M,eventMouseLeave:P,eventTextColor:X,resources:te,theme:Z,_view:W,_intlEventTime:ne}=st("state"),z=B(()=>e.chunk.event),N=B(()=>e.chunk.event.display),O=B(()=>d(z).backgroundColor??N_(d(z),n())??r()??s()),G=B(()=>d(z).textColor??F_(d(z),n())??i()),q=B(()=>h_(S()({"background-color":d(O),color:d(G)})).map(pe=>`${pe[0]}:${pe[1]}`).concat(d(z).styles).join(";")),fe=B(()=>k()([_n(d(N))?a().bgEvent:a().event,...E_(o(),d(z),l())]).join(" ")),we=B(()=>C_(e.chunk,c(),f(),a(),h(),l())),ue=B(()=>So(d(we),2)),Me=B(()=>d(ue)[0]),oe=B(()=>d(ue)[1]);Fs(()=>{Pe(p())&&p()({event:xt(d(z)),timeText:d(Me),el:g(),view:kt(l())})});function ve(pe,Se){return!Ws(Se)&&Pe(pe)?re=>pe({event:xt(d(z)),el:g(),jsEvent:re,view:kt(l())}):void 0}let ge=B(()=>!_n(d(N))&&ve(u(),d(N))||void 0),Le=B(()=>d(ge)&&c_(d(ge))),it=B(()=>ve(m(),d(N))),We=B(()=>ve(v(),d(N)));var ye=vg();ye.__click=function(...pe){d(ge)?.apply(this,pe)},ye.__keydown=function(...pe){d(Le)?.apply(this,pe)},ye.__pointerdown=function(...pe){e.onpointerdown?.apply(this,pe)};{const pe=Se=>{var re=pg();or(re,(He,at)=>Or?.(He,at),()=>d(oe)),be(()=>ie(re,1,za(a().eventBody))),I(Se,re)};var jt=F(ye);{var me=Se=>{var re=xe(),He=de(re);Pr(He,()=>e.body,()=>pe,()=>d(O),()=>d(G)),I(Se,re)},ke=Se=>{pe(Se)};$e(jt,Se=>{e.body?Se(me):Se(ke,!1)})}Hn(ye,Se=>g(Se),()=>g())}be(()=>{ie(ye,1,za(d(fe))),nn(ye,d(q)),Ke(ye,"role",d(ge)?"button":void 0),Ke(ye,"tabindex",d(ge)?0:void 0)}),Ye("mouseenter",ye,function(...pe){d(it)?.apply(this,pe)}),Ye("mouseleave",ye,function(...pe){d(We)?.apply(this,pe)}),I(t,ye),Ee(),w()}Et(["click","keydown","pointerdown"]);function yf(t,e){Ce(e,!0);const n=()=>b(l,"$_iClasses",s),r=()=>b(o,"$_interaction",s),[s,i]=Ge();let a=Ae(e,"el",15),{_interaction:o,_iClasses:l}=st("state"),c=B(()=>e.chunk.event),f=B(()=>e.chunk.event.display),h=B(()=>v=>n()(v,d(c)));function p(v){return r().action?.draggable(v)?_=>r().action.drag(v,_,e.forceDate?.(),e.forceMargin?.()):r().action?.noAction}let u=B(()=>!_n(d(f))&&!Ws(d(f))?p(d(c)):void 0),m=B(()=>r().resizer);_g(t,{get chunk(){return e.chunk},get classes(){return d(h)},get styles(){return e.styles},get onpointerdown(){return d(u)},get el(){return a()},set el(_){a(_)},body:(_,w=gt)=>{var g=xe(),k=de(g);{var S=x=>{var T=xe(),$=de(T);Ns($,()=>d(m),(A,E)=>{E(A,{get chunk(){return e.chunk},get axis(){return e.axis},get forceDate(){return e.forceDate},get forceMargin(){return e.forceMargin},children:(D,M)=>{var P=xe(),X=de(P);Pr(X,w),I(D,P)},$$slots:{default:!0}})}),I(x,T)},C=x=>{var T=xe(),$=de(T);Pr($,w),I(x,T)};$e(k,x=>{d(m)?x(S):x(C,!1)})}I(_,g)},$$slots:{body:!0}}),Ee(),i()}Et(["pointerdown","click","keydown"]);Et(["pointerdown","click","keydown"]);function bf(t,e,n){return t.startEditable??e??t.editable??n}function gg(t,e,n){return t.durationEditable??e??t.editable??n}let Pa=!1;function yg(t){Pa||(Pa=!0,window.requestAnimationFrame(()=>{t(),Pa=!1}))}function Tc(t,e,n){return kn(e,Fn(n,t))}function bg(t,e){Ce(e,!1);const n=()=>b(ye,"$eventStartEditable",O),r=()=>b(We,"$editable",O),s=()=>b(Jr,"$slotDuration",O),i=()=>b(Xn,"$selectable",O),a=()=>b(kf,"$view",O),o=()=>b(oe,"$_bodyEl",O),l=()=>b(ve,"$datesAboveResources",O),c=()=>b(yn,"$selectLongPressDelay",O),f=()=>b(Se,"$eventLongPressDelay",O),h=()=>b(Qe,"$longPressDelay",O),p=()=>b(Vn,"$selectMinDistance",O),u=()=>b(jt,"$eventDragMinDistance",O),m=()=>b(q,"$_iEvents",O),v=()=>b(re,"$eventResizeStart",O),_=()=>b(me,"$eventDragStart",O),w=()=>b(ft,"$resizeConstraint",O),g=()=>b(rn,"$selectConstraint",O),k=()=>b(Le,"$dragConstraint",O),S=()=>b(it,"$dragScroll",O),C=()=>b(Yr,"$slotHeight",O),x=()=>b(hr,"$slotWidth",O),T=()=>b(wf,"$unselectAuto",O),$=()=>b(Sf,"$unselectCancel",O),A=()=>b(Vr,"$selectFn",O),E=()=>b(He,"$eventResizeStop",O),D=()=>b(ke,"$eventDragStop",O),M=()=>b(ue,"$_view",O),P=()=>b(at,"$eventResize",O),X=()=>b(pe,"$eventDrop",O),te=()=>b(ge,"$dateClick",O),Z=()=>b($f,"$validRange",O),W=()=>b(Me,"$_dayGrid",O),ne=()=>b(we,"$_events",O),z=()=>b(ht,"$selectBackgroundColor",O),N=()=>b(ta,"$unselectFn",O),[O,G]=Ge();let{_iEvents:q,_iClass:fe,_events:we,_view:ue,_dayGrid:Me,_bodyEl:oe,datesAboveResources:ve,dateClick:ge,dragConstraint:Le,dragScroll:it,editable:We,eventStartEditable:ye,eventDragMinDistance:jt,eventDragStart:me,eventDragStop:ke,eventDrop:pe,eventLongPressDelay:Se,eventResizeStart:re,eventResizeStop:He,eventResize:at,longPressDelay:Qe,resizeConstraint:ft,selectable:Xn,select:Vr,selectBackgroundColor:ht,selectConstraint:rn,selectLongPressDelay:yn,selectMinDistance:Vn,slotDuration:Jr,slotHeight:Yr,slotWidth:hr,unselect:ta,unselectAuto:wf,unselectCancel:Sf,validRange:$f,view:kf}=st("state");const cl=1,ul=2,dl=3,fl=4,na=5,Hs=6;let Ve,mr,se,ra,Xt,sa,Mt,pr,ia,aa,mt,ze,sn,Nt,Kr,zs,an,bn,qs,Be,js,Xs,oa,Gr=er(),Qr,Zr,vr;function hl(L){return bf(L,n(),r())}function ml(L,j,De,le){Ve||(Ve=da(j)?cl:Hs,Yn()&&(se=L,la(j),De&&(Xt=De),le&&(Zr=le),qs="dragging",_r(j)))}function pl(L,j,De,le,Vt,rs,ha){Ve||(Ve=da(j)?De?dl:ul:Hs,Yn()&&(se=L,la(j),Vt&&(Xt=Vt),rs&&(Zr=rs),qs=le==="x"?"resizingX":"resizingY",Vs()?(Be=ae(se.end),bn?(fo(Be,se.start),Be>=se.end&&Mr(Be)):(_i(Be,s()),Be<se.start&&(Be=se.start),Xt=se.start)):(Be=ae(se.start),bn?(fo(Be,se.end),Be<=se.start&&!ha&&zn(Be)):(Oe(Be,s()),Be>se.end&&(Be=se.end),Xt=se.end,ha||(Xt=_i(ae(Xt),s()))),ha&&!bn&&(vr=s())),_r(j)))}function vl(L){Ve||(Ve=da(L)?i()&&!uf(a())?fl:na:Hs,Yn()&&(la(L),qs="selecting",js=bn?tt({day:1}):s(),se={allDay:bn,start:Xt,end:Oe(ae(Xt),js),resourceIds:Mt?[Mt.id]:[]},_r(L)))}function _l(){Ve||(Ve=Hs)}function la(L){window.getSelection().removeAllRanges(),ia=mt=L.clientX,aa=ze=L.clientY;let j=Tr(mt,ze);({allDay:bn,date:Xt,resource:Mt}=Cs(j)(mt,ze)),Aa(a())?sn=Kr=o():(sn=vo(j,Mt?4:3),Kr=vo(j,Mt&&(Df()||l())?2:1)),yl(),L.pointerType!=="mouse"&&K(Gr,setTimeout(()=>{Ve&&(mr=!0,_r(L))},(Jn()?c():f())??h()))}function _r(L){if(mr||L&&L.pointerType==="mouse"&&Tf()>=(Jn()?p():u())){mr=!0,ns(L),Ne(fe,qs),m()[0]||(Jn()?Af():Ef(L,ts()?v():_()));let j=ua(Cf());if(j){let De;if({allDay:De,date:sa,resource:pr}=j,De===bn){let le=es({},m()[0]),Vt=w();an=tt((sa-Xt)/1e3),Vs()?(le.start=Oe(ae(se.start),an),le.start>Be&&(le.start=Be,an=tt((Be-se.start)/1e3))):(le.end=Oe(ae(se.end),an),vr&&Oe(le.end,vr),ts()?le.end<Be&&(le.end=Be,an=tt((Be-se.end)/1e3)):Jn()?(le.end<se.end?(le.start=_i(le.end,js),le.end=se.end):le.start=se.start,Vt=g()):(le.start=Oe(ae(se.start),an),Mt&&(le.resourceIds=se.resourceIds.filter(rs=>rs!==Mt.id),le.resourceIds.push(pr.id)),Vt=k()));do{if(Vt!==void 0&&(le=es(Da(se),le),Vt(Jn()?Sl(le,L):$l(le,se,L))===!1)){lt(q,U(m)[0]=es(m()[0],se),U(m));break}lt(q,U(m)[0]=es(m()[0],le),U(m))}while(!1)}}}if(S()){let j=C()*2,De=x();yg(()=>{sn&&(ze<j&&window.scrollBy(0,kn(-10,(ze-j)/3)),ze<Nt.top+j&&(sn.scrollTop+=kn(-10,(ze-Nt.top-j)/3)),ze>window.innerHeight-j&&window.scrollBy(0,Fn(10,(ze-window.innerHeight+j)/3)),ze>Nt.bottom-j&&(sn.scrollTop+=Fn(10,(ze-Nt.bottom+j)/3)),Aa(a())&&(mt<Nt.left+De&&(sn.scrollLeft+=kn(-10,(mt-Nt.left-De)/3)),mt>Nt.right-De&&(sn.scrollLeft+=Fn(10,(mt-Nt.right+De)/3))))})}}function ca(){Yn()&&(yl(),_r())}function xf(L){Yn()&&L.isPrimary&&(mt=L.clientX,ze=L.clientY,_r(L))}function gl(L){if(Xs&&T()&&!($()&&L.target.closest($()))&&ns(L),Ve&&L.isPrimary){if(mr)if(Jn()){if(Xs=!0,Pe(A())){let j=Sl(m()[0],L);A()(j)}}else{se.display=ra;let j=ts()?E():D();Pe(j)&&j({event:xt(se),jsEvent:L,view:kt(M())});let De=Da(se);if(wl(se,m()[0]),bl(),j=ts()?P():X(),Pe(j)){let le=se,Vt=$l(se,De,L);j(Nr(Vt,{revert(){wl(le,De)}}))}}else if((Rf()||Jn())&&Pe(te())&&!oa){mt=L.clientX,ze=L.clientY;let j=Tr(mt,ze);if(j){let{allDay:De,date:le,resource:Vt}=Cs(j)(mt,ze);te()({allDay:De,date:nt(le),dateStr:mn(le),dayEl:j,jsEvent:L,view:kt(M()),resource:Vt})}}mr=!1,Ve=ia=aa=mt=ze=se=ra=Xt=sa=Mt=pr=an=vr=bn=Ne(fe,Be=js=Zr=void 0),sn=Kr=Nt=zs=void 0,d(Gr)&&(clearTimeout(d(Gr)),K(Gr,void 0))}oa=!1}function Cf(){return Tr(Tc(mt,Qr[0],Qr[1]),Tc(ze,Qr[2],Qr[3]))}function ua(L){if(L){let j=Cs(L)(mt,ze);if(j.disabled){if(!Z().end||j.date<Z().end)return ua(L.nextElementSibling);if(!Z().start||j.date>Z().start)return ua(L.previousElementSibling)}else return j}return null}function yl(){Nt=Fr(sn),zs=Fr(Kr),Qr=[kn(0,zs.left+(Aa(a())?1:W()?0:8)),Fn(document.documentElement.clientWidth,zs.left+Kr.clientWidth)-2,kn(0,Nt.top),Fn(document.documentElement.clientHeight,Nt.top+sn.clientHeight)-2]}function Ef(L,j){Pe(j)&&j({event:xt(se),jsEvent:L,view:kt(M())}),ra=se.display,se.display="preview",lt(q,U(m)[0]=Da(se),U(m)),Zr!==void 0&&lt(q,U(m)[0]._margin=Zr,U(m)),vr&&Oe(m()[0].end,vr),se.display="ghost",Ne(we,ne())}function Af(){lt(q,U(m)[0]={id:"{select}",allDay:se.allDay,start:se.start,title:"",display:"preview",extendedProps:{},backgroundColor:z(),resourceIds:se.resourceIds,classNames:[],styles:[]},U(m))}function bl(){lt(q,U(m)[0]=null,U(m))}function es(L,j){return L.start=j.start,L.end=j.end,L.resourceIds=j.resourceIds,L}function wl(L,j){es(L,j),Ne(we,ne())}function Sl(L,j){let{start:De,end:le}=xt(L);return{start:De,end:le,startStr:mn(L.start),endStr:mn(L.end),allDay:bn,view:kt(M()),resource:Mt,jsEvent:j}}function $l(L,j,De){let le;return ts()?le=Vs()?{startDelta:an,endDelta:tt(0)}:{startDelta:tt(0),endDelta:an}:le={delta:an,oldResource:Mt!==pr?Mt:void 0,newResource:Mt!==pr?pr:void 0},Nr(le,{event:xt(L),oldEvent:xt(j),view:kt(M()),jsEvent:De}),le}function Tf(){return Math.sqrt(Math.pow(mt-ia,2)+Math.pow(ze-aa,2))}function Df(){return Ve===cl}function ts(){return Ve===ul||Vs()}function Vs(){return Ve===dl}function Rf(){return Ve===na}function Jn(){return Ve===fl}function Yn(){return Ve&&Ve<na}function da(L){return L.isPrimary&&(L.pointerType!=="mouse"||L.buttons&1)}function ns(L){Xs&&(Xs=!1,bl(),Pe(N())&&N()({jsEvent:L,view:kt(M())}))}function kl(){oa=!0}ue.subscribe(ns);function If(L){if(Yn()){let j=L.target,De=[],le=()=>of(De);De.push(ws(window,"touchmove",__,{passive:!1})),De.push(ws(j,"touchmove",fa(()=>mr))),De.push(ws(j,"touchend",le)),De.push(ws(j,"touchcancel",le))}}function fa(L){return j=>{L()&&j.preventDefault()}}var Pf={draggable:hl,drag:ml,resize:pl,select:vl,noAction:_l,handleScroll:ca,unselect:ns,noClick:kl};qr(),Ye("pointermove",Wt,xf),Ye("pointerup",Wt,gl),Ye("pointercancel",Wt,gl),Ye("scroll",Wt,ca);var Of=B(()=>fa(Yn));Ye("selectstart",Wt,function(...L){d(Of)?.apply(this,L)});var Mf=B(()=>fa(()=>d(Gr)));Ye("contextmenu",Wt,function(...L){d(Mf)?.apply(this,L)}),Ye("touchstart",Wt,If,void 0,!0),On(e,"draggable",hl),On(e,"drag",ml),On(e,"resize",pl),On(e,"select",vl),On(e,"noAction",_l),On(e,"handleScroll",ca),On(e,"unselect",ns),On(e,"noClick",kl);var Nf=Ee(Pf);return G(),Nf}function wg(t,e){Ce(e,!0);const n=()=>b(a,"$_iEvents",s),r=()=>b(o,"$slotDuration",s),[s,i]=Ge();let{_iEvents:a,slotDuration:o}=st("state"),l=0,c=0;yt(()=>{n()[0]&&m()});function f(){let g=Tr(l,c);if(g){let{allDay:k,date:S,resource:C,disabled:x}=Cs(g)(l,c);if(!x){let T=k?2:1;n()[T]||u(T),lt(a,U(n)[T].start=S,U(n)),lt(a,U(n)[T].end=Oe(ae(S),r()),U(n)),lt(a,U(n)[T].resourceIds=C?[C.id]:[],U(n));return}}m()}function h(){f()}function p(g){v(g)&&(l=g.clientX,c=g.clientY,f())}function u(g){lt(a,U(n)[g]={id:"{pointer}",title:"",display:"pointer",extendedProps:{},backgroundColor:"transparent",classNames:[],styles:[]},U(n))}function m(){n()[1]&&lt(a,U(n)[1]=null,U(n)),n()[2]&&lt(a,U(n)[2]=null,U(n))}function v(g){return g.isPrimary&&g.pointerType==="mouse"}var _={handleScroll:h};Ye("pointermove",Wt,p),Ye("scroll",Wt,h);var w=Ee(_);return i(),w}var Sg=V("<div></div>"),$g=V("<div></div>"),kg=V("<!> <!> <!>",1);function xg(t,e){Ce(e,!0);const n=()=>b(p,"$eventDurationEditable",o),r=()=>b(m,"$editable",o),s=()=>b(v,"$_interaction",o),i=()=>b(u,"$eventResizableFromStart",o),a=()=>b(h,"$theme",o),[o,l]=Ge();let c=Ae(e,"forceDate",3,void 0),f=Ae(e,"forceMargin",3,void 0),{theme:h,eventDurationEditable:p,eventResizableFromStart:u,editable:m,_interaction:v}=st("state"),_=B(()=>e.chunk.event),w=B(()=>e.chunk.event.display),g=B(()=>!_n(d(w))&&!Ws(d(w))&&gg(d(_),n(),r()));function k(E){return D=>s().action.resize(d(_),D,E,e.axis,c()?.(),f()?.(),e.chunk.zeroDuration)}var S=kg(),C=de(S);{var x=E=>{var D=Sg(),M=B(()=>k(!0));D.__pointerdown=function(...P){d(M)?.apply(this,P)},be(()=>ie(D,1,`${a().resizer??""} ${a().start??""}`)),I(E,D)};$e(C,E=>{d(g)&&i()&&E(x)})}var T=Q(C,2);Pr(T,()=>e.children);var $=Q(T,2);{var A=E=>{var D=$g(),M=B(()=>k(!1));D.__pointerdown=function(...P){d(M)?.apply(this,P)},be(()=>ie(D,1,a().resizer)),I(E,D)};$e($,E=>{d(g)&&E(A)})}I(t,S),Ee(),l()}Et(["pointerdown"]);var Cg=V("<!> <!>",1);function Eg(t,e){Ce(e,!0);const n=()=>b(v,"$_interaction",l),r=()=>b(f,"$theme",l),s=()=>b(p,"$eventStartEditable",l),i=()=>b(h,"$editable",l),a=()=>b(m,"$_bodyEl",l),o=()=>b(u,"$pointer",l),[l,c]=Ge();let{theme:f,editable:h,eventStartEditable:p,pointer:u,_bodyEl:m,_interaction:v,_iClasses:_}=st("state");lt(v,U(n).resizer=xg,U(n)),yt(()=>{r(),s(),i(),Ne(_,(x,T)=>{let{display:$}=T;return[...x,Ws($)?[r()[$]]:!_n($)&&bf(T,s(),i())?[r().draggable]:[]]})}),yt(()=>{if(a())return ws(a(),"scroll",w)});function w(){for(let x of Object.values(n()))x?.handleScroll?.()}var g=Cg(),k=de(g);Hn(bg(k,{}),x=>lt(v,U(n).action=x,U(n)),()=>n()?.action);var S=Q(k,2);{var C=x=>{Hn(wg(x,{}),T=>lt(v,U(n).pointer=T,U(n)),()=>n()?.pointer)};$e(S,x=>{o()&&x(C)})}I(t,g),Ee(),c()}const Ag={createOptions(t){t.dateClick=void 0,t.dragConstraint=void 0,t.dragScroll=!0,t.editable=!1,t.eventDragMinDistance=5,t.eventDragStart=void 0,t.eventDragStop=void 0,t.eventDrop=void 0,t.eventDurationEditable=!0,t.eventLongPressDelay=void 0,t.eventResizableFromStart=!1,t.eventResizeStart=void 0,t.eventResizeStop=void 0,t.eventResize=void 0,t.eventStartEditable=!0,t.longPressDelay=1e3,t.pointer=!1,t.resizeConstraint=void 0,t.select=void 0,t.selectBackgroundColor=void 0,t.selectConstraint=void 0,t.selectLongPressDelay=void 0,t.selectMinDistance=5,t.unselect=void 0,t.unselectAuto=!0,t.unselectCancel="",t.theme.draggable="ec-draggable",t.theme.ghost="ec-ghost",t.theme.preview="ec-preview",t.theme.pointer="ec-pointer",t.theme.resizer="ec-resizer",t.theme.start="ec-start",t.theme.dragging="ec-dragging",t.theme.resizingY="ec-resizing-y",t.theme.resizingX="ec-resizing-x",t.theme.selecting="ec-selecting"},createStores(t){t._auxiliary.update(e=>[...e,Eg])}};Et(["pointerdown"]);Et(["click"]);function Tg(t){return Ot([t.slotDuration,t.slotLabelInterval,t._slotTimeLimits,t._intlSlotLabel],e=>B_(Pt(vn()),...e))}function Dg(t){return Ot([t.slotMinTime,t.slotMaxTime,t.flexibleSlotTimeLimits,t._viewDates,t._filteredEvents],e=>U_(...e))}function Rg(t,e){if(!t.length)return;df(t,e);let n={columns:[],end:t[0].end};for(let r of t){let s=0;if(r.start<n.end){for(;s<n.columns.length&&!(n.columns[s].at(-1).end<=r.start);++s);r.end>n.end&&(n.end=r.end)}else n={columns:[],end:r.end};n.columns.length<s+1&&n.columns.push([]),n.columns[s].push(r),r.group=n,r.column=s}}function Ig(t){let e="all-day",n;return t?(n=Pe(t)?t({text:e}):t,typeof n=="string"&&(n={html:n})):n={html:e},n}var Pg=V("<time></time>"),Og=V('<div><div></div> <!></div> <div role="row"><div><!></div> <!></div>',1);function yo(t,e){Ce(e,!0);const n=()=>b(l,"$allDayContent",a),r=()=>b(c,"$slotLabelInterval",a),s=()=>b(f,"$theme",a),i=()=>b(h,"$_times",a),[a,o]=Ge();let{allDayContent:l,slotLabelInterval:c,theme:f,_times:h}=st("state"),p=B(()=>Ig(n())),u=B(()=>r()&&r().seconds<=0);var m=Og(),v=de(m),_=F(v);or(_,($,A)=>Or?.($,A),()=>d(p));var w=Q(_,2);wt(w,1,i,tn,($,A,E)=>{var D=Pg();or(D,(M,P)=>Or?.(M,P),()=>d(A)[1]),be(()=>{ie(D,1,`${s().time??""}${(E||d(u))&&d(A)[2]?"":" "+s().minor}`),Ke(D,"datetime",d(A)[0])}),I($,D)});var g=Q(v,2),k=F(g),S=F(k);{var C=$=>{var A=xe(),E=de(A);Pr(E,()=>e.lines),I($,A)};$e(S,$=>{e.lines&&$(C)})}var x=Q(k,2);{var T=$=>{var A=xe(),E=de(A);Pr(E,()=>e.children),I($,A)};$e(x,$=>{e.children&&$(T)})}be(()=>{ie(v,1,s().sidebar),ie(_,1,s().sidebarTitle),ie(g,1,s().days),ie(k,1,s().lines)}),I(t,m),Ee(),o()}var Mg=V("<div></div>"),Ng=V("<div><div><!></div></div>");function Fg(t,e){Ce(e,!0);const n=()=>b(p,"$_viewDates",c),r=()=>b(_,"$scrollTime",c),s=()=>b(u,"$_slotTimeLimits",c),i=()=>b(w,"$slotDuration",c),a=()=>b(g,"$slotHeight",c),o=()=>b(k,"$theme",c),l=()=>b(m,"$_times",c),[c,f]=Ge();let{_bodyEl:h,_viewDates:p,_slotTimeLimits:u,_times:m,_recheckScrollable:v,scrollTime:_,slotDuration:w,slotHeight:g,theme:k}=st("state"),S=Te(void 0);yt(()=>{Ne(h,d(S))}),yt(()=>{n(),r(),U(C)});function C(){d(S).scrollTop=((r().seconds-s().min.seconds)/i().seconds-.5)*a()}var x=Ng(),T=F(x),$=F(T);yo($,{get children(){return e.children},lines:E=>{var D=xe(),M=de(D);wt(M,1,l,tn,(P,X)=>{var te=Mg();be(()=>ie(te,1,`${o().line??""}${d(X)[2]?"":" "+o().minor}`)),I(P,te)}),I(E,D)},$$slots:{lines:!0}}),Hn(x,A=>K(S,A),()=>d(S)),or(x,(A,E)=>u_?.(A,E),()=>()=>Ne(v,!0)),be(()=>{ie(x,1,o().body),ie(T,1,o().content)}),I(t,x),Ee(),f()}function ii(t,e){Ce(e,!0);const n=()=>b(c,"$slotDuration",a),r=()=>b(h,"$_slotTimeLimits",a),s=()=>b(f,"$slotHeight",a),i=()=>b(l,"$slotEventOverlap",a),[a,o]=Ge();let{slotEventOverlap:l,slotDuration:c,slotHeight:f,_slotTimeLimits:h}=st("state"),p=B(()=>e.chunk.event.display),u=B(()=>m=>{let v=n().seconds,_=r().min.seconds,w=(e.chunk.start-e.date)/1e3,g=(e.chunk.end-e.date)/1e3,k=(w-_)/v*s(),S=(g-w)/v*s()||s(),C=(r().max.seconds-w)/v*s();return m.top=`${k}px`,m["min-height"]=`${S}px`,m.height=`${S}px`,m["max-height"]=`${C}px`,(!_n(d(p))&&!Ws(d(p))||mf(d(p)))&&(m["z-index"]=`${e.chunk.column+1}`,m.left=`${100/e.chunk.group.columns.length*e.chunk.column}%`,m.width=`${100/e.chunk.group.columns.length*(i()?.5*(1+e.chunk.group.columns.length-e.chunk.column):1)}%`),m});yf(t,{get chunk(){return e.chunk},get styles(){return d(u)},axis:"y"}),Ee(),o()}var Lg=V("<div></div>");function Bg(t,e){Ce(e,!0);const n=()=>b(u,"$_now",l),r=()=>b(m,"$_today",l),s=()=>b(f,"$slotDuration",l),i=()=>b(v,"$_slotTimeLimits",l),a=()=>b(h,"$slotHeight",l),o=()=>b(p,"$theme",l),[l,c]=Ge();let{slotDuration:f,slotHeight:h,theme:p,_now:u,_today:m,_slotTimeLimits:v}=st("state"),_=B(()=>(n()-r())/1e3),w=B(()=>{let k=s().seconds,S=i().min.seconds;return(d(_)-S)/k*a()});var g=Lg();be(()=>{ie(g,1,o().nowIndicator),nn(g,`top:${d(w)??""}px`)}),I(t,g),Ee(),c()}var Ug=V("<!> <!> <!>",1),Wg=V('<div role="cell"><div><!></div> <div><!></div> <div><!></div></div>');function Hg(t,e){Ce(e,!0);const n=()=>b(te,"$_today",_),r=()=>b(C,"$highlightedDates",_),s=()=>b(P,"$validRange",_),i=()=>b(Z,"$_slotTimeLimits",_),a=()=>b(A,"$filterEventsWithResources",_),o=()=>b(M,"$resources",_),l=()=>b(k,"$_filteredEvents",_),c=()=>b(E,"$eventOrder",_),f=()=>b(S,"$_iEvents",_),h=()=>b(T,"$slotDuration",_),p=()=>b($,"$slotHeight",_),u=()=>b(D,"$theme",_),m=()=>b(X,"$_interaction",_),v=()=>b(x,"$nowIndicator",_),[_,w]=Ge();let g=Ae(e,"resource",3,void 0),{_filteredEvents:k,_iEvents:S,highlightedDates:C,nowIndicator:x,slotDuration:T,slotHeight:$,filterEventsWithResources:A,eventOrder:E,theme:D,resources:M,validRange:P,_interaction:X,_today:te,_slotTimeLimits:Z}=st("state"),W=Te(void 0),ne=B(()=>Ht(e.date,n())),z=B(()=>r().some(re=>Ht(re,e.date))),N=B(()=>ll(e.date,s())),O=B(()=>Oe(ae(e.date),i().min)),G=B(()=>Oe(ae(e.date),i().max)),q=B(()=>g()??(a()?o():void 0)),fe=B(()=>{if(d(N))return[[],[]];let re=[],He=[];for(let at of l())if((!at.allDay||_n(at.display))&&Mi(at,d(O),d(G),d(q))){let Qe=Oi(at,d(O),d(G));switch(at.display){case"background":He.push(Qe);break;default:re.push(Qe)}}return Rg(re,c()),[re,He]}),we=B(()=>So(d(fe),2)),ue=B(()=>d(we)[0]),Me=B(()=>d(we)[1]),oe=B(()=>d(N)?[]:f().map(re=>re&&Mi(re,d(O),d(G),g())?Oi(re,d(O),d(G)):null));function ve(re,He){return He-=Fr(d(W)).top,{allDay:!1,date:Oe(Oe(ae(e.date),i().min),h(),m_(He/p())),resource:g(),dayEl:d(W),disabled:d(N)}}Fs(()=>{ol(d(W),ve)});var ge=Wg();ge.__pointerdown=function(...re){(d(N)?void 0:m().action?.select)?.apply(this,re)};var Le=F(ge),it=F(Le);{var We=re=>{var He=xe(),at=de(He);wt(at,17,()=>d(Me),Qe=>Qe.event,(Qe,ft)=>{ii(Qe,{get date(){return e.date},get chunk(){return d(ft)}})}),I(re,He)};$e(it,re=>{d(N)||re(We)})}var ye=Q(Le,2),jt=F(ye);{var me=re=>{var He=Ug(),at=de(He);{var Qe=ht=>{ii(ht,{get date(){return e.date},get chunk(){return d(oe)[1]}})};$e(at,ht=>{d(oe)[1]&&ht(Qe)})}var ft=Q(at,2);wt(ft,17,()=>d(ue),ht=>ht.event,(ht,rn)=>{ii(ht,{get date(){return e.date},get chunk(){return d(rn)}})});var Xn=Q(ft,2);{var Vr=ht=>{ii(ht,{get date(){return e.date},get chunk(){return d(oe)[0]}})};$e(Xn,ht=>{d(oe)[0]&&!d(oe)[0].event.allDay&&ht(Vr)})}I(re,He)};$e(jt,re=>{d(N)||re(me)})}var ke=Q(ye,2),pe=F(ke);{var Se=re=>{Bg(re,{})};$e(pe,re=>{v()&&d(ne)&&!d(N)&&re(Se)})}Hn(ge,re=>K(W,re),()=>d(W)),be(re=>{ie(ge,1,`${u().day??""} ${re??""}${d(ne)?" "+u().today:""}${d(z)?" "+u().highlight:""}${d(N)?" "+u().disabled:""}`),ie(Le,1,u().bgEvents),ie(ye,1,u().events),ie(ke,1,u().extra)},[()=>u().weekdays?.[e.date.getUTCDay()]]),I(t,ge),Ee(),w()}Et(["pointerdown"]);function Oa(t,e){Ce(e,!0);let n=Ae(e,"longChunks",19,()=>({})),r=Te(void 0),s=Te(1),i=B(()=>e.chunk.event),a=B(()=>e.chunk.event.display),o=B(()=>f=>(_n(d(a))?f.width=`calc(${e.chunk.days*100}% + ${e.chunk.days-1}px)`:(f.width=`calc(${e.chunk.days*100}% + ${(e.chunk.days-1)*7}px)`,f["margin-top"]=`${d(i)._margin??d(s)}px`),f));function l(){d(r)&&K(s,A_(e.chunk,n(),S_(d(r))),!0)}var c={reposition:l};return yf(t,{get chunk(){return e.chunk},get styles(){return d(o)},axis:"x",forceMargin:()=>Fr(d(r)).top-Fr(vo(d(r),1)).top,get el(){return d(r)},set el(f){K(r,f,!0)}}),Ee(c)}var zg=V("<div><!></div>"),qg=V('<div role="cell"><div><!></div> <!> <div><!></div></div>');function jg(t,e){Ce(e,!0);const n=()=>b(v,"$_today",o),r=()=>b(h,"$highlightedDates",o),s=()=>b(u,"$validRange",o),i=()=>b(p,"$theme",o),a=()=>b(m,"$_interaction",o),[o,l]=Ge();let c=Ae(e,"iChunks",19,()=>[]),f=Ae(e,"resource",3,void 0),{highlightedDates:h,theme:p,validRange:u,_interaction:m,_today:v}=st("state"),_=Te(void 0),w=[],g=B(()=>e.chunks.filter(z=>Ht(z.date,e.date))),k=B(()=>e.bgChunks.filter(z=>Ht(z.date,e.date))),S=B(()=>Ht(e.date,n())),C=B(()=>r().some(z=>Ht(z,e.date))),x=B(()=>ll(e.date,s()));Fs(()=>{ol(d(_),()=>({allDay:!0,date:e.date,resource:f(),dayEl:d(_),disabled:d(x)}))});function T(){d(x)||hf(w,d(g))}var $={reposition:T},A=qg();A.__pointerdown=function(...z){(d(x)?void 0:a().action?.select)?.apply(this,z)};var E=F(A),D=F(E);{var M=z=>{var N=xe(),O=de(N);wt(O,17,()=>d(k),G=>G.event,(G,q)=>{Oa(G,{get chunk(){return d(q)}})}),I(z,N)};$e(D,z=>{d(x)||z(M)})}var P=Q(E,2);{var X=z=>{var N=zg(),O=F(N);Oa(O,{get chunk(){return c()[0]}}),be(()=>ie(N,1,`${i().events??""} ${i().preview??""}`)),I(z,N)};$e(P,z=>{c()[0]&&Ht(c()[0].date,e.date)&&!d(x)&&z(X)})}var te=Q(P,2),Z=F(te);{var W=z=>{var N=xe(),O=de(N);wt(O,19,()=>d(g),G=>G.event,(G,q,fe)=>{Hn(Oa(G,{get chunk(){return d(q)},get longChunks(){return e.longChunks}}),(we,ue)=>w[ue]=we,we=>w?.[we],()=>[d(fe)])}),I(z,N)};$e(Z,z=>{d(x)||z(W)})}Hn(A,z=>K(_,z),()=>d(_)),be(z=>{ie(A,1,`${i().day??""} ${z??""}${d(S)?" "+i().today:""}${d(C)?" "+i().highlight:""}${d(x)?" "+i().disabled:""}`),ie(E,1,i().bgEvents),ie(te,1,i().events)},[()=>i().weekdays?.[e.date.getUTCDay()]]),I(t,A);var ne=Ee($);return l(),ne}Et(["pointerdown"]);function Xg(t,e){Ce(e,!0);const n=()=>b(g,"$validRange",c),r=()=>b(w,"$filterEventsWithResources",c),s=()=>b(_,"$resources",c),i=()=>b(p,"$_filteredEvents",c),a=()=>b(v,"$hiddenDays",c),o=()=>b(m,"$eventOrder",c),l=()=>b(u,"$_iEvents",c),[c,f]=Ge();let h=Ae(e,"resource",3,void 0),{_filteredEvents:p,_iEvents:u,eventOrder:m,hiddenDays:v,resources:_,filterEventsWithResources:w,validRange:g}=st("state"),k=[],S=B(()=>xc(e.dates[0],n())),C=B(()=>zn(ae(xc(e.dates.at(-1),n())))),x=B(()=>h()??(r()?s():void 0)),T=B(()=>{let Z=[],W=[];for(let z of i())if(z.allDay&&Mi(z,d(S),d(C),d(x))){let N=Oi(z,d(S),d(C));_n(z.display)?W.push(N):Z.push(N)}Ra(W,a(),o());let ne=Ra(Z,a(),o());return[Z,W,ne]}),$=B(()=>So(d(T),3)),A=B(()=>d($)[0]),E=B(()=>d($)[1]),D=B(()=>d($)[2]);function M(){hf(k,e.dates)}yt(()=>{d(A),U(M)});let P=B(()=>l().map(Z=>{let W;return Z&&Z.allDay&&Mi(Z,d(S),d(C),h())?(W=Oi(Z,d(S),d(C)),Ra([W],a(),o())):W=null,W}));var X=xe();Ye("resize",Wt,M);var te=de(X);wt(te,17,()=>e.dates,tn,(Z,W,ne)=>{Hn(jg(Z,{get date(){return d(W)},get chunks(){return d(A)},get bgChunks(){return d(E)},get longChunks(){return d(D)},get iChunks(){return d(P)},get resource(){return h()}}),(z,N)=>k[N]=z,z=>k?.[z],()=>[ne])}),I(t,X),Ee(),f()}var Vg=V('<div role="columnheader"><time></time></div>'),Jg=V("<div><div><!> <div></div></div></div>"),Yg=V("<div><!> <div></div></div> <!> <!>",1);function Dc(t,e){Ce(e,!1);const n=()=>b(v,"$theme",l),r=()=>b(f,"$_viewDates",l),s=()=>b(u,"$_today",l),i=()=>b(p,"$_intlDayHeaderAL",l),a=()=>b(h,"$_intlDayHeader",l),o=()=>b(m,"$allDaySlot",l),[l,c]=Ge();let{_viewDates:f,_intlDayHeader:h,_intlDayHeaderAL:p,_today:u,allDaySlot:m,theme:v}=st("state");qr();var _=Yg(),w=de(_),g=F(w);yo(g,{children:(T,$)=>{var A=xe(),E=de(A);wt(E,1,r,tn,(D,M)=>{var P=Vg(),X=F(P);or(X,(te,Z)=>Or?.(te,Z),()=>a().format(d(M))),be((te,Z,W,ne)=>{ie(P,1,`${n().day??""} ${te??""}${Z??""}`),Ke(X,"datetime",W),Ke(X,"aria-label",ne)},[()=>n().weekdays?.[d(M).getUTCDay()],()=>Ht(d(M),s())?" "+n().today:"",()=>mn(d(M),10),()=>i().format(d(M))]),I(D,P)}),I(T,A)},$$slots:{default:!0}});var k=Q(g,2),S=Q(w,2);{var C=T=>{var $=Jg(),A=F($),E=F(A);yo(E,{children:(M,P)=>{Xg(M,{get dates(){return r()}})},$$slots:{default:!0}});var D=Q(E,2);be(()=>{ie($,1,n().allDay),ie(A,1,n().content),ie(D,1,n().hiddenScroll)}),I(T,$)};$e(S,T=>{o()&&T(C)})}var x=Q(S,2);Fg(x,{children:(T,$)=>{var A=xe(),E=de(A);wt(E,1,r,tn,(D,M)=>{Hg(D,{get date(){return d(M)}})}),I(T,A)},$$slots:{default:!0}}),be(()=>{ie(w,1,n().header),ie(k,1,n().hiddenScroll)}),I(t,_),Ee(),c()}const Kg={createOptions(t){t.buttonText.timeGridDay="day",t.buttonText.timeGridWeek="week",t.view="timeGridWeek",t.views.timeGridDay={buttonText:R_,component:Dc,dayHeaderFormat:{weekday:"long"},duration:{days:1},theme:kc("ec-time-grid ec-day-view"),titleFormat:{year:"numeric",month:"long",day:"numeric"}},t.views.timeGridWeek={buttonText:I_,component:Dc,duration:{weeks:1},theme:kc("ec-time-grid ec-week-view")}},createStores(t){t._slotTimeLimits=Dg(t),t._times=Tg(t)}};Et(["click"]);Et(["pointerdown"]);var Gg=V('<div class="centered svelte-13b4evp"><h1>fetching your assignments... <br/> </h1></div>'),Qg=V('<div class="centered svelte-13b4evp"><h1>reading your assignments... <br/> </h1></div>'),Zg=V('<div class="assignment svelte-13b4evp"><div class="assignment-details"> </div> <div class="assignment-hours"><input type="number" min="0" step="0.1" class="svelte-13b4evp"/> hours</div></div>'),ey=V(`<div class="assignment-grouping svelte-13b4evp"><div class="assignment-overview svelte-13b4evp"><div class="assignment-overview-header svelte-13b4evp">this week's to-dos</div> <div class="assignments-list svelte-13b4evp"></div></div> <!></div>`),ty=V('<div class="calendar-container svelte-13b4evp"><!> <!></div>'),ny=V('<div class="plan-page-container svelte-13b4evp"><header class="svelte-13b4evp"><!></header> <div class="content svelte-13b4evp"><!></div></div>');function ry(t,e){Ce(e,!0);const n="AIzaSyBnfBzGkZ0KgWXO7Pq7O4RhCNozHNk4dNM";let r=[{course:"CSE 331",title:"Concept Check 12",dueDate:ls(new Date,2),description:"This is a quick concept check to assess your understanding of recent lecture content. You can expect it to take just a few minutes"},{course:"CSE 331",title:"At Home Worksheet 4",dueDate:ls(new Date,4),description:"This is an at-home worksheet focusing on induction proofs. Complete the problems and submit your answers via Gradescope. There are 5 problems with multiple parts."},{course:"CSE 351",title:"Lab 2 - disassembling and defusing a binary bomb",dueDate:ls(new Date,7),description:"This is your second lab assignment where you'll be disassembling a binary bomb using GDB and defusing it by providing correct inputs to each phase. There are five phases, one extra credit phase, and a secret phase. You can expect this to take several hours, so start early!"},{course:"CSE 390R",title:"Read a paper",dueDate:ls(new Date,3),description:"Find a research paper related to your project topic, read it (you can skim), and then answer a few questions regarding it. Be prepared to talk about the paper in class."},{course:"EDUC 251",title:"Complete readings",dueDate:ls(new Date,1),description:"Finish reading chapters 5 and 6 from 'Educational Psychology' and take notes on key concepts discussed in these chapters."}],s=Gt([]),i=Te(0),a=B(()=>s.slice().sort(($,A)=>$.assignment.dueDate.getTime()-A.assignment.dueDate.getTime())),o=Te(!1),l=null,c=[],f=Te(!1);const h=async()=>{let $=new ce({apiKey:"mcr-0Ri0vxCbvqK8FH6jDl",baseURL:"https://neuro.mancer.tech/oai/v1",dangerouslyAllowBrowser:!0});const A='You are an assistant that helps students plan their study schedules. Given a list of assignments with their course names, titles, due dates, and descriptions, estimate the number of hours a student would typically need to complete each assignment. After considering the complexity and workload, provide your estimate as a float prefixed by "HOURS_NEEDED:". Ensure the number is realistic and do not provide a ranged estimate. You should put your estimate at the end of your response. Here is one assignment:';for(let E of r){let D=null;for(;!D;){const M=await $.chat.completions.create({model:"lumi-8b-v2",max_tokens:1e3,messages:[{role:"system",content:`${A}`},{role:"user",content:`Course: ${E.course}
    Title: ${E.title}
    Description: ${E.description}`}]});if(console.log(M.choices[0].message.content),M.choices[0].message.content&&(D=M.choices[0].message.content.match(/HOURS_NEEDED:\s*(\d+\.*\d*)/),D)){const P=parseFloat(D[1]);s.push({assignment:E,hoursNeeded:P})}}}};Fs(()=>{(!(Fe.canvasConnected||Fe.edstemConnected||Fe.gradescopeConnected||Fe.demoMode)||Fe.gapiToken.length===0)&&(location.hash="#connect");let $=setInterval(()=>{if(K(i,d(i)+Math.min(Math.floor(Math.random()*r.length/2),r.length-d(i))),d(i)===r.length){if(clearInterval($),s.length===r.length)return;h()}},400)});const p=$=>{const A=new Date,E=[];console.log("Generating work blocks for assignments:",d(a));const D=9,M=21,P=15,X=(N,O)=>{const G=new Date(N);G.setHours(D,0,0,0);const q=new Date(N);return q.setHours(M,0,0,0),N.toDateString()!==O.toDateString()||N<G||O>q||O<=N?!0:[...$,...E].some(fe=>{const we=new Date(fe.start),ue=new Date(fe.end);return we<O&&ue>N})},te=(N,O)=>{let G=0,q=new Date(N);const fe=new Date(N);fe.setHours(M,0,0,0);for(let we=0;we<O;we++){const ue=new Date(q);if(ue.setMinutes(ue.getMinutes()+P),ue>fe||X(q,ue))break;G++,q=ue}return G},Z=new Map(d(a).map(N=>[N.assignment.title,Math.ceil(N.hoursNeeded*60/P)]));let W=new Date(A);W.setSeconds(0,0);{const N=W.getMinutes(),O=N%P===0?P:P-N%P;W.setMinutes(N+O)}console.log("Starting search from (next 15-min slot):",W);const ne=7,z=new Date(W);for(z.setDate(z.getDate()+ne);W<z&&Array.from(Z.values()).some(N=>N>0);){if(W.getHours()<D)W.setHours(D,0,0,0);else if(W.getHours()>=M){W.setDate(W.getDate()+1),W.setHours(D,0,0,0);continue}const N=new Date(W);if(N.setMinutes(N.getMinutes()+P),X(W,N)){W=N;continue}let O=null,G=0;const q=[];for(const fe of d(a)){const we=Math.ceil(fe.hoursNeeded*60/P),ue=Z.get(fe.assignment.title)??we;if(ue===0)continue;const Me=Math.ceil(we/3),oe=te(W,ue);if(oe<Me)continue;const ve=fe.assignment.dueDate instanceof Date?fe.assignment.dueDate.getTime()-W.getTime():Number.POSITIVE_INFINITY,ge=ve>0&&ve<=1440*60*1e3;q.push({planItem:fe,availableSlots:oe,minSlots:Me,slotsRemaining:ue,dueInMs:ve,urgent:ge})}if(q.length>0){const fe=q.filter(oe=>oe.urgent),we=fe.length>0?fe:q,ue=we.map(oe=>{const ve=oe.dueInMs===Number.POSITIVE_INFINITY?Number.POSITIVE_INFINITY:oe.dueInMs/36e5,ge=isFinite(ve)?ve<=0?1:Math.max(0,(24-ve)/24):0,Le=oe.availableSlots*(1+ge*3);return{...oe,priorityScore:Le,dueHours:ve}});ue.sort((oe,ve)=>ve.priorityScore!==oe.priorityScore?ve.priorityScore-oe.priorityScore:oe.dueHours!==ve.dueHours?oe.dueHours-ve.dueHours:ve.slotsRemaining-oe.slotsRemaining),O=ue[0].planItem,G=ue[0].availableSlots,console.log(`${we===fe?"Urgent pool":"Normal pool"}: chose ${O.assignment.title} | score=${ue[0].priorityScore.toFixed(2)} | availSlots=${ue[0].availableSlots} | dueIn=${isFinite(ue[0].dueHours)?ue[0].dueHours.toFixed(1)+"h":"n/a"}`)}if(O&&G>0){const fe=new Date(W),we=new Date(fe);we.setHours(M,0,0,0);const ue=Math.max(0,Math.floor((we.getTime()-fe.getTime())/(1e3*60*P)));let Me=Math.min(G,ue);Me<G&&console.log(`Clamped block for ${O.assignment.title} from ${G} slots to ${Me} slots (workday end)`);const oe=Math.ceil(O.hoursNeeded*60/P),ve=Math.ceil(oe/3);if(Me<ve){const ye=new Date(W);ye.setMinutes(ye.getMinutes()+P),W=ye;continue}const ge=new Date(fe);ge.setMinutes(ge.getMinutes()+Me*P);const Le=v(`Work on: ${O.assignment.title}`,fe);E.push({id:Le,title:`Work on: ${O.assignment.title}`,start:new Date(fe),end:new Date(ge),backgroundColor:"#3653c4",editable:!0,extendedProps:{isWorkBlock:!0,blockKey:Le}});const it=Z.get(O.assignment.title)??oe,We=Math.max(0,it-Me);Z.set(O.assignment.title,We),console.log(`Scheduled ${Me*P}min block for ${O.assignment.title} at ${fe} to ${ge} (${We} slots remaining)`),W=ge}else W=N}for(const[N,O]of Z.entries())if(O>0){const q=(O*P/60).toFixed(2);console.warn(`Warning: Could not schedule ${O} slots (~${q}h) for ${N}`)}return console.log("Final scheduled blocks:",E),E};let u=Gt({view:"timeGridWeek",height:"100%",headerToolbar:{start:"title",center:"",end:""},editable:!1,allDaySlot:!1,firstDay:new Date().getDay(),eventDrop:$=>{const A=$?.event??$,E=A.id||A?.extendedProps?.blockKey;if(!E)return;const D=new Date(A.start),M=new Date(A.end),P=c.findIndex(X=>X.id===E||X.extendedProps?.blockKey===E||v(X.title,X.start)===E);P!==-1&&(c[P].start=D,c[P].end=M,console.log("Updated work block after drop:",E,D,M))},eventResize:$=>{const A=$?.event??$,E=A.id||A?.extendedProps?.blockKey;if(!E)return;const D=new Date(A.start),M=new Date(A.end),P=c.findIndex(X=>X.id===E||X.extendedProps?.blockKey===E||v(X.title,X.start)===E);P!==-1&&(c[P].start=D,c[P].end=M,console.log("Updated work block after resize:",E,D,M))},eventSources:[{events:async($,A,E)=>{try{let P=(await(await fetch(`https://www.googleapis.com/calendar/v3/users/me/calendarList?key=${n}`,{headers:{Authorization:`Bearer ${Fe.gapiToken}`}})).json()).items.find(ne=>ne.primary);P&&!l&&(l=P.id);let Z=(await(await fetch(`https://www.googleapis.com/calendar/v3/calendars/${P.id}/events?timeMin=${$.start.toISOString()}&timeMax=${$.end.toISOString()}&singleEvents=true&orderBy=startTime&key=${n}`,{headers:{Authorization:`Bearer ${Fe.gapiToken}`}})).json()).items.map(ne=>{const z=ne.start.dateTime||ne.start.date,N=ne.end.dateTime||ne.end.date,O=new Date(z),G=new Date(N);return{title:ne.summary,start:O,end:G,editable:!1,startEditable:!1,durationEditable:!1,backgroundColor:"#444"}});const W=p(Z);c=W,A([...Z,...W])}catch(D){E(D)}}}],loading:$=>{console.log("Calendar loading:",$)},events:[]});const m=async()=>{if(l)return l;const E=(await(await fetch(`https://www.googleapis.com/calendar/v3/users/me/calendarList?key=${n}`,{headers:{Authorization:`Bearer ${Fe.gapiToken}`}})).json()).items?.find(D=>D.primary);if(!E)throw new Error("Primary calendar not found");return l=E.id,l},v=($,A)=>{const E=Math.floor(A.getTime()/1e3),D=$.toLowerCase().replace(/[^a-z0-9-_]+/g,"-").slice(0,64).replace(/^-+|-+$/g,"")||"block";return`wao-${E}-${D}`.slice(0,128)},_=async()=>{if(!d(f))try{K(f,!0);const $=await m(),A=Intl.DateTimeFormat().resolvedOptions().timeZone;for(const E of c){const D=E.start instanceof Date?E.start:new Date(E.start),M=E.end instanceof Date?E.end:new Date(E.end),P=E?.extendedProps?.blockKey||E?.id||v(E.title,D),X=`https://www.googleapis.com/calendar/v3/calendars/${encodeURIComponent($)}/events?privateExtendedProperty=${encodeURIComponent("blockKey="+P)}&maxResults=1&key=${n}`,te=await fetch(X,{headers:{Authorization:`Bearer ${Fe.gapiToken}`}});if(te.ok){const ne=await te.json();if(Array.isArray(ne.items)&&ne.items.length>0){console.log("Event already exists by blockKey (skipping):",P);continue}}const Z={summary:E.title,start:{dateTime:D.toISOString(),timeZone:A},end:{dateTime:M.toISOString(),timeZone:A},description:"Planned by WorkAtOnce",extendedProperties:{private:{source:"workatonce",blockKey:P}}},W=await fetch(`https://www.googleapis.com/calendar/v3/calendars/${encodeURIComponent($)}/events?key=${n}`,{method:"POST",headers:{Authorization:`Bearer ${Fe.gapiToken}`,"Content-Type":"application/json"},body:JSON.stringify(Z)});if(W.ok)console.log("Inserted event:",P,D,M);else if(W.status!==409){const ne=await W.text();console.error("Failed to insert event",P,W.status,ne)}else console.log("Event already exists (skipping):",P)}location.hash="#done"}catch($){console.error("Finalize plan failed:",$),alert("Failed to finalize plan. Please try again.")}finally{K(f,!1)}};var w=ny(),g=F(w),k=F(g);qi(k);var S=Q(g,2),C=F(S);{var x=$=>{var A=Gg(),E=F(A),D=Q(F(E),2);be(()=>en(D,`(${d(i)??""} fetched)`)),I($,A)},T=$=>{var A=xe(),E=de(A);{var D=P=>{var X=Qg(),te=F(X),Z=Q(F(te),2);be(()=>en(Z,`(${s.length??""}/${r.length??""})`)),I(P,X)},M=P=>{var X=xe(),te=de(X);{var Z=ne=>{var z=ey(),N=F(z),O=Q(F(N),2);wt(O,21,()=>d(a),tn,(q,fe,we)=>{let ue=()=>d(fe).assignment;var Me=Zg(),oe=F(Me),ve=F(oe),ge=Q(oe,2),Le=F(ge);be((it,We)=>en(ve,`${ue().course??""} - ${it??""}, due in ${We??""}`),[()=>ue().title.toLowerCase(),()=>l_(ue().dueDate)]),Do(Le,()=>d(a)[we].hoursNeeded,it=>d(a)[we].hoursNeeded=it),I(q,Me)});var G=Q(N,2);Ds(G,{text:"looks good",onclick:()=>K(o,!0)}),_t(1,z,()=>Qt,()=>({x:-20,duration:400})),I(ne,z)},W=ne=>{var z=ty(),N=F(z);{let G=B(()=>[Kg,Ag]);mg(N,{get plugins(){return d(G)},get options(){return u}})}var O=Q(N,2);{let G=B(()=>d(f)?"finalizing…":"finalize plan");Ds(O,{get text(){return d(G)},onclick:_})}_t(1,z,()=>Qt,()=>({x:20,duration:400,delay:400})),_t(2,z,()=>Qt,()=>({x:20,duration:400})),I(ne,z)};$e(te,ne=>{d(o)===!1?ne(Z):ne(W,!1)},!0)}I(P,X)};$e(E,P=>{s.length!==r.length?P(D):P(M,!1)},!0)}I($,A)};$e(C,$=>{r.length===0||d(i)<r.length?$(x):$(T,!1)})}_t(5,S,()=>Qt,()=>({y:20,duration:400,delay:400})),I(t,w),Ee()}var sy=om(V('<script src="https://accounts.google.com/gsi/client" async><\/script><!>',1)),iy=V('<div><h1 style="text-align: center;">All done!</h1> <div>Your assignments have been successfully planned!</div> <div style="position: absolute; top: 3em; left: 5em;"><!></div></div>'),ay=V('<main class="svelte-1n46o8q"><!></main>');function oy(t,e){Ce(e,!0);const n=new up(window.location.href);addEventListener("hashchange",()=>{n.href=window.location.href});const r=async()=>{Fe.gapiClient=google.accounts.oauth2.initTokenClient({client_id:"376302852820-d16v40rksb0a2abqha80rhshol4s8sgr.apps.googleusercontent.com",callback:l=>{Fe.gapiToken=l.access_token},scope:"https://www.googleapis.com/auth/calendar"}),Fe.gapiInitialized=!0};var s=ay();im(l=>{var c=sy(),f=de(c);Q(f),Ye("load",f,r),I(l,c)});var i=F(s);{var a=l=>{var c=xe(),f=de(c);{var h=p=>{ep(p,{})};$e(f,p=>{Fe.gapiInitialized&&p(h)})}I(l,c)},o=l=>{var c=xe(),f=de(c);{var h=u=>{ry(u,{})},p=u=>{var m=xe(),v=de(m);{var _=g=>{var k=iy(),S=Q(F(k),4),C=F(S);qi(C),_t(1,k,()=>Va,()=>({duration:400,delay:400})),I(g,k)},w=g=>{op(g)};$e(v,g=>{n.hash.includes("#done")?g(_):g(w,!1)},!0)}I(u,m)};$e(f,u=>{n.hash.includes("#plan")?u(h):u(p,!1)},!0)}I(l,c)};$e(i,l=>{n.hash.includes("#connect")?l(a):l(o,!1)})}I(t,s),Ee()}cm(oy,{target:document.getElementById("app")});
