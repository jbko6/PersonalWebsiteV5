(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();const Ec=!1;var Oi=Array.isArray,Mf=Array.prototype.indexOf,vo=Array.from,vi=Object.defineProperty,nr=Object.getOwnPropertyDescriptor,Ac=Object.getOwnPropertyDescriptors,Nf=Object.prototype,Ff=Array.prototype,_o=Object.getPrototypeOf,wl=Object.isExtensible;function Lf(t){return typeof t=="function"}const _t=()=>{};function Bf(t){return t()}function _i(t){for(var e=0;e<t.length;e++)t[e]()}function Tc(){var t,e,n=new Promise((r,s)=>{t=r,e=s});return{promise:n,resolve:t,reject:e}}function go(t,e){if(Array.isArray(t))return t;if(e===void 0||!(Symbol.iterator in t))return Array.from(t);const n=[];for(const r of t)if(n.push(r),n.length===e)break;return n}const yt=2,yo=4,Mi=8,qn=16,An=32,cr=64,wo=128,qt=256,gi=512,ct=1024,Rt=2048,Tn=4096,Qt=8192,ur=16384,Ni=32768,dr=65536,bl=1<<17,Dc=1<<18,Lr=1<<19,Rc=1<<20,Ia=1<<21,bo=1<<22,rr=1<<23,xn=Symbol("$state"),Uf=Symbol("legacy props"),Wf=Symbol(""),Cr=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"},Hf=11;function Ic(t){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function qf(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function zf(t){throw new Error("https://svelte.dev/e/effect_in_teardown")}function jf(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Xf(t){throw new Error("https://svelte.dev/e/effect_orphan")}function Vf(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Jf(t){throw new Error("https://svelte.dev/e/props_invalid_value")}function Yf(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Kf(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Gf(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function Qf(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const Fi=1,Li=2,Pc=4,Zf=8,eh=16,th=1,nh=2,rh=4,sh=8,ih=16,ah=1,oh=2,lh=4,ch=1,uh=2,Xe=Symbol(),dh="http://www.w3.org/1999/xhtml",fh="@attach";function hh(){console.warn("https://svelte.dev/e/select_multiple_invalid_value")}function ph(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}let mh=!1;function Oc(t){return t===this.v}function Bi(t,e){return t!=t?e==e:t!==e||t!==null&&typeof t=="object"||typeof t=="function"}function vh(t,e){return t!==e}function Mc(t){return!Bi(t,this.v)}let Br=!1,_h=!1;function gh(){Br=!0}let Ie=null;function Dr(t){Ie=t}function st(t){return Nc().get(t)}function yh(t,e){return Nc().set(t,e),e}function Ee(t,e=!1,n){Ie={p:Ie,c:null,e:null,s:t,x:null,l:Br&&!e?{s:null,u:null,$:[]}:null}}function Ae(t){var e=Ie,n=e.e;if(n!==null){e.e=null;for(var r of n)Gc(r)}return t!==void 0&&(e.x=t),Ie=e.p,t??{}}function Ur(){return!Br||Ie!==null&&Ie.l===null}function Nc(t){return Ie===null&&Ic(),Ie.c??=new Map(wh(Ie)||void 0)}function wh(t){let e=t.p;for(;e!==null;){const n=e.c;if(n!==null)return n;e=e.p}return null}let Qn=[];function Fc(){var t=Qn;Qn=[],_i(t)}function En(t){if(Qn.length===0&&!ys){var e=Qn;queueMicrotask(()=>{e===Qn&&Fc()})}Qn.push(t)}function bh(){for(;Qn.length>0;)Fc()}const Sh=new WeakMap;function Lc(t){var e=he;if(e===null)return _e.f|=rr,t;if((e.f&Ni)===0){if((e.f&wo)===0)throw!e.parent&&t instanceof Error&&Bc(t),t;e.b.error(t)}else Rr(t,e)}function Rr(t,e){for(;e!==null;){if((e.f&wo)!==0)try{e.b.error(t);return}catch(n){t=n}e=e.parent}throw t instanceof Error&&Bc(t),t}function Bc(t){const e=Sh.get(t);e&&(vi(t,"message",{value:e.message}),vi(t,"stack",{value:e.stack}))}const Xs=new Set;let Re=null,si=null,Yt=null,Pa=new Set,cn=[],Ui=null,Oa=!1,ys=!1;class dn{current=new Map;#e=new Map;#n=new Set;#i=0;#t=null;#o=[];#a=[];#s=[];#r=[];#l=[];skipped_effects=new Set;process(e){cn=[],si=null,this.apply();for(const i of e)this.#c(i);if(this.#i===0){var n=Yt;this.#d();var r=this.#o,s=this.#a;this.#o=[],this.#a=[],this.#s=[],si=this,Re=null,Yt=n,Sl(r),Sl(s),si=null,this.#t?.resolve()}else this.#u(this.#o),this.#u(this.#a),this.#u(this.#s);Yt=null}#c(e){e.f^=ct;for(var n=e.first;n!==null;){var r=n.f,s=(r&(An|cr))!==0,i=s&&(r&ct)!==0,a=i||(r&Qt)!==0||this.skipped_effects.has(n);if(!a&&n.fn!==null){s?n.f^=ct:(r&yo)!==0?this.#a.push(n):Is(n)&&((n.f&qn)!==0&&this.#s.push(n),xs(n));var o=n.first;if(o!==null){n=o;continue}}var l=n.parent;for(n=n.next;n===null&&l!==null;)n=l.next,l=l.parent}}#u(e){for(const n of e)((n.f&Rt)!==0?this.#r:this.#l).push(n),dt(n,ct);e.length=0}capture(e,n){this.#e.has(e)||this.#e.set(e,n),this.current.set(e,e.v),Yt?.set(e,e.v)}activate(){Re=this}deactivate(){Re=null,Yt=null}flush(){if(cn.length>0){if(this.activate(),Uc(),Re!==null&&Re!==this)return}else this.#i===0&&this.#d();this.deactivate();for(const e of Pa)if(Pa.delete(e),e(),Re!==null)break}#d(){for(const e of this.#n)e();if(this.#n.clear(),Xs.size>1){this.#e.clear();let e=!0;for(const n of Xs){if(n===this){e=!1;continue}const r=[];for(const[i,a]of this.current){if(n.current.has(i))if(e&&a!==n.current.get(i))n.current.set(i,a);else continue;r.push(i)}if(r.length===0)continue;const s=[...n.current.keys()].filter(i=>!this.current.has(i));if(s.length>0){for(const i of r)Wc(i,s);if(cn.length>0){Re=n,n.apply();for(const i of cn)n.#c(i);cn=[],n.deactivate()}}}Re=null}Xs.delete(this)}increment(){this.#i+=1}decrement(){this.#i-=1;for(const e of this.#r)dt(e,Rt),ir(e);for(const e of this.#l)dt(e,Tn),ir(e);this.flush()}add_callback(e){this.#n.add(e)}settled(){return(this.#t??=Tc()).promise}static ensure(){if(Re===null){const e=Re=new dn;Xs.add(Re),ys||dn.enqueue(()=>{Re===e&&e.flush()})}return Re}static enqueue(e){En(e)}apply(){}}function $h(t){var e=ys;ys=!0;try{for(var n;;){if(bh(),cn.length===0&&(Re?.flush(),cn.length===0))return Ui=null,n;Uc()}}finally{ys=e}}function Uc(){var t=Ar;Oa=!0;try{var e=0;for(xl(!0);cn.length>0;){var n=dn.ensure();if(e++>1e3){var r,s;kh()}n.process(cn),Fn.clear()}}finally{Oa=!1,xl(t),Ui=null}}function kh(){try{Vf()}catch(t){Rr(t,Ui)}}let Kn=null;function Sl(t){var e=t.length;if(e!==0){for(var n=0;n<e;){var r=t[n++];if((r.f&(ur|Qt))===0&&Is(r)&&(Kn=[],xs(r),r.deps===null&&r.first===null&&r.nodes_start===null&&(r.teardown===null&&r.ac===null?tu(r):r.fn=null),Kn?.length>0)){Fn.clear();for(const s of Kn)xs(s);Kn=[]}}Kn=null}}function Wc(t,e){if(t.reactions!==null)for(const n of t.reactions){const r=n.f;(r&yt)!==0?Wc(n,e):(r&(bo|qn))!==0&&Hc(n,e)&&(dt(n,Rt),ir(n))}}function Hc(t,e){if(t.deps!==null){for(const n of t.deps)if(e.includes(n)||(n.f&yt)!==0&&Hc(n,e))return!0}return!1}function ir(t){for(var e=Ui=t;e.parent!==null;){e=e.parent;var n=e.f;if(Oa&&e===he&&(n&qn)!==0)return;if((n&(cr|An))!==0){if((n&ct)===0)return;e.f^=ct}}cn.push(e)}function xh(t){let e=0,n=Bn(0),r;return()=>{Uh()&&(d(n),qr(()=>(e===0&&(r=U(()=>t(()=>un(n)))),e+=1,()=>{En(()=>{e-=1,e===0&&(r?.(),r=void 0,un(n))})})))}}var Ch=dr|Lr|wo;function Eh(t,e,n){new Ah(t,e,n)}class Ah{parent;#e=!1;#n;#i=null;#t;#o;#a;#s=null;#r=null;#l=null;#c=null;#u=0;#d=0;#h=!1;#f=null;#_=()=>{this.#f&&Ir(this.#f,this.#u)};#g=xh(()=>(this.#f=Bn(this.#u),()=>{this.#f=null}));constructor(e,n,r){this.#n=e,this.#t=n,this.#o=r,this.parent=he.b,this.#e=!!this.#t.pending,this.#a=Dn(()=>{he.b=this;{try{this.#s=ot(()=>r(this.#n))}catch(s){this.error(s)}this.#d>0?this.#m():this.#e=!1}},Ch)}#y(){try{this.#s=ot(()=>this.#o(this.#n))}catch(e){this.error(e)}this.#e=!1}#w(){const e=this.#t.pending;e&&(this.#r=ot(()=>e(this.#n)),dn.enqueue(()=>{this.#s=this.#p(()=>(dn.ensure(),ot(()=>this.#o(this.#n)))),this.#d>0?this.#m():(Ln(this.#r,()=>{this.#r=null}),this.#e=!1)}))}is_pending(){return this.#e||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!this.#t.pending}#p(e){var n=he,r=_e,s=Ie;pn(this.#a),xt(this.#a),Dr(this.#a.ctx);try{return e()}catch(i){return Lc(i),null}finally{pn(n),xt(r),Dr(s)}}#m(){const e=this.#t.pending;this.#s!==null&&(this.#c=document.createDocumentFragment(),Th(this.#s,this.#c)),this.#r===null&&(this.#r=ot(()=>e(this.#n)))}#v(e){if(!this.has_pending_snippet()){this.parent&&this.parent.#v(e);return}this.#d+=e,this.#d===0&&(this.#e=!1,this.#r&&Ln(this.#r,()=>{this.#r=null}),this.#c&&(this.#n.before(this.#c),this.#c=null),En(()=>{dn.ensure().flush()}))}update_pending_count(e){this.#v(e),this.#u+=e,Pa.add(this.#_)}get_effect_pending(){return this.#g(),d(this.#f)}error(e){var n=this.#t.onerror;let r=this.#t.failed;if(this.#h||!n&&!r)throw e;this.#s&&(ut(this.#s),this.#s=null),this.#r&&(ut(this.#r),this.#r=null),this.#l&&(ut(this.#l),this.#l=null);var s=!1,i=!1;const a=()=>{if(s){ph();return}s=!0,i&&Qf(),dn.ensure(),this.#u=0,this.#l!==null&&Ln(this.#l,()=>{this.#l=null}),this.#e=this.has_pending_snippet(),this.#s=this.#p(()=>(this.#h=!1,ot(()=>this.#o(this.#n)))),this.#d>0?this.#m():this.#e=!1};var o=_e;try{xt(null),i=!0,n?.(e,a),i=!1}catch(l){Rr(l,this.#a&&this.#a.parent)}finally{xt(o)}r&&En(()=>{this.#l=this.#p(()=>{this.#h=!0;try{return ot(()=>{r(this.#n,()=>e,()=>a)})}catch(l){return Rr(l,this.#a.parent),null}finally{this.#h=!1}})})}}function Th(t,e){for(var n=t.nodes_start,r=t.nodes_end;n!==null;){var s=n===r?null:Ds(n);e.append(n),n=s}}function qc(t,e,n){const r=Ur()?Ts:ar;if(e.length===0){n(t.map(r));return}var s=Re,i=he,a=Dh();Promise.all(e.map(o=>Rh(o))).then(o=>{a();try{n([...t.map(r),...o])}catch(l){(i.f&ur)===0&&Rr(l,i)}s?.deactivate(),Ma()}).catch(o=>{Rr(o,i)})}function Dh(){var t=he,e=_e,n=Ie,r=Re;return function(){pn(t),xt(e),Dr(n),r?.activate()}}function Ma(){pn(null),xt(null),Dr(null)}function Ts(t){var e=yt|Rt,n=_e!==null&&(_e.f&yt)!==0?_e:null;return he===null||n!==null&&(n.f&qt)!==0?e|=qt:he.f|=Lr,{ctx:Ie,deps:null,effects:null,equals:Oc,f:e,fn:t,reactions:null,rv:0,v:Xe,wv:0,parent:n??he,ac:null}}function Rh(t,e){let n=he;n===null&&qf();var r=n.b,s=void 0,i=Bn(Xe),a=!_e,o=new Map;return zh(()=>{var l=Tc();s=l.promise;try{Promise.resolve(t()).then(l.resolve,l.reject).then(Ma)}catch(m){l.reject(m),Ma()}var c=Re,f=r.is_pending();a&&(r.update_pending_count(1),f||(c.increment(),o.get(c)?.reject(Cr),o.delete(c),o.set(c,l)));const h=(m,u=void 0)=>{if(f||c.activate(),u)u!==Cr&&(i.f|=rr,Ir(i,u));else{(i.f&rr)!==0&&(i.f^=rr),Ir(i,m);for(const[p,v]of o){if(o.delete(p),p===c)break;v.reject(Cr)}}a&&(r.update_pending_count(-1),f||c.decrement())};l.promise.then(h,m=>h(null,m||"unknown"))}),Rs(()=>{for(const l of o.values())l.reject(Cr)}),new Promise(l=>{function c(f){function h(){f===s?l(i):c(s)}f.then(h,h)}c(s)})}function L(t){const e=Ts(t);return su(e),e}function ar(t){const e=Ts(t);return e.equals=Mc,e}function zc(t){var e=t.effects;if(e!==null){t.effects=null;for(var n=0;n<e.length;n+=1)ut(e[n])}}function Ih(t){for(var e=t.parent;e!==null;){if((e.f&yt)===0)return e;e=e.parent}return null}function So(t){var e,n=he;pn(Ih(t));try{zc(t),e=lu(t)}finally{pn(n)}return e}function jc(t){var e=So(t);if(t.equals(e)||(t.v=e,t.wv=au()),!fr)if(Yt!==null)Yt.set(t,t.v);else{var n=(Mn||(t.f&qt)!==0)&&t.deps!==null?Tn:ct;dt(t,n)}}const Fn=new Map;function Bn(t,e){var n={f:0,v:t,reactions:null,equals:Oc,rv:0,wv:0};return n}function Te(t,e){const n=Bn(t);return su(n),n}function Zn(t,e=!1,n=!0){const r=Bn(t);return e||(r.equals=Mc),Br&&n&&Ie!==null&&Ie.l!==null&&(Ie.l.s??=[]).push(r),r}function K(t,e,n=!1){_e!==null&&(!Kt||(_e.f&bl)!==0)&&Ur()&&(_e.f&(yt|qn|bo|bl))!==0&&!Cn?.includes(t)&&Gf();let r=n?Gt(e):e;return Ir(t,r)}function Ir(t,e){if(!t.equals(e)){var n=t.v;fr?Fn.set(t,e):Fn.set(t,n),t.v=e;var r=dn.ensure();r.capture(t,n),(t.f&yt)!==0&&((t.f&Rt)!==0&&So(t),dt(t,(t.f&qt)===0?ct:Tn)),t.wv=au(),Xc(t,Rt),Ur()&&he!==null&&(he.f&ct)!==0&&(he.f&(An|cr))===0&&(Bt===null?Vh([t]):Bt.push(t))}return e}function un(t){K(t,t.v+1)}function Xc(t,e){var n=t.reactions;if(n!==null)for(var r=Ur(),s=n.length,i=0;i<s;i++){var a=n[i],o=a.f;if(!(!r&&a===he)){var l=(o&Rt)===0;l&&dt(a,e),(o&yt)!==0?Xc(a,Tn):l&&((o&qn)!==0&&Kn!==null&&Kn.push(a),ir(a))}}}function Gt(t){if(typeof t!="object"||t===null||xn in t)return t;const e=_o(t);if(e!==Nf&&e!==Ff)return t;var n=new Map,r=Oi(t),s=Te(0),i=sr,a=o=>{if(sr===i)return o();var l=_e,c=sr;xt(null),El(i);var f=o();return xt(l),El(c),f};return r&&n.set("length",Te(t.length)),new Proxy(t,{defineProperty(o,l,c){(!("value"in c)||c.configurable===!1||c.enumerable===!1||c.writable===!1)&&Yf();var f=n.get(l);return f===void 0?f=a(()=>{var h=Te(c.value);return n.set(l,h),h}):K(f,c.value,!0),!0},deleteProperty(o,l){var c=n.get(l);if(c===void 0){if(l in o){const f=a(()=>Te(Xe));n.set(l,f),un(s)}}else K(c,Xe),un(s);return!0},get(o,l,c){if(l===xn)return t;var f=n.get(l),h=l in o;if(f===void 0&&(!h||nr(o,l)?.writable)&&(f=a(()=>{var u=Gt(h?o[l]:Xe),p=Te(u);return p}),n.set(l,f)),f!==void 0){var m=d(f);return m===Xe?void 0:m}return Reflect.get(o,l,c)},getOwnPropertyDescriptor(o,l){var c=Reflect.getOwnPropertyDescriptor(o,l);if(c&&"value"in c){var f=n.get(l);f&&(c.value=d(f))}else if(c===void 0){var h=n.get(l),m=h?.v;if(h!==void 0&&m!==Xe)return{enumerable:!0,configurable:!0,value:m,writable:!0}}return c},has(o,l){if(l===xn)return!0;var c=n.get(l),f=c!==void 0&&c.v!==Xe||Reflect.has(o,l);if(c!==void 0||he!==null&&(!f||nr(o,l)?.writable)){c===void 0&&(c=a(()=>{var m=f?Gt(o[l]):Xe,u=Te(m);return u}),n.set(l,c));var h=d(c);if(h===Xe)return!1}return f},set(o,l,c,f){var h=n.get(l),m=l in o;if(r&&l==="length")for(var u=c;u<h.v;u+=1){var p=n.get(u+"");p!==void 0?K(p,Xe):u in o&&(p=a(()=>Te(Xe)),n.set(u+"",p))}if(h===void 0)(!m||nr(o,l)?.writable)&&(h=a(()=>Te(void 0)),K(h,Gt(c)),n.set(l,h));else{m=h.v!==Xe;var v=a(()=>Gt(c));K(h,v)}var _=Reflect.getOwnPropertyDescriptor(o,l);if(_?.set&&_.set.call(f,c),!m){if(r&&typeof l=="string"){var b=n.get("length"),g=Number(l);Number.isInteger(g)&&g>=b.v&&K(b,g+1)}un(s)}return!0},ownKeys(o){d(s);var l=Reflect.ownKeys(o).filter(h=>{var m=n.get(h);return m===void 0||m.v!==Xe});for(var[c,f]of n)f.v!==Xe&&!(c in o)&&l.push(c);return l},setPrototypeOf(){Kf()}})}function $l(t){try{if(t!==null&&typeof t=="object"&&xn in t)return t[xn]}catch{}return t}function Ph(t,e){return Object.is($l(t),$l(e))}var Ut,Vc,Jc,Yc;function Oh(){if(Ut===void 0){Ut=window,Vc=/Firefox/.test(navigator.userAgent);var t=Element.prototype,e=Node.prototype,n=Text.prototype;Jc=nr(e,"firstChild").get,Yc=nr(e,"nextSibling").get,wl(t)&&(t.__click=void 0,t.__className=void 0,t.__attributes=null,t.__style=void 0,t.__e=void 0),wl(n)&&(n.__t=void 0)}}function zn(t=""){return document.createTextNode(t)}function yi(t){return Jc.call(t)}function Ds(t){return Yc.call(t)}function B(t,e){return yi(t)}function ae(t,e=!1){{var n=yi(t);return n instanceof Comment&&n.data===""?Ds(n):n}}function ee(t,e=1,n=!1){let r=t;for(;e--;)r=Ds(r);return r}function Mh(t){t.textContent=""}function Wi(){return!1}function Nh(t,e){if(e){const n=document.body;t.autofocus=!0,En(()=>{document.activeElement===n&&t.focus()})}}let kl=!1;function Fh(){kl||(kl=!0,document.addEventListener("reset",t=>{Promise.resolve().then(()=>{if(!t.defaultPrevented)for(const e of t.target.elements)e.__on_r?.()})},{capture:!0}))}function Wr(t){var e=_e,n=he;xt(null),pn(null);try{return t()}finally{xt(e),pn(n)}}function Lh(t,e,n,r=n){t.addEventListener(e,()=>Wr(n));const s=t.__on_r;s?t.__on_r=()=>{s(),r(!0)}:t.__on_r=()=>r(!0),Fh()}function Kc(t){he===null&&_e===null&&Xf(),_e!==null&&(_e.f&qt)!==0&&he===null&&jf(),fr&&zf()}function Bh(t,e){var n=e.last;n===null?e.last=e.first=t:(n.next=t,t.prev=n,e.last=t)}function _n(t,e,n,r=!0){var s=he;s!==null&&(s.f&Qt)!==0&&(t|=Qt);var i={ctx:Ie,deps:null,nodes_start:null,nodes_end:null,f:t|Rt,first:null,fn:e,last:null,next:null,parent:s,b:s&&s.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(n)try{xs(i),i.f|=Ni}catch(l){throw ut(i),l}else e!==null&&ir(i);if(r){var a=i;if(n&&a.deps===null&&a.teardown===null&&a.nodes_start===null&&a.first===a.last&&(a.f&Lr)===0&&(a=a.first),a!==null&&(a.parent=s,s!==null&&Bh(a,s),_e!==null&&(_e.f&yt)!==0&&(t&cr)===0)){var o=_e;(o.effects??=[]).push(a)}}return i}function Uh(){return _e!==null&&!Kt}function Rs(t){const e=_n(Mi,null,!1);return dt(e,ct),e.teardown=t,e}function gt(t){Kc();var e=he.f,n=!_e&&(e&An)!==0&&(e&Ni)===0;if(n){var r=Ie;(r.e??=[]).push(t)}else return Gc(t)}function Gc(t){return _n(yo|Rc,t,!1)}function Qc(t){return Kc(),_n(Mi|Rc,t,!0)}function Wh(t){dn.ensure();const e=_n(cr|Lr,t,!0);return(n={})=>new Promise(r=>{n.outro?Ln(e,()=>{ut(e),r(void 0)}):(ut(e),r(void 0))})}function Hr(t){return _n(yo,t,!1)}function Hh(t,e){var n=Ie,r={effect:null,ran:!1,deps:t};n.l.$.push(r),r.effect=qr(()=>{t(),!r.ran&&(r.ran=!0,U(e))})}function qh(){var t=Ie;qr(()=>{for(var e of t.l.$){e.deps();var n=e.effect;(n.f&ct)!==0&&dt(n,Tn),Is(n)&&xs(n),e.ran=!1}})}function zh(t){return _n(bo|Lr,t,!0)}function qr(t,e=0){return _n(Mi|e,t,!0)}function we(t,e=[],n=[]){qc(e,n,r=>{_n(Mi,()=>t(...r.map(d)),!0)})}function Dn(t,e=0){var n=_n(qn|e,t,!0);return n}function ot(t,e=!0){return _n(An|Lr,t,!0,e)}function Zc(t){var e=t.teardown;if(e!==null){const n=fr,r=_e;Cl(!0),xt(null);try{e.call(null)}finally{Cl(n),xt(r)}}}function eu(t,e=!1){var n=t.first;for(t.first=t.last=null;n!==null;){const s=n.ac;s!==null&&Wr(()=>{s.abort(Cr)});var r=n.next;(n.f&cr)!==0?n.parent=null:ut(n,e),n=r}}function jh(t){for(var e=t.first;e!==null;){var n=e.next;(e.f&An)===0&&ut(e),e=n}}function ut(t,e=!0){var n=!1;(e||(t.f&Dc)!==0)&&t.nodes_start!==null&&t.nodes_end!==null&&(Xh(t.nodes_start,t.nodes_end),n=!0),eu(t,e&&!n),wi(t,0),dt(t,ur);var r=t.transitions;if(r!==null)for(const i of r)i.stop();Zc(t);var s=t.parent;s!==null&&s.first!==null&&tu(t),t.next=t.prev=t.teardown=t.ctx=t.deps=t.fn=t.nodes_start=t.nodes_end=t.ac=null}function Xh(t,e){for(;t!==null;){var n=t===e?null:Ds(t);t.remove(),t=n}}function tu(t){var e=t.parent,n=t.prev,r=t.next;n!==null&&(n.next=r),r!==null&&(r.prev=n),e!==null&&(e.first===t&&(e.first=r),e.last===t&&(e.last=n))}function Ln(t,e){var n=[];$o(t,n,!0),nu(n,()=>{ut(t),e&&e()})}function nu(t,e){var n=t.length;if(n>0){var r=()=>--n||e();for(var s of t)s.out(r)}else e()}function $o(t,e,n){if((t.f&Qt)===0){if(t.f^=Qt,t.transitions!==null)for(const a of t.transitions)(a.is_global||n)&&e.push(a);for(var r=t.first;r!==null;){var s=r.next,i=(r.f&dr)!==0||(r.f&An)!==0;$o(r,e,i?n:!1),r=s}}}function ko(t){ru(t,!0)}function ru(t,e){if((t.f&Qt)!==0){t.f^=Qt,(t.f&ct)===0&&(dt(t,Rt),ir(t));for(var n=t.first;n!==null;){var r=n.next,s=(n.f&dr)!==0||(n.f&An)!==0;ru(n,s?e:!1),n=r}if(t.transitions!==null)for(const i of t.transitions)(i.is_global||e)&&i.in()}}let Ar=!1;function xl(t){Ar=t}let fr=!1;function Cl(t){fr=t}let _e=null,Kt=!1;function xt(t){_e=t}let he=null;function pn(t){he=t}let Cn=null;function su(t){_e!==null&&(Cn===null?Cn=[t]:Cn.push(t))}let vt=null,Tt=0,Bt=null;function Vh(t){Bt=t}let iu=1,ks=0,sr=ks;function El(t){sr=t}let Mn=!1;function au(){return++iu}function Is(t){var e=t.f;if((e&Rt)!==0)return!0;if((e&Tn)!==0){var n=t.deps,r=(e&qt)!==0;if(n!==null){var s,i,a=(e&gi)!==0,o=r&&he!==null&&!Mn,l=n.length;if((a||o)&&(he===null||(he.f&ur)===0)){var c=t,f=c.parent;for(s=0;s<l;s++)i=n[s],(a||!i?.reactions?.includes(c))&&(i.reactions??=[]).push(c);a&&(c.f^=gi),o&&f!==null&&(f.f&qt)===0&&(c.f^=qt)}for(s=0;s<l;s++)if(i=n[s],Is(i)&&jc(i),i.wv>t.wv)return!0}(!r||he!==null&&!Mn)&&dt(t,ct)}return!1}function ou(t,e,n=!0){var r=t.reactions;if(r!==null&&!Cn?.includes(t))for(var s=0;s<r.length;s++){var i=r[s];(i.f&yt)!==0?ou(i,e,!1):e===i&&(n?dt(i,Rt):(i.f&ct)!==0&&dt(i,Tn),ir(i))}}function lu(t){var e=vt,n=Tt,r=Bt,s=_e,i=Mn,a=Cn,o=Ie,l=Kt,c=sr,f=t.f;vt=null,Tt=0,Bt=null,Mn=(f&qt)!==0&&(Kt||!Ar||_e===null),_e=(f&(An|cr))===0?t:null,Cn=null,Dr(t.ctx),Kt=!1,sr=++ks,t.ac!==null&&(Wr(()=>{t.ac.abort(Cr)}),t.ac=null);try{t.f|=Ia;var h=t.fn,m=h(),u=t.deps;if(vt!==null){var p;if(wi(t,Tt),u!==null&&Tt>0)for(u.length=Tt+vt.length,p=0;p<vt.length;p++)u[Tt+p]=vt[p];else t.deps=u=vt;if(!Mn||(f&yt)!==0&&t.reactions!==null)for(p=Tt;p<u.length;p++)(u[p].reactions??=[]).push(t)}else u!==null&&Tt<u.length&&(wi(t,Tt),u.length=Tt);if(Ur()&&Bt!==null&&!Kt&&u!==null&&(t.f&(yt|Tn|Rt))===0)for(p=0;p<Bt.length;p++)ou(Bt[p],t);return s!==null&&s!==t&&(ks++,Bt!==null&&(r===null?r=Bt:r.push(...Bt))),(t.f&rr)!==0&&(t.f^=rr),m}catch(v){return Lc(v)}finally{t.f^=Ia,vt=e,Tt=n,Bt=r,_e=s,Mn=i,Cn=a,Dr(o),Kt=l,sr=c}}function Jh(t,e){let n=e.reactions;if(n!==null){var r=Mf.call(n,t);if(r!==-1){var s=n.length-1;s===0?n=e.reactions=null:(n[r]=n[s],n.pop())}}n===null&&(e.f&yt)!==0&&(vt===null||!vt.includes(e))&&(dt(e,Tn),(e.f&(qt|gi))===0&&(e.f^=gi),zc(e),wi(e,0))}function wi(t,e){var n=t.deps;if(n!==null)for(var r=e;r<n.length;r++)Jh(t,n[r])}function xs(t){var e=t.f;if((e&ur)===0){dt(t,ct);var n=he,r=Ar;he=t,Ar=!0;try{(e&qn)!==0?jh(t):eu(t),Zc(t);var s=lu(t);t.teardown=typeof s=="function"?s:null,t.wv=iu;var i;Ec&&_h&&(t.f&Rt)!==0&&t.deps}finally{Ar=r,he=n}}}async function bi(){await Promise.resolve(),$h()}function d(t){var e=t.f,n=(e&yt)!==0;if(_e!==null&&!Kt){var r=he!==null&&(he.f&ur)!==0;if(!r&&!Cn?.includes(t)){var s=_e.deps;if((_e.f&Ia)!==0)t.rv<ks&&(t.rv=ks,vt===null&&s!==null&&s[Tt]===t?Tt++:vt===null?vt=[t]:(!Mn||!vt.includes(t))&&vt.push(t));else{(_e.deps??=[]).push(t);var i=t.reactions;i===null?t.reactions=[_e]:i.includes(_e)||i.push(_e)}}}else if(n&&t.deps===null&&t.effects===null){var a=t,o=a.parent;o!==null&&(o.f&qt)===0&&(a.f^=qt)}if(fr){if(Fn.has(t))return Fn.get(t);if(n){a=t;var l=a.v;return((a.f&ct)===0&&a.reactions!==null||cu(a))&&(l=So(a)),Fn.set(a,l),l}}else if(n){if(a=t,Yt?.has(a))return Yt.get(a);Is(a)&&jc(a)}if(Yt?.has(t))return Yt.get(t);if((t.f&rr)!==0)throw t.v;return t.v}function cu(t){if(t.v===Xe)return!0;if(t.deps===null)return!1;for(const e of t.deps)if(Fn.has(e)||(e.f&yt)!==0&&cu(e))return!0;return!1}function U(t){var e=Kt;try{return Kt=!0,t()}finally{Kt=e}}const Yh=-7169;function dt(t,e){t.f=t.f&Yh|e}function uu(t){if(!(typeof t!="object"||!t||t instanceof EventTarget)){if(xn in t)Na(t);else if(!Array.isArray(t))for(let e in t){const n=t[e];typeof n=="object"&&n&&xn in n&&Na(n)}}}function Na(t,e=new Set){if(typeof t=="object"&&t!==null&&!(t instanceof EventTarget)&&!e.has(t)){e.add(t),t instanceof Date&&t.getTime();for(let r in t)try{Na(t[r],e)}catch{}const n=_o(t);if(n!==Object.prototype&&n!==Array.prototype&&n!==Map.prototype&&n!==Set.prototype&&n!==Date.prototype){const r=Ac(n);for(let s in r){const i=r[s].get;if(i)try{i.call(t)}catch{}}}}}function Kh(t){return t.endsWith("capture")&&t!=="gotpointercapture"&&t!=="lostpointercapture"}const Gh=["beforeinput","click","change","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"];function Qh(t){return Gh.includes(t)}const Zh={formnovalidate:"formNoValidate",ismap:"isMap",nomodule:"noModule",playsinline:"playsInline",readonly:"readOnly",defaultvalue:"defaultValue",defaultchecked:"defaultChecked",srcobject:"srcObject",novalidate:"noValidate",allowfullscreen:"allowFullscreen",disablepictureinpicture:"disablePictureInPicture",disableremoteplayback:"disableRemotePlayback"};function ep(t){return t=t.toLowerCase(),Zh[t]??t}const tp=["touchstart","touchmove"];function np(t){return tp.includes(t)}const du=new Set,Fa=new Set;function fu(t,e,n,r={}){function s(i){if(r.capture||ls.call(e,i),!i.cancelBubble)return Wr(()=>n?.call(this,i))}return t.startsWith("pointer")||t.startsWith("touch")||t==="wheel"?En(()=>{e.addEventListener(t,s,r)}):e.addEventListener(t,s,r),s}function Ye(t,e,n,r,s){var i={capture:r,passive:s},a=fu(t,e,n,i);(e===document.body||e===window||e===document||e instanceof HTMLMediaElement)&&Rs(()=>{e.removeEventListener(t,a,i)})}function Ct(t){for(var e=0;e<t.length;e++)du.add(t[e]);for(var n of Fa)n(t)}let Al=null;function ls(t){var e=this,n=e.ownerDocument,r=t.type,s=t.composedPath?.()||[],i=s[0]||t.target;Al=t;var a=0,o=Al===t&&t.__root;if(o){var l=s.indexOf(o);if(l!==-1&&(e===document||e===window)){t.__root=e;return}var c=s.indexOf(e);if(c===-1)return;l<=c&&(a=l)}if(i=s[a]||t.target,i!==e){vi(t,"currentTarget",{configurable:!0,get(){return i||n}});var f=_e,h=he;xt(null),pn(null);try{for(var m,u=[];i!==null;){var p=i.assignedSlot||i.parentNode||i.host||null;try{var v=i["__"+r];if(v!=null&&(!i.disabled||t.target===i))if(Oi(v)){var[_,...b]=v;_.apply(i,[t,...b])}else v.call(i,t)}catch(g){m?u.push(g):m=g}if(t.cancelBubble||p===e||p===null)break;i=p}if(m){for(let g of u)queueMicrotask(()=>{throw g});throw m}}finally{t.__root=e,delete t.currentTarget,xt(f),pn(h)}}}function rp(t){var e;e=document.head.appendChild(zn());try{Dn(()=>t(e),Dc)}finally{}}function sp(t){var e=document.createElement("template");return e.innerHTML=t.replaceAll("<!>","<!---->"),e.content}function La(t,e){var n=he;n.nodes_start===null&&(n.nodes_start=t,n.nodes_end=e)}function Y(t,e){var n=(e&ch)!==0,r=(e&uh)!==0,s,i=!t.startsWith("<!>");return()=>{s===void 0&&(s=sp(i?t:"<!>"+t),n||(s=yi(s)));var a=r||Vc?document.importNode(s,!0):s.cloneNode(!0);if(n){var o=yi(a),l=a.lastChild;La(o,l)}else La(a,a);return a}}function ip(t){return()=>ap(t())}function ap(t){const e=t.nodeType===Hf,n=t.tagName==="SCRIPT"?[t]:t.querySelectorAll("script"),r=he;for(const i of n){const a=document.createElement("script");for(var s of i.attributes)a.setAttribute(s.name,s.value);a.textContent=i.textContent,(e?t.firstChild===i:t===i)&&(r.nodes_start=a),(e?t.lastChild===i:t===i)&&(r.nodes_end=a),i.replaceWith(a)}return t}function xe(){var t=document.createDocumentFragment(),e=document.createComment(""),n=zn();return t.append(e,n),La(e,n),t}function P(t,e){t!==null&&t.before(e)}let Ba=!0;function Zt(t,e){var n=e==null?"":typeof e=="object"?e+"":e;n!==(t.__t??=t.nodeValue)&&(t.__t=n,t.nodeValue=n+"")}function op(t,e){return lp(t,e)}const gr=new Map;function lp(t,{target:e,anchor:n,props:r={},events:s,context:i,intro:a=!0}){Oh();var o=new Set,l=h=>{for(var m=0;m<h.length;m++){var u=h[m];if(!o.has(u)){o.add(u);var p=np(u);e.addEventListener(u,ls,{passive:p});var v=gr.get(u);v===void 0?(document.addEventListener(u,ls,{passive:p}),gr.set(u,1)):gr.set(u,v+1)}}};l(vo(du)),Fa.add(l);var c=void 0,f=Wh(()=>{var h=n??e.appendChild(zn());return Eh(h,{pending:()=>{}},m=>{if(i){Ee({});var u=Ie;u.c=i}s&&(r.$$events=s),Ba=a,c=t(m,r)||{},Ba=!0,i&&Ae()}),()=>{for(var m of o){e.removeEventListener(m,ls);var u=gr.get(m);--u===0?(document.removeEventListener(m,ls),gr.delete(m)):gr.set(m,u)}Fa.delete(l),h!==n&&h.parentNode?.removeChild(h)}});return cp.set(c,f),c}let cp=new WeakMap;function $e(t,e,n=!1){var r=t,s=null,i=null,a=Xe,o=n?dr:0,l=!1;const c=(u,p=!0)=>{l=!0,m(p,u)};var f=null;function h(){f!==null&&(f.lastChild.remove(),r.before(f),f=null);var u=a?s:i,p=a?i:s;u&&ko(u),p&&Ln(p,()=>{a?i=null:s=null})}const m=(u,p)=>{if(a!==(a=u)){var v=Wi(),_=r;if(v&&(f=document.createDocumentFragment(),f.append(_=zn())),a?s??=p&&ot(()=>p(_)):i??=p&&ot(()=>p(_)),v){var b=Re,g=a?s:i,k=a?i:s;g&&b.skipped_effects.delete(g),k&&b.skipped_effects.add(k),b.add_callback(h)}else h()}};Dn(()=>{l=!1,e(c),l||m(null,null)},o)}function xo(t,e,n){var r=t,s=Xe,i,a,o=null,l=Ur()?vh:Bi;function c(){i&&Ln(i),o!==null&&(o.lastChild.remove(),r.before(o),o=null),i=a}Dn(()=>{if(l(s,s=e())){var f=r,h=Wi();h&&(o=document.createDocumentFragment(),o.append(f=zn())),a=ot(()=>n(f)),h?Re.add_callback(c):c()}})}function en(t,e){return e}function up(t,e,n){for(var r=t.items,s=[],i=e.length,a=0;a<i;a++)$o(e[a].e,s,!0);var o=i>0&&s.length===0&&n!==null;if(o){var l=n.parentNode;Mh(l),l.append(n),r.clear(),on(t,e[0].prev,e[i-1].next)}nu(s,()=>{for(var c=0;c<i;c++){var f=e[c];o||(r.delete(f.k),on(t,f.prev,f.next)),ut(f.e,!o)}})}function wt(t,e,n,r,s,i=null){var a=t,o={flags:e,items:new Map,first:null},l=(e&Pc)!==0;if(l){var c=t;a=c.appendChild(zn())}var f=null,h=!1,m=new Map,u=ar(()=>{var b=n();return Oi(b)?b:b==null?[]:vo(b)}),p,v;function _(){dp(v,p,o,m,a,s,e,r,n),i!==null&&(p.length===0?f?ko(f):f=ot(()=>i(a)):f!==null&&Ln(f,()=>{f=null}))}Dn(()=>{v??=he,p=d(u);var b=p.length;if(!(h&&b===0)){h=b===0;var g,k,S,C;if(Wi()){var x=new Set,T=Re;for(k=0;k<b;k+=1){S=p[k],C=r(S,k);var $=o.items.get(C)??m.get(C);$?(e&(Fi|Li))!==0&&hu($,S,k,e):(g=pu(null,o,null,null,S,C,k,s,e,n,!0),m.set(C,g)),x.add(C)}for(const[A,E]of o.items)x.has(A)||T.skipped_effects.add(E.e);T.add_callback(_)}else _();d(u)}})}function dp(t,e,n,r,s,i,a,o,l){var c=(a&Zf)!==0,f=(a&(Fi|Li))!==0,h=e.length,m=n.items,u=n.first,p=u,v,_=null,b,g=[],k=[],S,C,x,T;if(c)for(T=0;T<h;T+=1)S=e[T],C=o(S,T),x=m.get(C),x!==void 0&&(x.a?.measure(),(b??=new Set).add(x));for(T=0;T<h;T+=1){if(S=e[T],C=o(S,T),x=m.get(C),x===void 0){var $=r.get(C);if($!==void 0){r.delete(C),m.set(C,$);var A=_?_.next:p;on(n,_,$),on(n,$,A),da($,A,s),_=$}else{var E=p?p.e.nodes_start:s;_=pu(E,n,_,_===null?n.first:_.next,S,C,T,i,a,l)}m.set(C,_),g=[],k=[],p=_.next;continue}if(f&&hu(x,S,T,a),(x.e.f&Qt)!==0&&(ko(x.e),c&&(x.a?.unfix(),(b??=new Set).delete(x))),x!==p){if(v!==void 0&&v.has(x)){if(g.length<k.length){var D=k[0],M;_=D.prev;var I=g[0],X=g[g.length-1];for(M=0;M<g.length;M+=1)da(g[M],D,s);for(M=0;M<k.length;M+=1)v.delete(k[M]);on(n,I.prev,X.next),on(n,_,I),on(n,X,D),p=D,_=X,T-=1,g=[],k=[]}else v.delete(x),da(x,p,s),on(n,x.prev,x.next),on(n,x,_===null?n.first:_.next),on(n,_,x),_=x;continue}for(g=[],k=[];p!==null&&p.k!==C;)(p.e.f&Qt)===0&&(v??=new Set).add(p),k.push(p),p=p.next;if(p===null)continue;x=p}g.push(x),_=x,p=x.next}if(p!==null||v!==void 0){for(var te=v===void 0?[]:vo(v);p!==null;)(p.e.f&Qt)===0&&te.push(p),p=p.next;var Q=te.length;if(Q>0){var W=(a&Pc)!==0&&h===0?s:null;if(c){for(T=0;T<Q;T+=1)te[T].a?.measure();for(T=0;T<Q;T+=1)te[T].a?.fix()}up(n,te,W)}}c&&En(()=>{if(b!==void 0)for(x of b)x.a?.apply()}),t.first=n.first&&n.first.e,t.last=_&&_.e;for(var ne of r.values())ut(ne.e);r.clear()}function hu(t,e,n,r){(r&Fi)!==0&&Ir(t.v,e),(r&Li)!==0?Ir(t.i,n):t.i=n}function pu(t,e,n,r,s,i,a,o,l,c,f){var h=(l&Fi)!==0,m=(l&eh)===0,u=h?m?Zn(s,!1,!1):Bn(s):s,p=(l&Li)===0?a:Bn(a),v={i:p,v:u,k:i,a:null,e:null,prev:n,next:r};try{if(t===null){var _=document.createDocumentFragment();_.append(t=zn())}return v.e=ot(()=>o(t,u,p,c),mh),v.e.prev=n&&n.e,v.e.next=r&&r.e,n===null?f||(e.first=v):(n.next=v,n.e.next=v.e),r!==null&&(r.prev=v,r.e.prev=v.e),v}finally{}}function da(t,e,n){for(var r=t.next?t.next.e.nodes_start:n,s=e?e.e.nodes_start:n,i=t.e.nodes_start;i!==null&&i!==r;){var a=Ds(i);s.before(i),i=a}}function on(t,e,n){e===null?t.first=n:(e.next=n,e.e.next=n&&n.e),n!==null&&(n.prev=e,n.e.prev=e&&e.e)}function Pr(t,e,...n){var r=t,s=_t,i;Dn(()=>{s!==(s=e())&&(i&&(ut(i),i=null),i=ot(()=>s(r,...n)))},dr)}function Ps(t,e,n){var r=t,s,i,a=null,o=null;function l(){i&&(Ln(i),i=null),a&&(a.lastChild.remove(),r.before(a),a=null),i=o,o=null}Dn(()=>{if(s!==(s=e())){var c=Wi();if(s){var f=r;c&&(a=document.createDocumentFragment(),a.append(f=zn()),i&&Re.skipped_effects.add(i)),o=ot(()=>n(f,s))}c?Re.add_callback(l):l()}},dr)}function or(t,e,n){Hr(()=>{var r=U(()=>e(t,n?.())||{});if(n&&r?.update){var s=!1,i={};qr(()=>{var a=n();uu(a),s&&Bi(i,a)&&(i=a,r.update(a))}),s=!0}if(r?.destroy)return()=>r.destroy()})}function fp(t,e){var n=void 0,r;Dn(()=>{n!==(n=e())&&(r&&(ut(r),r=null),n&&(r=ot(()=>{Hr(()=>n(t))})))})}function mu(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=mu(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function hp(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=mu(t))&&(r&&(r+=" "),r+=e);return r}function Ua(t){return typeof t=="object"?hp(t):t??""}const Tl=[...` 	
\r\f \v\uFEFF`];function pp(t,e,n){var r=t==null?"":""+t;if(e&&(r=r?r+" "+e:e),n){for(var s in n)if(n[s])r=r?r+" "+s:s;else if(r.length)for(var i=s.length,a=0;(a=r.indexOf(s,a))>=0;){var o=a+i;(a===0||Tl.includes(r[a-1]))&&(o===r.length||Tl.includes(r[o]))?r=(a===0?"":r.substring(0,a))+r.substring(o+1):a=o}}return r===""?null:r}function Dl(t,e=!1){var n=e?" !important;":";",r="";for(var s in t){var i=t[s];i!=null&&i!==""&&(r+=" "+s+": "+i+n)}return r}function fa(t){return t[0]!=="-"||t[1]!=="-"?t.toLowerCase():t}function mp(t,e){if(e){var n="",r,s;if(Array.isArray(e)?(r=e[0],s=e[1]):r=e,t){t=String(t).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var i=!1,a=0,o=!1,l=[];r&&l.push(...Object.keys(r).map(fa)),s&&l.push(...Object.keys(s).map(fa));var c=0,f=-1;const v=t.length;for(var h=0;h<v;h++){var m=t[h];if(o?m==="/"&&t[h-1]==="*"&&(o=!1):i?i===m&&(i=!1):m==="/"&&t[h+1]==="*"?o=!0:m==='"'||m==="'"?i=m:m==="("?a++:m===")"&&a--,!o&&i===!1&&a===0){if(m===":"&&f===-1)f=h;else if(m===";"||h===v-1){if(f!==-1){var u=fa(t.substring(c,f).trim());if(!l.includes(u)){m!==";"&&h++;var p=t.substring(c,h).trim();n+=" "+p+";"}}c=h+1,f=-1}}}}return r&&(n+=Dl(r)),s&&(n+=Dl(s,!0)),n=n.trim(),n===""?null:n}return t==null?null:String(t)}function ie(t,e,n,r,s,i){var a=t.__className;if(a!==n||a===void 0){var o=pp(n,r,i);o==null?t.removeAttribute("class"):e?t.className=o:t.setAttribute("class",o),t.__className=n}else if(i&&s!==i)for(var l in i){var c=!!i[l];(s==null||c!==!!s[l])&&t.classList.toggle(l,c)}return i}function ha(t,e={},n,r){for(var s in n){var i=n[s];e[s]!==i&&(n[s]==null?t.style.removeProperty(s):t.style.setProperty(s,i,r))}}function tn(t,e,n,r){var s=t.__style;if(s!==e){var i=mp(e,r);i==null?t.removeAttribute("style"):t.style.cssText=i,t.__style=e}else r&&(Array.isArray(r)?(ha(t,n?.[0],r[0]),ha(t,n?.[1],r[1],"important")):ha(t,n,r));return r}function Wa(t,e,n=!1){if(t.multiple){if(e==null)return;if(!Oi(e))return hh();for(var r of t.options)r.selected=e.includes(Rl(r));return}for(r of t.options){var s=Rl(r);if(Ph(s,e)){r.selected=!0;return}}(!n||e!==void 0)&&(t.selectedIndex=-1)}function vp(t){var e=new MutationObserver(()=>{Wa(t,t.__value)});e.observe(t,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),Rs(()=>{e.disconnect()})}function Rl(t){return"__value"in t?t.__value:t.value}const rs=Symbol("class"),ss=Symbol("style"),vu=Symbol("is custom element"),_u=Symbol("is html");function _p(t,e){e?t.hasAttribute("selected")||t.setAttribute("selected",""):t.removeAttribute("selected")}function Ke(t,e,n,r){var s=yu(t);s[e]!==(s[e]=n)&&(e==="loading"&&(t[Wf]=n),n==null?t.removeAttribute(e):typeof n!="string"&&wu(t).includes(e)?t[e]=n:t.setAttribute(e,n))}function gp(t,e,n,r,s=!1,i=!1){var a=yu(t),o=a[vu],l=!a[_u],c=e||{},f=t.tagName==="OPTION";for(var h in e)h in n||(n[h]=null);n.class?n.class=Ua(n.class):(r||n[rs])&&(n.class=null),n[ss]&&(n.style??=null);var m=wu(t);for(const S in n){let C=n[S];if(f&&S==="value"&&C==null){t.value=t.__value="",c[S]=C;continue}if(S==="class"){var u=t.namespaceURI==="http://www.w3.org/1999/xhtml";ie(t,u,C,r,e?.[rs],n[rs]),c[S]=C,c[rs]=n[rs];continue}if(S==="style"){tn(t,C,e?.[ss],n[ss]),c[S]=C,c[ss]=n[ss];continue}var p=c[S];if(!(C===p&&!(C===void 0&&t.hasAttribute(S)))){c[S]=C;var v=S[0]+S[1];if(v!=="$$")if(v==="on"){const x={},T="$$"+S;let $=S.slice(2);var _=Qh($);if(Kh($)&&($=$.slice(0,-7),x.capture=!0),!_&&p){if(C!=null)continue;t.removeEventListener($,c[T],x),c[T]=null}if(C!=null)if(_)t[`__${$}`]=C,Ct([$]);else{let A=function(E){c[S].call(this,E)};var k=A;c[T]=fu($,t,A,x)}else _&&(t[`__${$}`]=void 0)}else if(S==="style")Ke(t,S,C);else if(S==="autofocus")Nh(t,!!C);else if(!o&&(S==="__value"||S==="value"&&C!=null))t.value=t.__value=C;else if(S==="selected"&&f)_p(t,C);else{var b=S;l||(b=ep(b));var g=b==="defaultValue"||b==="defaultChecked";if(C==null&&!o&&!g)if(a[S]=null,b==="value"||b==="checked"){let x=t;const T=e===void 0;if(b==="value"){let $=x.defaultValue;x.removeAttribute(b),x.defaultValue=$,x.value=x.__value=T?$:null}else{let $=x.defaultChecked;x.removeAttribute(b),x.defaultChecked=$,x.checked=T?$:!1}}else t.removeAttribute(S);else g||m.includes(b)&&(o||typeof C!="string")?(t[b]=C,b in a&&(a[b]=Xe)):typeof C!="function"&&Ke(t,b,C)}}}return c}function gu(t,e,n=[],r=[],s,i=!1,a=!1){qc(n,r,o=>{var l=void 0,c={},f=t.nodeName==="SELECT",h=!1;if(Dn(()=>{var u=e(...o.map(d)),p=gp(t,l,u,s,i,a);h&&f&&"value"in u&&Wa(t,u.value);for(let _ of Object.getOwnPropertySymbols(c))u[_]||ut(c[_]);for(let _ of Object.getOwnPropertySymbols(u)){var v=u[_];_.description===fh&&(!l||v!==l[_])&&(c[_]&&ut(c[_]),c[_]=ot(()=>fp(t,()=>v))),p[_]=v}l=p}),f){var m=t;Hr(()=>{Wa(m,l.value,!0),vp(m)})}h=!0})}function yu(t){return t.__attributes??={[vu]:t.nodeName.includes("-"),[_u]:t.namespaceURI===dh}}var Il=new Map;function wu(t){var e=t.getAttribute("is")||t.nodeName,n=Il.get(e);if(n)return n;Il.set(e,n=[]);for(var r,s=t,i=Element.prototype;i!==s;){r=Ac(s);for(var a in r)r[a].set&&n.push(a);s=_o(s)}return n}const yp=()=>performance.now(),Sn={tick:t=>requestAnimationFrame(t),now:()=>yp(),tasks:new Set};function bu(){const t=Sn.now();Sn.tasks.forEach(e=>{e.c(t)||(Sn.tasks.delete(e),e.f())}),Sn.tasks.size!==0&&Sn.tick(bu)}function wp(t){let e;return Sn.tasks.size===0&&Sn.tick(bu),{promise:new Promise(n=>{Sn.tasks.add(e={c:t,f:n})}),abort(){Sn.tasks.delete(e)}}}function Vs(t,e){Wr(()=>{t.dispatchEvent(new CustomEvent(e))})}function bp(t){if(t==="float")return"cssFloat";if(t==="offset")return"cssOffset";if(t.startsWith("--"))return t;const e=t.split("-");return e.length===1?e[0]:e[0]+e.slice(1).map(n=>n[0].toUpperCase()+n.slice(1)).join("")}function Pl(t){const e={},n=t.split(";");for(const r of n){const[s,i]=r.split(":");if(!s||i===void 0)break;const a=bp(s.trim());e[a]=i.trim()}return e}const Sp=t=>t;function Jt(t,e,n,r){var s=(t&ah)!==0,i=(t&oh)!==0,a=s&&i,o=(t&lh)!==0,l=a?"both":s?"in":"out",c,f=e.inert,h=e.style.overflow,m,u;function p(){return Wr(()=>c??=n()(e,r?.()??{},{direction:l}))}var v={is_global:o,in(){if(e.inert=f,!s){u?.abort(),u?.reset?.();return}i||m?.abort(),Vs(e,"introstart"),m=Ha(e,p(),u,1,()=>{Vs(e,"introend"),m?.abort(),m=c=void 0,e.style.overflow=h})},out(k){if(!i){k?.(),c=void 0;return}e.inert=!0,Vs(e,"outrostart"),u=Ha(e,p(),m,0,()=>{Vs(e,"outroend"),k?.()})},stop:()=>{m?.abort(),u?.abort()}},_=he;if((_.transitions??=[]).push(v),s&&Ba){var b=o;if(!b){for(var g=_.parent;g&&(g.f&dr)!==0;)for(;(g=g.parent)&&(g.f&qn)===0;);b=!g||(g.f&Ni)!==0}b&&Hr(()=>{U(()=>v.in())})}}function Ha(t,e,n,r,s){var i=r===1;if(Lf(e)){var a,o=!1;return En(()=>{if(!o){var _=e({direction:i?"in":"out"});a=Ha(t,_,n,r,s)}}),{abort:()=>{o=!0,a?.abort()},deactivate:()=>a.deactivate(),reset:()=>a.reset(),t:()=>a.t()}}if(n?.deactivate(),!e?.duration)return s(),{abort:_t,deactivate:_t,reset:_t,t:()=>r};const{delay:l=0,css:c,tick:f,easing:h=Sp}=e;var m=[];if(i&&n===void 0&&(f&&f(0,1),c)){var u=Pl(c(0,1));m.push(u,u)}var p=()=>1-r,v=t.animate(m,{duration:l,fill:"forwards"});return v.onfinish=()=>{v.cancel();var _=n?.t()??1-r;n?.abort();var b=r-_,g=e.duration*Math.abs(b),k=[];if(g>0){var S=!1;if(c)for(var C=Math.ceil(g/16.666666666666668),x=0;x<=C;x+=1){var T=_+b*h(x/C),$=Pl(c(T,1-T));k.push($),S||=$.overflow==="hidden"}S&&(t.style.overflow="hidden"),p=()=>{var A=v.currentTime;return _+b*h(A/g)},f&&wp(()=>{if(v.playState!=="running")return!1;var A=p();return f(A,1-A),!0})}v=t.animate(k,{duration:g,fill:"forwards"}),v.onfinish=()=>{p=()=>r,f?.(r,1-r),s()}},{abort:()=>{v&&(v.cancel(),v.effect=null,v.onfinish=_t)},deactivate:()=>{s=_t},reset:()=>{r===0&&f?.(1,0)},t:()=>p()}}function Co(t,e,n=e){var r=new WeakSet;Lh(t,"input",async s=>{var i=s?t.defaultValue:t.value;if(i=pa(t)?ma(i):i,n(i),Re!==null&&r.add(Re),await bi(),i!==(i=e())){var a=t.selectionStart,o=t.selectionEnd,l=t.value.length;if(t.value=i??"",o!==null){var c=t.value.length;a===o&&o===l&&c>l?(t.selectionStart=c,t.selectionEnd=c):(t.selectionStart=a,t.selectionEnd=Math.min(o,c))}}}),U(e)==null&&t.value&&(n(pa(t)?ma(t.value):t.value),Re!==null&&r.add(Re)),qr(()=>{var s=e();if(t===document.activeElement){var i=si??Re;if(r.has(i))return}pa(t)&&s===ma(t.value)||t.type==="date"&&!s&&!t.value||s!==t.value&&(t.value=s??"")})}function pa(t){var e=t.type;return e==="number"||e==="range"}function ma(t){return t===""?null:+t}function Rn(t,e,n){var r=nr(t,e);r&&r.set&&(t[e]=n,Rs(()=>{t[e]=null}))}function Ol(t,e){return t===e||t?.[xn]===e}function Un(t={},e,n,r){return Hr(()=>{var s,i;return qr(()=>{s=i,i=r?.()||[],U(()=>{t!==n(...i)&&(e(t,...i),s&&Ol(n(...s),t)&&e(null,...s))})}),()=>{En(()=>{i&&Ol(n(...i),t)&&e(null,...i)})}}),t}function Os(t=!1){const e=Ie,n=e.l.u;if(!n)return;let r=()=>uu(e.s);if(t){let s=0,i={};const a=Ts(()=>{let o=!1;const l=e.s;for(const c in l)l[c]!==i[c]&&(i[c]=l[c],o=!0);return o&&s++,s});r=()=>d(a)}n.b.length&&Qc(()=>{Ml(e,r),_i(n.b)}),gt(()=>{const s=U(()=>n.m.map(Bf));return()=>{for(const i of s)typeof i=="function"&&i()}}),n.a.length&&gt(()=>{Ml(e,r),_i(n.a)})}function Ml(t,e){if(t.l.s)for(const n of t.l.s)d(n);e()}function Su(t){var e=Bn(0);return function(){return arguments.length===1?(K(e,d(e)+1),arguments[0]):(d(e),t())}}function Eo(t,e,n){if(t==null)return e(void 0),n&&n(void 0),_t;const r=U(()=>t.subscribe(e,n));return r.unsubscribe?()=>r.unsubscribe():r}const yr=[];function $u(t,e){return{subscribe:bt(t,e).subscribe}}function bt(t,e=_t){let n=null;const r=new Set;function s(o){if(Bi(t,o)&&(t=o,n)){const l=!yr.length;for(const c of r)c[1](),yr.push(c,t);if(l){for(let c=0;c<yr.length;c+=2)yr[c][0](yr[c+1]);yr.length=0}}}function i(o){s(o(t))}function a(o,l=_t){const c=[o,l];return r.add(c),r.size===1&&(n=e(s,i)||_t),o(t),()=>{r.delete(c),r.size===0&&n&&(n(),n=null)}}return{set:s,update:i,subscribe:a}}function Pt(t,e,n){const r=!Array.isArray(t),s=r?[t]:t;if(!s.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const i=e.length<2;return $u(n,(a,o)=>{let l=!1;const c=[];let f=0,h=_t;const m=()=>{if(f)return;h();const p=e(r?c[0]:c,a,o);i?a(p):h=typeof p=="function"?p:_t},u=s.map((p,v)=>Eo(p,_=>{c[v]=_,f&=~(1<<v),l&&m()},()=>{f|=1<<v}));return l=!0,m(),function(){_i(u),h(),l=!1}})}function Cs(t){let e;return Eo(t,n=>e=n)(),e}let Js=!1,qa=Symbol();function w(t,e,n){const r=n[e]??={store:null,source:Zn(void 0),unsubscribe:_t};if(r.store!==t&&!(qa in n))if(r.unsubscribe(),r.store=t??null,t==null)r.source.v=void 0,r.unsubscribe=_t;else{var s=!0;r.unsubscribe=Eo(t,i=>{s?r.source.v=i:K(r.source,i)}),s=!1}return t&&qa in n?Cs(t):d(r.source)}function Ne(t,e){return t.set(e),e}function Ge(){const t={};function e(){Rs(()=>{for(var n in t)t[n].unsubscribe();vi(t,qa,{enumerable:!1,value:!0})})}return[t,e]}function lt(t,e,n){return t.set(n),e}function $p(t){var e=Js;try{return Js=!1,[t(),Js]}finally{Js=e}}const kp={get(t,e){if(!t.exclude.includes(e))return t.props[e]},set(t,e){return!1},getOwnPropertyDescriptor(t,e){if(!t.exclude.includes(e)&&e in t.props)return{enumerable:!0,configurable:!0,value:t.props[e]}},has(t,e){return t.exclude.includes(e)?!1:e in t.props},ownKeys(t){return Reflect.ownKeys(t.props).filter(e=>!t.exclude.includes(e))}};function ku(t,e,n){return new Proxy({props:t,exclude:e},kp)}function Ce(t,e,n,r){var s=!Br||(n&nh)!==0,i=(n&sh)!==0,a=(n&ih)!==0,o=r,l=!0,c=()=>(l&&(l=!1,o=a?U(r):r),o),f;if(i){var h=xn in t||Uf in t;f=nr(t,e)?.set??(h&&e in t?k=>t[e]=k:void 0)}var m,u=!1;i?[m,u]=$p(()=>t[e]):m=t[e],m===void 0&&r!==void 0&&(m=c(),f&&(s&&Jf(),f(m)));var p;if(s?p=()=>{var k=t[e];return k===void 0?c():(l=!0,k)}:p=()=>{var k=t[e];return k!==void 0&&(o=void 0),k===void 0?o:k},s&&(n&rh)===0)return p;if(f){var v=t.$$legacy;return(function(k,S){return arguments.length>0?((!s||!S||v||u)&&f(S?p():k),k):p()})}var _=!1,b=((n&th)!==0?Ts:ar)(()=>(_=!1,p()));i&&d(b);var g=he;return(function(k,S){if(arguments.length>0){const C=S?d(b):s&&i?Gt(k):k;return K(b,C),_=!0,o!==void 0&&(o=C),k}return fr&&_||(g.f&ur)!==0?b.v:d(b)})}function Ms(t){Ie===null&&Ic(),Br&&Ie.l!==null?xp(Ie).m.push(t):gt(()=>{const e=U(t);if(typeof e=="function")return e})}function xp(t){var e=t.l;return e.u??={a:[],b:[],m:[]}}const Cp="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(Cp);const Ep=t=>t;function Ap(t){const e=t-1;return e*e*e+1}function Nl(t){const e=typeof t=="string"&&t.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return e?[parseFloat(e[1]),e[2]||"px"]:[t,"px"]}function Fl(t,{delay:e=0,duration:n=400,easing:r=Ep}={}){const s=+getComputedStyle(t).opacity;return{delay:e,duration:n,easing:r,css:i=>`opacity: ${i*s}`}}function Nn(t,{delay:e=0,duration:n=400,easing:r=Ap,x:s=0,y:i=0,opacity:a=0}={}){const o=getComputedStyle(t),l=+o.opacity,c=o.transform==="none"?"":o.transform,f=l*(1-a),[h,m]=Nl(s),[u,p]=Nl(i);return{delay:e,duration:n,easing:r,css:(v,_)=>`
			transform: ${c} translate(${(1-v)*h}${m}, ${(1-v)*u}${p});
			opacity: ${l-f*_}`}}gh();var Tp=Y('<a href="#" class="svelte-1gft3h5">work@once</a>');function Hi(t){var e=Tp();P(t,e)}var Dp=Y('<div class="emphasized-center-button-container svelte-djjya"><div class="button-background svelte-djjya"></div> <button> </button></div>');function Es(t,e){let n=Ce(e,"text",3,"Click Me"),r=Ce(e,"color",3,"#DEEBFF"),s=Ce(e,"size",3,"24px"),i=ku(e,["$$slots","$$events","$$legacy","text","color","size"]);var a=Dp(),o=B(a),l=ee(o,2);gu(l,()=>({...i}),void 0,void 0,"svelte-djjya");var c=B(l);we(()=>{tn(a,`font-size: ${s()??""};`),tn(o,`--color: ${r()??""};`),Zt(c,n())}),P(t,a)}var Rp=Y('<div class="ack-step-container svelte-1bjil9h"><h1 class="svelte-1bjil9h">we need to connect to your things</h1> <!></div>');function Ip(t,e){Ee(e,!0);let n=Ce(e,"advanceCallback",3,()=>{});var r=Rp(),s=ee(B(r),2);Es(s,{text:"got it",size:"32px",onclick:()=>n()()}),P(t,r),Ae()}const Be=Gt({gapiInitialized:!1,gapiToken:"",gapiClient:null,canvasToken:"",canvasConnected:!1,edstemToken:"",edstemConnected:!1,gradescopeToken:"",gradescopeConnected:!1});var Pp=Y('<div class="link-container svelte-18n6oxr"><div class="link-background svelte-18n6oxr"></div> <button> </button></div>');function xu(t,e){let n=Ce(e,"text",3,"next"),r=Ce(e,"color",3,"#DEEBFF"),s=Ce(e,"size",3,"24px"),i=ku(e,["$$slots","$$events","$$legacy","text","color","size"]);var a=Pp(),o=B(a),l=ee(o,2);gu(l,()=>({...i}),void 0,void 0,"svelte-18n6oxr");var c=B(l);we(()=>{tn(a,`font-size: ${s()??""}`),tn(o,`--color: ${r()??""};`),Zt(c,n())}),P(t,a)}var Nt=Su(()=>Be),Op=Y('<div class="canvas-folder-container svelte-3kqok9"><div class="instructions svelte-3kqok9">you’ll need to<br/> <br/> → go to your account settings<br/> → generate a new access token<br/> → paste the access token here</div> <div class="token-input-container"><label for="canvas-token" class="svelte-3kqok9">your access token</label><br/> <input type="password" autocomplete="off" id="canvas-token" placeholder="paste it here" class="svelte-3kqok9"/></div> <!></div>');function Mp(t,e){Ee(e,!1);const n=async()=>{await fetch("https://cloudflare-cors-anywhere.jonahkowal.workers.dev/?https://canvas.instructure.com/api/v1/users/self",{headers:{Authorization:`Bearer ${Nt().canvasToken}`,"Content-Type":"application/json"}}).then(o=>{o.ok?Nt(Nt().canvasConnected=!0):Nt(Nt().canvasConnected=!1)})};Os();var r=Op(),s=ee(B(r),2),i=ee(B(s),3);i.__input=()=>Nt(Nt().canvasConnected=!1);var a=ee(s,2);{let o=ar(()=>Nt().canvasConnected?"connected!":"connect"),l=ar(()=>Nt().canvasConnected?"#A3F7BF":"#DEEBFF");xu(a,{get text(){return d(o)},get color(){return d(l)},onclick:n})}Co(i,()=>Nt().canvasToken,o=>Nt(Nt().canvasToken=o)),P(t,r),Ae()}Ct(["input"]);var Ft=Su(()=>Be),Np=Y('<div class="edstem-folder-container svelte-1ll1k31"><div class="instructions svelte-1ll1k31">you’ll need to<br/> <br/> → go to your <a href="https://edstem.org/us/settings/api-tokens" target="_blank" class="svelte-1ll1k31">api tokens</a><br/> → generate a new access token<br/> → paste the token here</div> <div class="token-input-container"><label for="edstem-token" class="svelte-1ll1k31">your access token</label><br/> <input type="password" autocomplete="off" id="edstem-token" placeholder="paste it here" class="svelte-1ll1k31"/></div> <!></div>');function Fp(t,e){Ee(e,!1);const n=async()=>{await fetch("https://cloudflare-cors-anywhere.jonahkowal.workers.dev/?https://us.edstem.org/api/user",{headers:{Authorization:`Bearer ${Ft().edstemToken}`,"Content-Type":"application/json"}}).then(o=>{o.ok?Ft(Ft().edstemConnected=!0):Ft(Ft().edstemConnected=!1)})};Os();var r=Np(),s=ee(B(r),2),i=ee(B(s),3);i.__input=()=>Ft(Ft().edstemConnected=!1);var a=ee(s,2);{let o=ar(()=>Ft().edstemConnected?"connected!":"connect"),l=ar(()=>Ft().edstemConnected?"#A3F7BF":"#DEEBFF");xu(a,{get text(){return d(o)},get color(){return d(l)},onclick:n})}Co(i,()=>Ft().edstemToken,o=>Ft(Ft().edstemToken=o)),P(t,r),Ae()}Ct(["input"]);var Lp=Y("<div>unfortunately, gradescope does not have an api available yet :( <br/><br/> support may be added in the future!</div>");function Bp(t){var e=Lp();P(t,e)}var Up=(t,e,n)=>K(e,d(n),!0),Wp=Y("<button> </button>"),Hp=Y('<h1 class="svelte-i6jobp">where do you keep your assignments?</h1> <div class="assignments-folder-container svelte-i6jobp"><div class="assigments-folder-tabs"></div> <div class="assignments-folder-content svelte-i6jobp"><!></div></div> <div class="continue-button svelte-i6jobp"><!></div>',1);function qp(t,e){Ee(e,!0);let n=Ce(e,"advanceCallback",3,()=>{}),r={canvas:Mp,edstem:Fp,gradescope:Bp},s=Te(Gt(Object.keys(r)[0]));var i=Hp(),a=ee(ae(i),2),o=B(a);wt(o,21,()=>Object.keys(r),en,(u,p)=>{var v=Wp();v.__click=[Up,s,p];var _=B(v);we(()=>{ie(v,1,`folder-tab ${d(s)===d(p)?"active":""}`,"svelte-i6jobp"),Zt(_,d(p))}),P(u,v)});var l=ee(o,2),c=B(l);xo(c,()=>d(s),u=>{const p=L(()=>r[d(s)]);var v=xe(),_=ae(v);Ps(_,()=>d(p),(b,g)=>{g(b,{})}),P(u,v)});var f=ee(a,2),h=B(f);{var m=u=>{Es(u,{text:"continue",size:"32px",onclick:()=>n()()})};$e(h,u=>{(Be.canvasConnected||Be.edstemConnected||Be.gradescopeConnected)&&u(m)})}Jt(1,f,()=>Nn,()=>({y:20,duration:300})),P(t,i),Ae()}Ct(["click"]);var zp=Y(`<div class="google-step-container svelte-11pyzxt"><div class="text"><h1 class="svelte-11pyzxt">let's connect to your calendar</h1> <div>we only support google calendar at the moment</div></div> <!></div>`);function jp(t,e){Ee(e,!0);let n=Ce(e,"advanceCallback",3,()=>{});Ms(()=>{google.accounts.id.renderButton(document.querySelector(".g-button"),{theme:"outline",size:"large",type:"standard"})});let r=!1;Qc(()=>{Be.gapiToken.length>0&&!r&&(n()(),r=!0)});var s=zp(),i=ee(B(s),2);Es(i,{onclick:()=>{Be.gapiClient.requestAccessToken()},text:"authorize"}),P(t,s),Ae()}var Xp=Y('<div class="step-number-container svelte-57bumr"><div class="step-number svelte-57bumr"> </div> <svg class="step-circle svelte-57bumr"><circle stroke="black" stroke-width="4" fill="none"></circle></svg></div>');function Ll(t,e){let n=Ce(e,"number",3,1),r=Ce(e,"active",3,!0),s=Ce(e,"radius",3,30);var i=Xp(),a=B(i),o=B(a),l=ee(a,2),c=B(l);we(()=>{tn(i,`opacity: ${r()?1:.5}; width: ${s()*2+10}px; height: ${s()*2+10}px;`),tn(a,`font-size: ${s()*1.5}px;`),Zt(o,n()),Ke(l,"width",s()*2+10),Ke(l,"height",s()*2+10),Ke(c,"cx",s()+5),Ke(c,"cy",s()+5),Ke(c,"r",s())}),P(t,i)}var Vp=Y('<div class="future-step svelte-k3y627"><!> <svg class="future-step-ellipsis" opacity="0.5" width="8" height="48"><circle cx="3" cy="5" r="3" fill="black"></circle><circle cx="3" cy="25" r="3" fill="black"></circle><circle cx="3" cy="45" r="3" fill="black"></circle></svg></div>'),Jp=Y('<div class="steps svelte-k3y627"><div class="current-step svelte-k3y627"><!> <!></div> <!></div>'),Yp=Y('<div class="connect-page-container svelte-k3y627"><header class="svelte-k3y627"><!></header> <div class="steps-container svelte-k3y627"><!></div></div>');function Kp(t,e){Ee(e,!0);const n=[Ip,jp,qp];let r=Te(0);addEventListener("hashchange",()=>{const c=window.location.hash;c.includes("#connect")&&K(r,c.split("#connect-")[1]?parseInt(c.split("#connect-")[1])-1:0,!0)}),gt(()=>{window.location.hash=`#connect-${d(r)+1}`});var s=Yp(),i=B(s),a=B(i);Hi(a);var o=ee(i,2),l=B(o);xo(l,()=>d(r),c=>{const f=L(()=>n[d(r)]);var h=Jp(),m=B(h),u=B(m);{let b=L(()=>d(r)+1);Ll(u,{get number(){return d(b)},active:!0})}var p=ee(u,2);Ps(p,()=>d(f),(b,g)=>{g(b,{advanceCallback:()=>{d(r)<n.length-1?K(r,d(r)+1):location.hash="#plan"}})});var v=ee(m,2);{var _=b=>{var g=Vp(),k=B(g);{let S=L(()=>d(r)+2);Ll(k,{get number(){return d(S)},active:!1})}P(b,g)};$e(v,b=>{d(r)<n.length-1&&b(_)})}Jt(2,h,()=>Nn,()=>({y:-20,duration:300})),Jt(1,h,()=>Nn,()=>({y:20,duration:300,delay:300})),P(c,h)}),Jt(5,i,()=>Fl,()=>({duration:500,delay:800})),Jt(6,i,()=>Fl,()=>({duration:200})),Jt(6,o,()=>Nn,()=>({y:-20,duration:400})),Jt(5,s,()=>Nn,()=>({y:20,duration:400,delay:400})),P(t,s),Ae()}var Gp=Y('<div class="link-container svelte-oq6r3"><div class="link-background svelte-oq6r3"></div> <a class="svelte-oq6r3"> <span class="arrow svelte-oq6r3">→</span></a></div>');function Qp(t,e){let n=Ce(e,"href",3,"#"),r=Ce(e,"text",3,"next"),s=Ce(e,"color",3,"#DEEBFF");var i=Gp(),a=B(i),o=ee(a,2),l=B(o);we(()=>{tn(a,`--color: ${s()??""};`),Ke(o,"href",n()),Zt(l,`${r()??""} `)}),P(t,i)}var Zp=Y('<span class="changing-hook svelte-1kmbrst"> </span>'),em=Y(`<h1 class="tagline svelte-1kmbrst">you're busy. <br/> let's get you more time to <span class="changing-hook-container svelte-1kmbrst"><!></span></h1> <svg id="filters" class="svelte-1kmbrst"><defs><filter id="threshold"><feColorMatrix in="SourceGraphic" type="matrix" values="
                                    1 0 0 0 0
                                    0 1 0 0 0
                                    0 0 1 0 0
                                    0 0 0 255 -110"></feColorMatrix></filter></defs></svg>`,1);function tm(t,e){Ee(e,!0);const n=["breathe","focus","create","relax","think","explore","build","connect","learn","grow"];let r=Te(Gt(Math.floor(Math.random()*n.length)));setInterval(()=>{const c=Math.floor(Math.random()*n.length);K(r,c,!0)},4e3);function s(c,{duration:f=400,delay:h=0}={duration:400,delay:0}){if(!(c.childNodes.length===1&&c.childNodes[0].nodeType===Node.TEXT_NODE))throw new Error("This transition only works on elements with a single text node child");return{duration:f,delay:h,css:(u,p)=>`
                filter: blur(${Math.min(8/u-8,100)}px);
                opacity: ${Math.pow(u,.4)*100}%;
            `}}var i=em(),a=ae(i),o=ee(B(a),3),l=B(o);xo(l,()=>d(r),c=>{var f=Zp(),h=B(f);we(()=>Zt(h,`${n[d(r)]??""}.`)),Jt(3,f,()=>s),P(c,f)}),P(t,i),Ae()}var nm=Y('<div class="landing-container svelte-y66x1q"><!> <!> <!></div>');function rm(t){var e=nm(),n=B(e);Hi(n);var r=ee(n,2);tm(r,{});var s=ee(r,2);Qp(s,{href:"#connect",text:"i'm ready"}),Jt(2,e,()=>Nn,()=>({x:40,duration:400})),Jt(1,e,()=>Nn,()=>({x:-40,duration:400,delay:200})),P(t,e)}const za=Symbol();class sm extends URLSearchParams{#e=Te(0);#n=im();#i=!1;#t(){if(!this.#n||this.#i)return;this.#i=!0;const e=this.toString();this.#n.search=e&&`?${e}`,this.#i=!1}[za](e){if(!this.#i){this.#i=!0;for(const n of[...super.keys()])super.delete(n);for(const[n,r]of e)super.append(n,r);un(this.#e),this.#i=!1}}append(e,n){super.append(e,n),this.#t(),un(this.#e)}delete(e,n){var r=super.has(e,n);super.delete(e,n),r&&(this.#t(),un(this.#e))}get(e){return d(this.#e),super.get(e)}getAll(e){return d(this.#e),super.getAll(e)}has(e,n){return d(this.#e),super.has(e,n)}keys(){return d(this.#e),super.keys()}set(e,n){var r=super.getAll(e).join("");super.set(e,n),r!==super.getAll(e).join("")&&(this.#t(),un(this.#e))}sort(){super.sort(),this.#t(),un(this.#e)}toString(){return d(this.#e),super.toString()}values(){return d(this.#e),super.values()}entries(){return d(this.#e),super.entries()}[Symbol.iterator](){return this.entries()}get size(){return d(this.#e),super.size}}let ja=null;function im(){return ja}class am extends URL{#e=Te(super.protocol);#n=Te(super.username);#i=Te(super.password);#t=Te(super.hostname);#o=Te(super.port);#a=Te(super.pathname);#s=Te(super.hash);#r=Te(super.search);#l;constructor(e,n){e=new URL(e,n),super(e),ja=this,this.#l=new sm(e.searchParams),ja=null}get hash(){return d(this.#s)}set hash(e){super.hash=e,K(this.#s,super.hash)}get host(){return d(this.#t),d(this.#o),super.host}set host(e){super.host=e,K(this.#t,super.hostname),K(this.#o,super.port)}get hostname(){return d(this.#t)}set hostname(e){super.hostname=e,K(this.#t,super.hostname)}get href(){return d(this.#e),d(this.#n),d(this.#i),d(this.#t),d(this.#o),d(this.#a),d(this.#s),d(this.#r),super.href}set href(e){super.href=e,K(this.#e,super.protocol),K(this.#n,super.username),K(this.#i,super.password),K(this.#t,super.hostname),K(this.#o,super.port),K(this.#a,super.pathname),K(this.#s,super.hash),K(this.#r,super.search),this.#l[za](super.searchParams)}get password(){return d(this.#i)}set password(e){super.password=e,K(this.#i,super.password)}get pathname(){return d(this.#a)}set pathname(e){super.pathname=e,K(this.#a,super.pathname)}get port(){return d(this.#o)}set port(e){super.port=e,K(this.#o,super.port)}get protocol(){return d(this.#e)}set protocol(e){super.protocol=e,K(this.#e,super.protocol)}get search(){return d(this.#r)}set search(e){super.search=e,K(this.#r,e),this.#l[za](super.searchParams)}get username(){return d(this.#n)}set username(e){super.username=e,K(this.#n,super.username)}get origin(){return d(this.#e),d(this.#t),d(this.#o),super.origin}get searchParams(){return this.#l}toString(){return this.href}toJSON(){return this.href}}function Z(t,e,n,r,s){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,n),n}function y(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)}let Cu=function(){const{crypto:t}=globalThis;if(t?.randomUUID)return Cu=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,r=>(+r^n()&15>>+r/4).toString(16))};function Xa(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const Va=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};class J extends Error{}class rt extends J{constructor(e,n,r,s){super(`${rt.makeMessage(e,n,r)}`),this.status=e,this.headers=s,this.requestID=s?.get("x-request-id"),this.error=n;const i=n;this.code=i?.code,this.param=i?.param,this.type=i?.type}static makeMessage(e,n,r){const s=n?.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):r;return e&&s?`${e} ${s}`:e?`${e} status code (no body)`:s||"(no status code or body)"}static generate(e,n,r,s){if(!e||!s)return new qi({message:r,cause:Va(n)});const i=n?.error;return e===400?new Eu(e,i,r,s):e===401?new Au(e,i,r,s):e===403?new Tu(e,i,r,s):e===404?new Du(e,i,r,s):e===409?new Ru(e,i,r,s):e===422?new Iu(e,i,r,s):e===429?new Pu(e,i,r,s):e>=500?new Ou(e,i,r,s):new rt(e,i,r,s)}}class Ht extends rt{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class qi extends rt{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class Ao extends qi{constructor({message:e}={}){super({message:e??"Request timed out."})}}class Eu extends rt{}class Au extends rt{}class Tu extends rt{}class Du extends rt{}class Ru extends rt{}class Iu extends rt{}class Pu extends rt{}class Ou extends rt{}class Mu extends J{constructor(){super("Could not parse response content as the length limit was reached")}}class Nu extends J{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}class cs extends Error{constructor(e){super(e)}}const om=/^[a-z][a-z0-9+.-]*:/i,lm=t=>om.test(t);let St=t=>(St=Array.isArray,St(t)),Bl=St;function Fu(t){return typeof t!="object"?{}:t??{}}function cm(t){if(!t)return!0;for(const e in t)return!1;return!0}function um(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function va(t){return t!=null&&typeof t=="object"&&!Array.isArray(t)}const dm=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new J(`${t} must be an integer`);if(e<0)throw new J(`${t} must be a positive integer`);return e},fm=t=>{try{return JSON.parse(t)}catch{return}},Ns=t=>new Promise(e=>setTimeout(e,t)),$r="6.5.0",hm=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u";function pm(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const mm=()=>{const t=pm();if(t==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":$r,"X-Stainless-OS":Wl(Deno.build.os),"X-Stainless-Arch":Ul(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:Deno.version?.deno??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":$r,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(t==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":$r,"X-Stainless-OS":Wl(globalThis.process.platform??"unknown"),"X-Stainless-Arch":Ul(globalThis.process.arch??"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":globalThis.process.version??"unknown"};const e=vm();return e?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":$r,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${e.browser}`,"X-Stainless-Runtime-Version":e.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":$r,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function vm(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const r=n.exec(navigator.userAgent);if(r){const s=r[1]||0,i=r[2]||0,a=r[3]||0;return{browser:e,version:`${s}.${i}.${a}`}}}return null}const Ul=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",Wl=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let Hl;const _m=()=>Hl??(Hl=mm());function gm(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new OpenAI({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function Lu(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function Bu(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return Lu({start(){},async pull(n){const{done:r,value:s}=await e.next();r?n.close():n.enqueue(s)},async cancel(){await e.return?.()}})}function Uu(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n?.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function ym(t){if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await t[Symbol.asyncIterator]().return?.();return}const e=t.getReader(),n=e.cancel();e.releaseLock(),await n}const wm=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)}),Wu="RFC3986",Hu=t=>String(t),ql={RFC1738:t=>String(t).replace(/%20/g,"+"),RFC3986:Hu},bm="RFC1738";let Ja=(t,e)=>(Ja=Object.hasOwn??Function.prototype.call.bind(Object.prototype.hasOwnProperty),Ja(t,e));const an=(()=>{const t=[];for(let e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t})(),_a=1024,Sm=(t,e,n,r,s)=>{if(t.length===0)return t;let i=t;if(typeof t=="symbol"?i=Symbol.prototype.toString.call(t):typeof t!="string"&&(i=String(t)),n==="iso-8859-1")return escape(i).replace(/%u[0-9a-f]{4}/gi,function(o){return"%26%23"+parseInt(o.slice(2),16)+"%3B"});let a="";for(let o=0;o<i.length;o+=_a){const l=i.length>=_a?i.slice(o,o+_a):i,c=[];for(let f=0;f<l.length;++f){let h=l.charCodeAt(f);if(h===45||h===46||h===95||h===126||h>=48&&h<=57||h>=65&&h<=90||h>=97&&h<=122||s===bm&&(h===40||h===41)){c[c.length]=l.charAt(f);continue}if(h<128){c[c.length]=an[h];continue}if(h<2048){c[c.length]=an[192|h>>6]+an[128|h&63];continue}if(h<55296||h>=57344){c[c.length]=an[224|h>>12]+an[128|h>>6&63]+an[128|h&63];continue}f+=1,h=65536+((h&1023)<<10|l.charCodeAt(f)&1023),c[c.length]=an[240|h>>18]+an[128|h>>12&63]+an[128|h>>6&63]+an[128|h&63]}a+=c.join("")}return a};function $m(t){return!t||typeof t!="object"?!1:!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))}function zl(t,e){if(St(t)){const n=[];for(let r=0;r<t.length;r+=1)n.push(e(t[r]));return n}return e(t)}const qu={brackets(t){return String(t)+"[]"},comma:"comma",indices(t,e){return String(t)+"["+e+"]"},repeat(t){return String(t)}},zu=function(t,e){Array.prototype.push.apply(t,St(e)?e:[e])};let jl;const je={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:Sm,encodeValuesOnly:!1,format:Wu,formatter:Hu,indices:!1,serializeDate(t){return(jl??(jl=Function.prototype.call.bind(Date.prototype.toISOString)))(t)},skipNulls:!1,strictNullHandling:!1};function km(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"||typeof t=="symbol"||typeof t=="bigint"}const ga={};function ju(t,e,n,r,s,i,a,o,l,c,f,h,m,u,p,v,_,b){let g=t,k=b,S=0,C=!1;for(;(k=k.get(ga))!==void 0&&!C;){const E=k.get(t);if(S+=1,typeof E<"u"){if(E===S)throw new RangeError("Cyclic object value");C=!0}typeof k.get(ga)>"u"&&(S=0)}if(typeof c=="function"?g=c(e,g):g instanceof Date?g=m?.(g):n==="comma"&&St(g)&&(g=zl(g,function(E){return E instanceof Date?m?.(E):E})),g===null){if(i)return l&&!v?l(e,je.encoder,_,"key",u):e;g=""}if(km(g)||$m(g)){if(l){const E=v?e:l(e,je.encoder,_,"key",u);return[p?.(E)+"="+p?.(l(g,je.encoder,_,"value",u))]}return[p?.(e)+"="+p?.(String(g))]}const x=[];if(typeof g>"u")return x;let T;if(n==="comma"&&St(g))v&&l&&(g=zl(g,l)),T=[{value:g.length>0?g.join(",")||null:void 0}];else if(St(c))T=c;else{const E=Object.keys(g);T=f?E.sort(f):E}const $=o?String(e).replace(/\./g,"%2E"):String(e),A=r&&St(g)&&g.length===1?$+"[]":$;if(s&&St(g)&&g.length===0)return A+"[]";for(let E=0;E<T.length;++E){const D=T[E],M=typeof D=="object"&&typeof D.value<"u"?D.value:g[D];if(a&&M===null)continue;const I=h&&o?D.replace(/\./g,"%2E"):D,X=St(g)?typeof n=="function"?n(A,I):A:A+(h?"."+I:"["+I+"]");b.set(t,S);const te=new WeakMap;te.set(ga,b),zu(x,ju(M,X,n,r,s,i,a,o,n==="comma"&&v&&St(g)?null:l,c,f,h,m,u,p,v,_,te))}return x}function xm(t=je){if(typeof t.allowEmptyArrays<"u"&&typeof t.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof t.encodeDotInKeys<"u"&&typeof t.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(t.encoder!==null&&typeof t.encoder<"u"&&typeof t.encoder!="function")throw new TypeError("Encoder has to be a function.");const e=t.charset||je.charset;if(typeof t.charset<"u"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let n=Wu;if(typeof t.format<"u"){if(!Ja(ql,t.format))throw new TypeError("Unknown format option provided.");n=t.format}const r=ql[n];let s=je.filter;(typeof t.filter=="function"||St(t.filter))&&(s=t.filter);let i;if(t.arrayFormat&&t.arrayFormat in qu?i=t.arrayFormat:"indices"in t?i=t.indices?"indices":"repeat":i=je.arrayFormat,"commaRoundTrip"in t&&typeof t.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");const a=typeof t.allowDots>"u"?t.encodeDotInKeys?!0:je.allowDots:!!t.allowDots;return{addQueryPrefix:typeof t.addQueryPrefix=="boolean"?t.addQueryPrefix:je.addQueryPrefix,allowDots:a,allowEmptyArrays:typeof t.allowEmptyArrays=="boolean"?!!t.allowEmptyArrays:je.allowEmptyArrays,arrayFormat:i,charset:e,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:je.charsetSentinel,commaRoundTrip:!!t.commaRoundTrip,delimiter:typeof t.delimiter>"u"?je.delimiter:t.delimiter,encode:typeof t.encode=="boolean"?t.encode:je.encode,encodeDotInKeys:typeof t.encodeDotInKeys=="boolean"?t.encodeDotInKeys:je.encodeDotInKeys,encoder:typeof t.encoder=="function"?t.encoder:je.encoder,encodeValuesOnly:typeof t.encodeValuesOnly=="boolean"?t.encodeValuesOnly:je.encodeValuesOnly,filter:s,format:n,formatter:r,serializeDate:typeof t.serializeDate=="function"?t.serializeDate:je.serializeDate,skipNulls:typeof t.skipNulls=="boolean"?t.skipNulls:je.skipNulls,sort:typeof t.sort=="function"?t.sort:null,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:je.strictNullHandling}}function Cm(t,e={}){let n=t;const r=xm(e);let s,i;typeof r.filter=="function"?(i=r.filter,n=i("",n)):St(r.filter)&&(i=r.filter,s=i);const a=[];if(typeof n!="object"||n===null)return"";const o=qu[r.arrayFormat],l=o==="comma"&&r.commaRoundTrip;s||(s=Object.keys(n)),r.sort&&s.sort(r.sort);const c=new WeakMap;for(let m=0;m<s.length;++m){const u=s[m];r.skipNulls&&n[u]===null||zu(a,ju(n[u],u,o,l,r.allowEmptyArrays,r.strictNullHandling,r.skipNulls,r.encodeDotInKeys,r.encode?r.encoder:null,r.filter,r.sort,r.allowDots,r.serializeDate,r.format,r.formatter,r.encodeValuesOnly,r.charset,c))}const f=a.join(r.delimiter);let h=r.addQueryPrefix===!0?"?":"";return r.charsetSentinel&&(r.charset==="iso-8859-1"?h+="utf8=%26%2310003%3B&":h+="utf8=%E2%9C%93&"),f.length>0?h+f:""}function Em(t){let e=0;for(const s of t)e+=s.length;const n=new Uint8Array(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return n}let Xl;function To(t){let e;return(Xl??(e=new globalThis.TextEncoder,Xl=e.encode.bind(e)))(t)}let Vl;function Jl(t){let e;return(Vl??(e=new globalThis.TextDecoder,Vl=e.decode.bind(e)))(t)}var Et,At;class zi{constructor(){Et.set(this,void 0),At.set(this,void 0),Z(this,Et,new Uint8Array),Z(this,At,null)}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?To(e):e;Z(this,Et,Em([y(this,Et,"f"),n]));const r=[];let s;for(;(s=Am(y(this,Et,"f"),y(this,At,"f")))!=null;){if(s.carriage&&y(this,At,"f")==null){Z(this,At,s.index);continue}if(y(this,At,"f")!=null&&(s.index!==y(this,At,"f")+1||s.carriage)){r.push(Jl(y(this,Et,"f").subarray(0,y(this,At,"f")-1))),Z(this,Et,y(this,Et,"f").subarray(y(this,At,"f"))),Z(this,At,null);continue}const i=y(this,At,"f")!==null?s.preceding-1:s.preceding,a=Jl(y(this,Et,"f").subarray(0,i));r.push(a),Z(this,Et,y(this,Et,"f").subarray(s.index)),Z(this,At,null)}return r}flush(){return y(this,Et,"f").length?this.decode(`
`):[]}}Et=new WeakMap,At=new WeakMap;zi.NEWLINE_CHARS=new Set([`
`,"\r"]);zi.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function Am(t,e){for(let s=e??0;s<t.length;s++){if(t[s]===10)return{preceding:s,index:s+1,carriage:!1};if(t[s]===13)return{preceding:s,index:s+1,carriage:!0}}return null}function Tm(t){for(let r=0;r<t.length-1;r++){if(t[r]===10&&t[r+1]===10||t[r]===13&&t[r+1]===13)return r+2;if(t[r]===13&&t[r+1]===10&&r+3<t.length&&t[r+2]===13&&t[r+3]===10)return r+4}return-1}const Si={off:0,error:200,warn:300,info:400,debug:500},Yl=(t,e,n)=>{if(t){if(um(Si,t))return t;Ze(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(Si))}`)}};function us(){}function Ys(t,e,n){return!e||Si[t]>Si[n]?us:e[t].bind(e)}const Dm={error:us,warn:us,info:us,debug:us};let Kl=new WeakMap;function Ze(t){const e=t.logger,n=t.logLevel??"off";if(!e)return Dm;const r=Kl.get(e);if(r&&r[0]===n)return r[1];const s={error:Ys("error",e,n),warn:Ys("warn",e,n),info:Ys("info",e,n),debug:Ys("debug",e,n)};return Kl.set(e,[n,s]),s}const Yn=t=>(t.options&&(t.options={...t.options},delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);var is;class fn{constructor(e,n,r){this.iterator=e,is.set(this,void 0),this.controller=n,Z(this,is,r)}static fromSSEResponse(e,n,r){let s=!1;const i=r?Ze(r):console;async function*a(){if(s)throw new J("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let o=!1;try{for await(const l of Rm(e,n))if(!o){if(l.data.startsWith("[DONE]")){o=!0;continue}if(l.event===null||!l.event.startsWith("thread.")){let c;try{c=JSON.parse(l.data)}catch(f){throw i.error("Could not parse message into JSON:",l.data),i.error("From chunk:",l.raw),f}if(c&&c.error)throw new rt(void 0,c.error,void 0,e.headers);yield c}else{let c;try{c=JSON.parse(l.data)}catch(f){throw console.error("Could not parse message into JSON:",l.data),console.error("From chunk:",l.raw),f}if(l.event=="error")throw new rt(void 0,c.error,c.message,void 0);yield{event:l.event,data:c}}}o=!0}catch(l){if(Xa(l))return;throw l}finally{o||n.abort()}}return new fn(a,n,r)}static fromReadableStream(e,n,r){let s=!1;async function*i(){const o=new zi,l=Uu(e);for await(const c of l)for(const f of o.decode(c))yield f;for(const c of o.flush())yield c}async function*a(){if(s)throw new J("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let o=!1;try{for await(const l of i())o||l&&(yield JSON.parse(l));o=!0}catch(l){if(Xa(l))return;throw l}finally{o||n.abort()}}return new fn(a,n,r)}[(is=new WeakMap,Symbol.asyncIterator)](){return this.iterator()}tee(){const e=[],n=[],r=this.iterator(),s=i=>({next:()=>{if(i.length===0){const a=r.next();e.push(a),n.push(a)}return i.shift()}});return[new fn(()=>s(e),this.controller,y(this,is,"f")),new fn(()=>s(n),this.controller,y(this,is,"f"))]}toReadableStream(){const e=this;let n;return Lu({async start(){n=e[Symbol.asyncIterator]()},async pull(r){try{const{value:s,done:i}=await n.next();if(i)return r.close();const a=To(JSON.stringify(s)+`
`);r.enqueue(a)}catch(s){r.error(s)}},async cancel(){await n.return?.()}})}}async function*Rm(t,e){if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new J("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new J("Attempted to iterate over a response with no body");const n=new Pm,r=new zi,s=Uu(t.body);for await(const i of Im(s))for(const a of r.decode(i)){const o=n.decode(a);o&&(yield o)}for(const i of r.flush()){const a=n.decode(i);a&&(yield a)}}async function*Im(t){let e=new Uint8Array;for await(const n of t){if(n==null)continue;const r=n instanceof ArrayBuffer?new Uint8Array(n):typeof n=="string"?To(n):n;let s=new Uint8Array(e.length+r.length);s.set(e),s.set(r,e.length),e=s;let i;for(;(i=Tm(e))!==-1;)yield e.slice(0,i),e=e.slice(i)}e.length>0&&(yield e)}class Pm{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const i={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],i}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,r,s]=Om(e,":");return s.startsWith(" ")&&(s=s.substring(1)),n==="event"?this.event=s:n==="data"&&this.data.push(s),null}}function Om(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}async function Xu(t,e){const{response:n,requestLogID:r,retryOfRequestLogID:s,startTime:i}=e,a=await(async()=>{if(e.options.stream)return Ze(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):fn.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const l=n.headers.get("content-type")?.split(";")[0]?.trim();if(l?.includes("application/json")||l?.endsWith("+json")){const h=await n.json();return Vu(h,n)}return await n.text()})();return Ze(t).debug(`[${r}] response parsed`,Yn({retryOfRequestLogID:s,url:n.url,status:n.status,body:a,durationMs:Date.now()-i})),a}function Vu(t,e){return!t||typeof t!="object"||Array.isArray(t)?t:Object.defineProperty(t,"_request_id",{value:e.headers.get("x-request-id"),enumerable:!1})}var ds;class ji extends Promise{constructor(e,n,r=Xu){super(s=>{s(null)}),this.responsePromise=n,this.parseResponse=r,ds.set(this,void 0),Z(this,ds,e)}_thenUnwrap(e){return new ji(y(this,ds,"f"),this.responsePromise,async(n,r)=>Vu(e(await this.parseResponse(n,r),r),r.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n,request_id:n.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(y(this,ds,"f"),e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}ds=new WeakMap;var Ks;class Do{constructor(e,n,r,s){Ks.set(this,void 0),Z(this,Ks,e),this.options=s,this.response=n,this.body=r}hasNextPage(){return this.getPaginatedItems().length?this.nextPageRequestOptions()!=null:!1}async getNextPage(){const e=this.nextPageRequestOptions();if(!e)throw new J("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");return await y(this,Ks,"f").requestAPIList(this.constructor,e)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(Ks=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const n of e.getPaginatedItems())yield n}}class Mm extends ji{constructor(e,n,r){super(e,n,async(s,i)=>new r(s,i.response,await Xu(s,i),i.options))}async*[Symbol.asyncIterator](){const e=await this;for await(const n of e)yield n}}class Xi extends Do{constructor(e,n,r,s){super(e,n,r,s),this.data=r.data||[],this.object=r.object}getPaginatedItems(){return this.data??[]}nextPageRequestOptions(){return null}}class Ue extends Do{constructor(e,n,r,s){super(e,n,r,s),this.data=r.data||[],this.has_more=r.has_more||!1}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){const e=this.getPaginatedItems(),n=e[e.length-1]?.id;return n?{...this.options,query:{...Fu(this.options.query),after:n}}:null}}class $i extends Do{constructor(e,n,r,s){super(e,n,r,s),this.data=r.data||[],this.has_more=r.has_more||!1,this.last_id=r.last_id||""}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){const e=this.last_id;return e?{...this.options,query:{...Fu(this.options.query),after:e}}:null}}const Ju=()=>{if(typeof File>"u"){const{process:t}=globalThis,e=typeof t?.versions?.node=="string"&&parseInt(t.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(e?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function ws(t,e,n){return Ju(),new File(t,e??"unknown_file",n)}function ii(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const Ro=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function",Gl=async(t,e)=>Ya(t.body)?{...t,body:await Yu(t.body,e)}:t,lr=async(t,e)=>({...t,body:await Yu(t.body,e)}),Ql=new WeakMap;function Nm(t){const e=typeof t=="function"?t:t.fetch,n=Ql.get(e);if(n)return n;const r=(async()=>{try{const s="Response"in e?e.Response:(await e("data:,")).constructor,i=new FormData;return i.toString()!==await new s(i).text()}catch{return!0}})();return Ql.set(e,r),r}const Yu=async(t,e)=>{if(!await Nm(e))throw new TypeError("The provided fetch function does not support file uploads with the current global FormData class.");const n=new FormData;return await Promise.all(Object.entries(t||{}).map(([r,s])=>Ka(n,r,s))),n},Ku=t=>t instanceof Blob&&"name"in t,Fm=t=>typeof t=="object"&&t!==null&&(t instanceof Response||Ro(t)||Ku(t)),Ya=t=>{if(Fm(t))return!0;if(Array.isArray(t))return t.some(Ya);if(t&&typeof t=="object"){for(const e in t)if(Ya(t[e]))return!0}return!1},Ka=async(t,e,n)=>{if(n!==void 0){if(n==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")t.append(e,String(n));else if(n instanceof Response)t.append(e,ws([await n.blob()],ii(n)));else if(Ro(n))t.append(e,ws([await new Response(Bu(n)).blob()],ii(n)));else if(Ku(n))t.append(e,n,ii(n));else if(Array.isArray(n))await Promise.all(n.map(r=>Ka(t,e+"[]",r)));else if(typeof n=="object")await Promise.all(Object.entries(n).map(([r,s])=>Ka(t,`${e}[${r}]`,s)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${n} instead`)}},Gu=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",Lm=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&Gu(t),Bm=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function Um(t,e,n){if(Ju(),t=await t,Lm(t))return t instanceof File?t:ws([await t.arrayBuffer()],t.name);if(Bm(t)){const s=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),ws(await Ga(s),e,n)}const r=await Ga(t);if(e||(e=ii(t)),!n?.type){const s=r.find(i=>typeof i=="object"&&"type"in i&&i.type);typeof s=="string"&&(n={...n,type:s})}return ws(r,e,n)}async function Ga(t){let e=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)e.push(t);else if(Gu(t))e.push(t instanceof Blob?t:await t.arrayBuffer());else if(Ro(t))for await(const n of t)e.push(...await Ga(n));else{const n=t?.constructor?.name;throw new Error(`Unexpected data type: ${typeof t}${n?`; constructor: ${n}`:""}${Wm(t)}`)}return e}function Wm(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}class V{constructor(e){this._client=e}}function Qu(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const Zl=Object.freeze(Object.create(null)),Hm=(t=Qu)=>function(n,...r){if(n.length===1)return n[0];let s=!1;const i=[],a=n.reduce((f,h,m)=>{/[?#]/.test(h)&&(s=!0);const u=r[m];let p=(s?encodeURIComponent:t)(""+u);return m!==r.length&&(u==null||typeof u=="object"&&u.toString===Object.getPrototypeOf(Object.getPrototypeOf(u.hasOwnProperty??Zl)??Zl)?.toString)&&(p=u+"",i.push({start:f.length+h.length,length:p.length,error:`Value of type ${Object.prototype.toString.call(u).slice(8,-1)} is not a valid path parameter`})),f+h+(m===r.length?"":p)},""),o=a.split(/[?#]/,1)[0],l=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let c;for(;(c=l.exec(o))!==null;)i.push({start:c.index,length:c[0].length,error:`Value "${c[0]}" can't be safely passed as a path parameter`});if(i.sort((f,h)=>f.start-h.start),i.length>0){let f=0;const h=i.reduce((m,u)=>{const p=" ".repeat(u.start-f),v="^".repeat(u.length);return f=u.start+u.length,m+p+v},"");throw new J(`Path parameters result in path with invalid segments:
${i.map(m=>m.error).join(`
`)}
${a}
${h}`)}return a},R=Hm(Qu);let Zu=class extends V{list(e,n={},r){return this._client.getAPIList(R`/chat/completions/${e}/messages`,Ue,{query:n,...r})}};function ki(t){return t!==void 0&&"function"in t&&t.function!==void 0}function Io(t){return t?.$brand==="auto-parseable-response-format"}function Fs(t){return t?.$brand==="auto-parseable-tool"}function qm(t,e){return!e||!ed(e)?{...t,choices:t.choices.map(n=>(td(n.message.tool_calls),{...n,message:{...n.message,parsed:null,...n.message.tool_calls?{tool_calls:n.message.tool_calls}:void 0}}))}:Po(t,e)}function Po(t,e){const n=t.choices.map(r=>{if(r.finish_reason==="length")throw new Mu;if(r.finish_reason==="content_filter")throw new Nu;return td(r.message.tool_calls),{...r,message:{...r.message,...r.message.tool_calls?{tool_calls:r.message.tool_calls?.map(s=>jm(e,s))??void 0}:void 0,parsed:r.message.content&&!r.message.refusal?zm(e,r.message.content):null}}});return{...t,choices:n}}function zm(t,e){return t.response_format?.type!=="json_schema"?null:t.response_format?.type==="json_schema"?"$parseRaw"in t.response_format?t.response_format.$parseRaw(e):JSON.parse(e):null}function jm(t,e){const n=t.tools?.find(r=>ki(r)&&r.function?.name===e.function.name);return{...e,function:{...e.function,parsed_arguments:Fs(n)?n.$parseRaw(e.function.arguments):n?.function.strict?JSON.parse(e.function.arguments):null}}}function Xm(t,e){if(!t||!("tools"in t)||!t.tools)return!1;const n=t.tools?.find(r=>ki(r)&&r.function?.name===e.function.name);return ki(n)&&(Fs(n)||n?.function.strict||!1)}function ed(t){return Io(t.response_format)?!0:t.tools?.some(e=>Fs(e)||e.type==="function"&&e.function.strict===!0)??!1}function td(t){for(const e of t||[])if(e.type!=="function")throw new J(`Currently only \`function\` tool calls are supported; Received \`${e.type}\``)}function Vm(t){for(const e of t??[]){if(e.type!=="function")throw new J(`Currently only \`function\` tool types support auto-parsing; Received \`${e.type}\``);if(e.function.strict!==!0)throw new J(`The \`${e.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}const xi=t=>t?.role==="assistant",nd=t=>t?.role==="tool";var Qa,ai,oi,fs,hs,li,ps,bn,ms,Ci,Ei,kr,rd;class Oo{constructor(){Qa.add(this),this.controller=new AbortController,ai.set(this,void 0),oi.set(this,()=>{}),fs.set(this,()=>{}),hs.set(this,void 0),li.set(this,()=>{}),ps.set(this,()=>{}),bn.set(this,{}),ms.set(this,!1),Ci.set(this,!1),Ei.set(this,!1),kr.set(this,!1),Z(this,ai,new Promise((e,n)=>{Z(this,oi,e,"f"),Z(this,fs,n,"f")})),Z(this,hs,new Promise((e,n)=>{Z(this,li,e,"f"),Z(this,ps,n,"f")})),y(this,ai,"f").catch(()=>{}),y(this,hs,"f").catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emitFinal(),this._emit("end")},y(this,Qa,"m",rd).bind(this))},0)}_connected(){this.ended||(y(this,oi,"f").call(this),this._emit("connect"))}get ended(){return y(this,ms,"f")}get errored(){return y(this,Ci,"f")}get aborted(){return y(this,Ei,"f")}abort(){this.controller.abort()}on(e,n){return(y(this,bn,"f")[e]||(y(this,bn,"f")[e]=[])).push({listener:n}),this}off(e,n){const r=y(this,bn,"f")[e];if(!r)return this;const s=r.findIndex(i=>i.listener===n);return s>=0&&r.splice(s,1),this}once(e,n){return(y(this,bn,"f")[e]||(y(this,bn,"f")[e]=[])).push({listener:n,once:!0}),this}emitted(e){return new Promise((n,r)=>{Z(this,kr,!0),e!=="error"&&this.once("error",r),this.once(e,n)})}async done(){Z(this,kr,!0),await y(this,hs,"f")}_emit(e,...n){if(y(this,ms,"f"))return;e==="end"&&(Z(this,ms,!0),y(this,li,"f").call(this));const r=y(this,bn,"f")[e];if(r&&(y(this,bn,"f")[e]=r.filter(s=>!s.once),r.forEach(({listener:s})=>s(...n))),e==="abort"){const s=n[0];!y(this,kr,"f")&&!r?.length&&Promise.reject(s),y(this,fs,"f").call(this,s),y(this,ps,"f").call(this,s),this._emit("end");return}if(e==="error"){const s=n[0];!y(this,kr,"f")&&!r?.length&&Promise.reject(s),y(this,fs,"f").call(this,s),y(this,ps,"f").call(this,s),this._emit("end")}}_emitFinal(){}}ai=new WeakMap,oi=new WeakMap,fs=new WeakMap,hs=new WeakMap,li=new WeakMap,ps=new WeakMap,bn=new WeakMap,ms=new WeakMap,Ci=new WeakMap,Ei=new WeakMap,kr=new WeakMap,Qa=new WeakSet,rd=function(e){if(Z(this,Ci,!0),e instanceof Error&&e.name==="AbortError"&&(e=new Ht),e instanceof Ht)return Z(this,Ei,!0),this._emit("abort",e);if(e instanceof J)return this._emit("error",e);if(e instanceof Error){const n=new J(e.message);return n.cause=e,this._emit("error",n)}return this._emit("error",new J(String(e)))};function Jm(t){return typeof t.parse=="function"}var mt,Za,Ai,eo,to,no,sd,id;const Ym=10;class ad extends Oo{constructor(){super(...arguments),mt.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(e){this._chatCompletions.push(e),this._emit("chatCompletion",e);const n=e.choices[0]?.message;return n&&this._addMessage(n),e}_addMessage(e,n=!0){if("content"in e||(e.content=null),this.messages.push(e),n){if(this._emit("message",e),nd(e)&&e.content)this._emit("functionToolCallResult",e.content);else if(xi(e)&&e.tool_calls)for(const r of e.tool_calls)r.type==="function"&&this._emit("functionToolCall",r.function)}}async finalChatCompletion(){await this.done();const e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new J("stream ended without producing a ChatCompletion");return e}async finalContent(){return await this.done(),y(this,mt,"m",Za).call(this)}async finalMessage(){return await this.done(),y(this,mt,"m",Ai).call(this)}async finalFunctionToolCall(){return await this.done(),y(this,mt,"m",eo).call(this)}async finalFunctionToolCallResult(){return await this.done(),y(this,mt,"m",to).call(this)}async totalUsage(){return await this.done(),y(this,mt,"m",no).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){const e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);const n=y(this,mt,"m",Ai).call(this);n&&this._emit("finalMessage",n);const r=y(this,mt,"m",Za).call(this);r&&this._emit("finalContent",r);const s=y(this,mt,"m",eo).call(this);s&&this._emit("finalFunctionToolCall",s);const i=y(this,mt,"m",to).call(this);i!=null&&this._emit("finalFunctionToolCallResult",i),this._chatCompletions.some(a=>a.usage)&&this._emit("totalUsage",y(this,mt,"m",no).call(this))}async _createChatCompletion(e,n,r){const s=r?.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),y(this,mt,"m",sd).call(this,n);const i=await e.chat.completions.create({...n,stream:!1},{...r,signal:this.controller.signal});return this._connected(),this._addChatCompletion(Po(i,n))}async _runChatCompletion(e,n,r){for(const s of n.messages)this._addMessage(s,!1);return await this._createChatCompletion(e,n,r)}async _runTools(e,n,r){const s="tool",{tool_choice:i="auto",stream:a,...o}=n,l=typeof i!="string"&&i.type==="function"&&i?.function?.name,{maxChatCompletions:c=Ym}=r||{},f=n.tools.map(u=>{if(Fs(u)){if(!u.$callback)throw new J("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:u.$callback,name:u.function.name,description:u.function.description||"",parameters:u.function.parameters,parse:u.$parseRaw,strict:!0}}}return u}),h={};for(const u of f)u.type==="function"&&(h[u.function.name||u.function.function.name]=u.function);const m="tools"in n?f.map(u=>u.type==="function"?{type:"function",function:{name:u.function.name||u.function.function.name,parameters:u.function.parameters,description:u.function.description,strict:u.function.strict}}:u):void 0;for(const u of n.messages)this._addMessage(u,!1);for(let u=0;u<c;++u){const v=(await this._createChatCompletion(e,{...o,tool_choice:i,tools:m,messages:[...this.messages]},r)).choices[0]?.message;if(!v)throw new J("missing message in ChatCompletion response");if(!v.tool_calls?.length)return;for(const _ of v.tool_calls){if(_.type!=="function")continue;const b=_.id,{name:g,arguments:k}=_.function,S=h[g];if(S){if(l&&l!==g){const $=`Invalid tool_call: ${JSON.stringify(g)}. ${JSON.stringify(l)} requested. Please try again`;this._addMessage({role:s,tool_call_id:b,content:$});continue}}else{const $=`Invalid tool_call: ${JSON.stringify(g)}. Available options are: ${Object.keys(h).map(A=>JSON.stringify(A)).join(", ")}. Please try again`;this._addMessage({role:s,tool_call_id:b,content:$});continue}let C;try{C=Jm(S)?await S.parse(k):k}catch($){const A=$ instanceof Error?$.message:String($);this._addMessage({role:s,tool_call_id:b,content:A});continue}const x=await S.function(C,this),T=y(this,mt,"m",id).call(this,x);if(this._addMessage({role:s,tool_call_id:b,content:T}),l)return}}}}mt=new WeakSet,Za=function(){return y(this,mt,"m",Ai).call(this).content??null},Ai=function(){let e=this.messages.length;for(;e-- >0;){const n=this.messages[e];if(xi(n))return{...n,content:n.content??null,refusal:n.refusal??null}}throw new J("stream ended without producing a ChatCompletionMessage with role=assistant")},eo=function(){for(let e=this.messages.length-1;e>=0;e--){const n=this.messages[e];if(xi(n)&&n?.tool_calls?.length)return n.tool_calls.filter(r=>r.type==="function").at(-1)?.function}},to=function(){for(let e=this.messages.length-1;e>=0;e--){const n=this.messages[e];if(nd(n)&&n.content!=null&&typeof n.content=="string"&&this.messages.some(r=>r.role==="assistant"&&r.tool_calls?.some(s=>s.type==="function"&&s.id===n.tool_call_id)))return n.content}},no=function(){const e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:n}of this._chatCompletions)n&&(e.completion_tokens+=n.completion_tokens,e.prompt_tokens+=n.prompt_tokens,e.total_tokens+=n.total_tokens);return e},sd=function(e){if(e.n!=null&&e.n>1)throw new J("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},id=function(e){return typeof e=="string"?e:e===void 0?"undefined":JSON.stringify(e)};class Mo extends ad{static runTools(e,n,r){const s=new Mo,i={...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"runTools"}};return s._run(()=>s._runTools(e,n,i)),s}_addMessage(e,n=!0){super._addMessage(e,n),xi(e)&&e.content&&this._emit("content",e.content)}}const od=1,ld=2,cd=4,ud=8,dd=16,fd=32,hd=64,pd=128,md=256,vd=pd|md,_d=dd|fd|vd|hd,gd=od|ld|_d,yd=cd|ud,Km=gd|yd,Je={STR:od,NUM:ld,ARR:cd,OBJ:ud,NULL:dd,BOOL:fd,NAN:hd,INFINITY:pd,MINUS_INFINITY:md,INF:vd,SPECIAL:_d,ATOM:gd,COLLECTION:yd,ALL:Km};class Gm extends Error{}class Qm extends Error{}function Zm(t,e=Je.ALL){if(typeof t!="string")throw new TypeError(`expecting str, got ${typeof t}`);if(!t.trim())throw new Error(`${t} is empty`);return ev(t.trim(),e)}const ev=(t,e)=>{const n=t.length;let r=0;const s=m=>{throw new Gm(`${m} at position ${r}`)},i=m=>{throw new Qm(`${m} at position ${r}`)},a=()=>(h(),r>=n&&s("Unexpected end of input"),t[r]==='"'?o():t[r]==="{"?l():t[r]==="["?c():t.substring(r,r+4)==="null"||Je.NULL&e&&n-r<4&&"null".startsWith(t.substring(r))?(r+=4,null):t.substring(r,r+4)==="true"||Je.BOOL&e&&n-r<4&&"true".startsWith(t.substring(r))?(r+=4,!0):t.substring(r,r+5)==="false"||Je.BOOL&e&&n-r<5&&"false".startsWith(t.substring(r))?(r+=5,!1):t.substring(r,r+8)==="Infinity"||Je.INFINITY&e&&n-r<8&&"Infinity".startsWith(t.substring(r))?(r+=8,1/0):t.substring(r,r+9)==="-Infinity"||Je.MINUS_INFINITY&e&&1<n-r&&n-r<9&&"-Infinity".startsWith(t.substring(r))?(r+=9,-1/0):t.substring(r,r+3)==="NaN"||Je.NAN&e&&n-r<3&&"NaN".startsWith(t.substring(r))?(r+=3,NaN):f()),o=()=>{const m=r;let u=!1;for(r++;r<n&&(t[r]!=='"'||u&&t[r-1]==="\\");)u=t[r]==="\\"?!u:!1,r++;if(t.charAt(r)=='"')try{return JSON.parse(t.substring(m,++r-Number(u)))}catch(p){i(String(p))}else if(Je.STR&e)try{return JSON.parse(t.substring(m,r-Number(u))+'"')}catch{return JSON.parse(t.substring(m,t.lastIndexOf("\\"))+'"')}s("Unterminated string literal")},l=()=>{r++,h();const m={};try{for(;t[r]!=="}";){if(h(),r>=n&&Je.OBJ&e)return m;const u=o();h(),r++;try{const p=a();Object.defineProperty(m,u,{value:p,writable:!0,enumerable:!0,configurable:!0})}catch(p){if(Je.OBJ&e)return m;throw p}h(),t[r]===","&&r++}}catch{if(Je.OBJ&e)return m;s("Expected '}' at end of object")}return r++,m},c=()=>{r++;const m=[];try{for(;t[r]!=="]";)m.push(a()),h(),t[r]===","&&r++}catch{if(Je.ARR&e)return m;s("Expected ']' at end of array")}return r++,m},f=()=>{if(r===0){t==="-"&&Je.NUM&e&&s("Not sure what '-' is");try{return JSON.parse(t)}catch(u){if(Je.NUM&e)try{return t[t.length-1]==="."?JSON.parse(t.substring(0,t.lastIndexOf("."))):JSON.parse(t.substring(0,t.lastIndexOf("e")))}catch{}i(String(u))}}const m=r;for(t[r]==="-"&&r++;t[r]&&!",]}".includes(t[r]);)r++;r==n&&!(Je.NUM&e)&&s("Unterminated number literal");try{return JSON.parse(t.substring(m,r))}catch{t.substring(m,r)==="-"&&Je.NUM&e&&s("Not sure what '-' is");try{return JSON.parse(t.substring(m,t.lastIndexOf("e")))}catch(p){i(String(p))}}},h=()=>{for(;r<n&&` 
\r	`.includes(t[r]);)r++};return a()},ec=t=>Zm(t,Je.ALL^Je.NUM);var ze,wn,wr,In,ya,Gs,wa,ba,Sa,Qs,$a,tc;class As extends ad{constructor(e){super(),ze.add(this),wn.set(this,void 0),wr.set(this,void 0),In.set(this,void 0),Z(this,wn,e),Z(this,wr,[])}get currentChatCompletionSnapshot(){return y(this,In,"f")}static fromReadableStream(e){const n=new As(null);return n._run(()=>n._fromReadableStream(e)),n}static createChatCompletion(e,n,r){const s=new As(n);return s._run(()=>s._runChatCompletion(e,{...n,stream:!0},{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"stream"}})),s}async _createChatCompletion(e,n,r){super._createChatCompletion;const s=r?.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),y(this,ze,"m",ya).call(this);const i=await e.chat.completions.create({...n,stream:!0},{...r,signal:this.controller.signal});this._connected();for await(const a of i)y(this,ze,"m",wa).call(this,a);if(i.controller.signal?.aborted)throw new Ht;return this._addChatCompletion(y(this,ze,"m",Qs).call(this))}async _fromReadableStream(e,n){const r=n?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),y(this,ze,"m",ya).call(this),this._connected();const s=fn.fromReadableStream(e,this.controller);let i;for await(const a of s)i&&i!==a.id&&this._addChatCompletion(y(this,ze,"m",Qs).call(this)),y(this,ze,"m",wa).call(this,a),i=a.id;if(s.controller.signal?.aborted)throw new Ht;return this._addChatCompletion(y(this,ze,"m",Qs).call(this))}[(wn=new WeakMap,wr=new WeakMap,In=new WeakMap,ze=new WeakSet,ya=function(){this.ended||Z(this,In,void 0)},Gs=function(n){let r=y(this,wr,"f")[n.index];return r||(r={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},y(this,wr,"f")[n.index]=r,r)},wa=function(n){if(this.ended)return;const r=y(this,ze,"m",tc).call(this,n);this._emit("chunk",n,r);for(const s of n.choices){const i=r.choices[s.index];s.delta.content!=null&&i.message?.role==="assistant"&&i.message?.content&&(this._emit("content",s.delta.content,i.message.content),this._emit("content.delta",{delta:s.delta.content,snapshot:i.message.content,parsed:i.message.parsed})),s.delta.refusal!=null&&i.message?.role==="assistant"&&i.message?.refusal&&this._emit("refusal.delta",{delta:s.delta.refusal,snapshot:i.message.refusal}),s.logprobs?.content!=null&&i.message?.role==="assistant"&&this._emit("logprobs.content.delta",{content:s.logprobs?.content,snapshot:i.logprobs?.content??[]}),s.logprobs?.refusal!=null&&i.message?.role==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:s.logprobs?.refusal,snapshot:i.logprobs?.refusal??[]});const a=y(this,ze,"m",Gs).call(this,i);i.finish_reason&&(y(this,ze,"m",Sa).call(this,i),a.current_tool_call_index!=null&&y(this,ze,"m",ba).call(this,i,a.current_tool_call_index));for(const o of s.delta.tool_calls??[])a.current_tool_call_index!==o.index&&(y(this,ze,"m",Sa).call(this,i),a.current_tool_call_index!=null&&y(this,ze,"m",ba).call(this,i,a.current_tool_call_index)),a.current_tool_call_index=o.index;for(const o of s.delta.tool_calls??[]){const l=i.message.tool_calls?.[o.index];l?.type&&(l?.type==="function"?this._emit("tool_calls.function.arguments.delta",{name:l.function?.name,index:o.index,arguments:l.function.arguments,parsed_arguments:l.function.parsed_arguments,arguments_delta:o.function?.arguments??""}):(l?.type,void 0))}}},ba=function(n,r){if(y(this,ze,"m",Gs).call(this,n).done_tool_calls.has(r))return;const i=n.message.tool_calls?.[r];if(!i)throw new Error("no tool call snapshot");if(!i.type)throw new Error("tool call snapshot missing `type`");if(i.type==="function"){const a=y(this,wn,"f")?.tools?.find(o=>ki(o)&&o.function.name===i.function.name);this._emit("tool_calls.function.arguments.done",{name:i.function.name,index:r,arguments:i.function.arguments,parsed_arguments:Fs(a)?a.$parseRaw(i.function.arguments):a?.function.strict?JSON.parse(i.function.arguments):null})}else i.type},Sa=function(n){const r=y(this,ze,"m",Gs).call(this,n);if(n.message.content&&!r.content_done){r.content_done=!0;const s=y(this,ze,"m",$a).call(this);this._emit("content.done",{content:n.message.content,parsed:s?s.$parseRaw(n.message.content):null})}n.message.refusal&&!r.refusal_done&&(r.refusal_done=!0,this._emit("refusal.done",{refusal:n.message.refusal})),n.logprobs?.content&&!r.logprobs_content_done&&(r.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:n.logprobs.content})),n.logprobs?.refusal&&!r.logprobs_refusal_done&&(r.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:n.logprobs.refusal}))},Qs=function(){if(this.ended)throw new J("stream has ended, this shouldn't happen");const n=y(this,In,"f");if(!n)throw new J("request ended without sending any chunks");return Z(this,In,void 0),Z(this,wr,[]),tv(n,y(this,wn,"f"))},$a=function(){const n=y(this,wn,"f")?.response_format;return Io(n)?n:null},tc=function(n){var r,s,i,a;let o=y(this,In,"f");const{choices:l,...c}=n;o?Object.assign(o,c):o=Z(this,In,{...c,choices:[]});for(const{delta:f,finish_reason:h,index:m,logprobs:u=null,...p}of n.choices){let v=o.choices[m];if(v||(v=o.choices[m]={finish_reason:h,index:m,message:{},logprobs:u,...p}),u)if(!v.logprobs)v.logprobs=Object.assign({},u);else{const{content:x,refusal:T,...$}=u;Object.assign(v.logprobs,$),x&&((r=v.logprobs).content??(r.content=[]),v.logprobs.content.push(...x)),T&&((s=v.logprobs).refusal??(s.refusal=[]),v.logprobs.refusal.push(...T))}if(h&&(v.finish_reason=h,y(this,wn,"f")&&ed(y(this,wn,"f")))){if(h==="length")throw new Mu;if(h==="content_filter")throw new Nu}if(Object.assign(v,p),!f)continue;const{content:_,refusal:b,function_call:g,role:k,tool_calls:S,...C}=f;if(Object.assign(v.message,C),b&&(v.message.refusal=(v.message.refusal||"")+b),k&&(v.message.role=k),g&&(v.message.function_call?(g.name&&(v.message.function_call.name=g.name),g.arguments&&((i=v.message.function_call).arguments??(i.arguments=""),v.message.function_call.arguments+=g.arguments)):v.message.function_call=g),_&&(v.message.content=(v.message.content||"")+_,!v.message.refusal&&y(this,ze,"m",$a).call(this)&&(v.message.parsed=ec(v.message.content))),S){v.message.tool_calls||(v.message.tool_calls=[]);for(const{index:x,id:T,type:$,function:A,...E}of S){const D=(a=v.message.tool_calls)[x]??(a[x]={});Object.assign(D,E),T&&(D.id=T),$&&(D.type=$),A&&(D.function??(D.function={name:A.name??"",arguments:""})),A?.name&&(D.function.name=A.name),A?.arguments&&(D.function.arguments+=A.arguments,Xm(y(this,wn,"f"),D)&&(D.function.parsed_arguments=ec(D.function.arguments)))}}}return o},Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("chunk",s=>{const i=n.shift();i?i.resolve(s):e.push(s)}),this.on("end",()=>{r=!0;for(const s of n)s.resolve(void 0);n.length=0}),this.on("abort",s=>{r=!0;for(const i of n)i.reject(s);n.length=0}),this.on("error",s=>{r=!0;for(const i of n)i.reject(s);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((i,a)=>n.push({resolve:i,reject:a})).then(i=>i?{value:i,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new fn(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function tv(t,e){const{id:n,choices:r,created:s,model:i,system_fingerprint:a,...o}=t,l={...o,id:n,choices:r.map(({message:c,finish_reason:f,index:h,logprobs:m,...u})=>{if(!f)throw new J(`missing finish_reason for choice ${h}`);const{content:p=null,function_call:v,tool_calls:_,...b}=c,g=c.role;if(!g)throw new J(`missing role for choice ${h}`);if(v){const{arguments:k,name:S}=v;if(k==null)throw new J(`missing function_call.arguments for choice ${h}`);if(!S)throw new J(`missing function_call.name for choice ${h}`);return{...u,message:{content:p,function_call:{arguments:k,name:S},role:g,refusal:c.refusal??null},finish_reason:f,index:h,logprobs:m}}return _?{...u,index:h,finish_reason:f,logprobs:m,message:{...b,role:g,content:p,refusal:c.refusal??null,tool_calls:_.map((k,S)=>{const{function:C,type:x,id:T,...$}=k,{arguments:A,name:E,...D}=C||{};if(T==null)throw new J(`missing choices[${h}].tool_calls[${S}].id
${Zs(t)}`);if(x==null)throw new J(`missing choices[${h}].tool_calls[${S}].type
${Zs(t)}`);if(E==null)throw new J(`missing choices[${h}].tool_calls[${S}].function.name
${Zs(t)}`);if(A==null)throw new J(`missing choices[${h}].tool_calls[${S}].function.arguments
${Zs(t)}`);return{...$,id:T,type:x,function:{...D,name:E,arguments:A}}})}}:{...u,message:{...b,content:p,role:g,refusal:c.refusal??null},finish_reason:f,index:h,logprobs:m}}),created:s,model:i,object:"chat.completion",...a?{system_fingerprint:a}:{}};return qm(l,e)}function Zs(t){return JSON.stringify(t)}class Ti extends As{static fromReadableStream(e){const n=new Ti(null);return n._run(()=>n._fromReadableStream(e)),n}static runTools(e,n,r){const s=new Ti(n),i={...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"runTools"}};return s._run(()=>s._runTools(e,n,i)),s}}let No=class extends V{constructor(){super(...arguments),this.messages=new Zu(this._client)}create(e,n){return this._client.post("/chat/completions",{body:e,...n,stream:e.stream??!1})}retrieve(e,n){return this._client.get(R`/chat/completions/${e}`,n)}update(e,n,r){return this._client.post(R`/chat/completions/${e}`,{body:n,...r})}list(e={},n){return this._client.getAPIList("/chat/completions",Ue,{query:e,...n})}delete(e,n){return this._client.delete(R`/chat/completions/${e}`,n)}parse(e,n){return Vm(e.tools),this._client.chat.completions.create(e,{...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"chat.completions.parse"}})._thenUnwrap(r=>Po(r,e))}runTools(e,n){return e.stream?Ti.runTools(this._client,e,n):Mo.runTools(this._client,e,n)}stream(e,n){return As.createChatCompletion(this._client,e,n)}};No.Messages=Zu;class Fo extends V{constructor(){super(...arguments),this.completions=new No(this._client)}}Fo.Completions=No;const wd=Symbol("brand.privateNullableHeaders");function*nv(t){if(!t)return;if(wd in t){const{values:r,nulls:s}=t;yield*r.entries();for(const i of s)yield[i,null];return}let e=!1,n;t instanceof Headers?n=t.entries():Bl(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let r of n){const s=r[0];if(typeof s!="string")throw new TypeError("expected header name to be a string");const i=Bl(r[1])?r[1]:[r[1]];let a=!1;for(const o of i)o!==void 0&&(e&&!a&&(a=!0,yield[s,null]),yield[s,o])}}const H=t=>{const e=new Headers,n=new Set;for(const r of t){const s=new Set;for(const[i,a]of nv(r)){const o=i.toLowerCase();s.has(o)||(e.delete(i),s.add(o)),a===null?(e.delete(i),n.add(o)):(e.append(i,a),n.delete(o))}}return{[wd]:!0,values:e,nulls:n}};class bd extends V{create(e,n){return this._client.post("/audio/speech",{body:e,...n,headers:H([{Accept:"application/octet-stream"},n?.headers]),__binaryResponse:!0})}}class Sd extends V{create(e,n){return this._client.post("/audio/transcriptions",lr({body:e,...n,stream:e.stream??!1,__metadata:{model:e.model}},this._client))}}class $d extends V{create(e,n){return this._client.post("/audio/translations",lr({body:e,...n,__metadata:{model:e.model}},this._client))}}class Ls extends V{constructor(){super(...arguments),this.transcriptions=new Sd(this._client),this.translations=new $d(this._client),this.speech=new bd(this._client)}}Ls.Transcriptions=Sd;Ls.Translations=$d;Ls.Speech=bd;class kd extends V{create(e,n){return this._client.post("/batches",{body:e,...n})}retrieve(e,n){return this._client.get(R`/batches/${e}`,n)}list(e={},n){return this._client.getAPIList("/batches",Ue,{query:e,...n})}cancel(e,n){return this._client.post(R`/batches/${e}/cancel`,n)}}class xd extends V{create(e,n){return this._client.post("/assistants",{body:e,...n,headers:H([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}retrieve(e,n){return this._client.get(R`/assistants/${e}`,{...n,headers:H([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}update(e,n,r){return this._client.post(R`/assistants/${e}`,{body:n,...r,headers:H([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}list(e={},n){return this._client.getAPIList("/assistants",Ue,{query:e,...n,headers:H([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}delete(e,n){return this._client.delete(R`/assistants/${e}`,{...n,headers:H([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}}let Cd=class extends V{create(e,n){return this._client.post("/realtime/sessions",{body:e,...n,headers:H([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}};class Ed extends V{create(e,n){return this._client.post("/realtime/transcription_sessions",{body:e,...n,headers:H([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}}let Vi=class extends V{constructor(){super(...arguments),this.sessions=new Cd(this._client),this.transcriptionSessions=new Ed(this._client)}};Vi.Sessions=Cd;Vi.TranscriptionSessions=Ed;class Ad extends V{create(e,n){return this._client.post("/chatkit/sessions",{body:e,...n,headers:H([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}cancel(e,n){return this._client.post(R`/chatkit/sessions/${e}/cancel`,{...n,headers:H([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}}let Td=class extends V{retrieve(e,n){return this._client.get(R`/chatkit/threads/${e}`,{...n,headers:H([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}list(e={},n){return this._client.getAPIList("/chatkit/threads",$i,{query:e,...n,headers:H([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}delete(e,n){return this._client.delete(R`/chatkit/threads/${e}`,{...n,headers:H([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}listItems(e,n={},r){return this._client.getAPIList(R`/chatkit/threads/${e}/items`,$i,{query:n,...r,headers:H([{"OpenAI-Beta":"chatkit_beta=v1"},r?.headers])})}};class Ji extends V{constructor(){super(...arguments),this.sessions=new Ad(this._client),this.threads=new Td(this._client)}}Ji.Sessions=Ad;Ji.Threads=Td;class Dd extends V{create(e,n,r){return this._client.post(R`/threads/${e}/messages`,{body:n,...r,headers:H([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}retrieve(e,n,r){const{thread_id:s}=n;return this._client.get(R`/threads/${s}/messages/${e}`,{...r,headers:H([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}update(e,n,r){const{thread_id:s,...i}=n;return this._client.post(R`/threads/${s}/messages/${e}`,{body:i,...r,headers:H([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}list(e,n={},r){return this._client.getAPIList(R`/threads/${e}/messages`,Ue,{query:n,...r,headers:H([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}delete(e,n,r){const{thread_id:s}=n;return this._client.delete(R`/threads/${s}/messages/${e}`,{...r,headers:H([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}}class Rd extends V{retrieve(e,n,r){const{thread_id:s,run_id:i,...a}=n;return this._client.get(R`/threads/${s}/runs/${i}/steps/${e}`,{query:a,...r,headers:H([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}list(e,n,r){const{thread_id:s,...i}=n;return this._client.getAPIList(R`/threads/${s}/runs/${e}/steps`,Ue,{query:i,...r,headers:H([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}}const rv=t=>{if(typeof Buffer<"u"){const e=Buffer.from(t,"base64");return Array.from(new Float32Array(e.buffer,e.byteOffset,e.length/Float32Array.BYTES_PER_ELEMENT))}else{const e=atob(t),n=e.length,r=new Uint8Array(n);for(let s=0;s<n;s++)r[s]=e.charCodeAt(s);return Array.from(new Float32Array(r.buffer))}};var sv={};const br=t=>{if(typeof globalThis.process<"u")return sv?.[t]?.trim()??void 0;if(typeof globalThis.Deno<"u")return globalThis.Deno.env?.get?.(t)?.trim()};var et,er,ro,ln,ci,Vt,tr,Er,Gn,Di,Dt,ui,di,bs,vs,_s,nc,rc,sc,ic,ac,oc,lc;class Ss extends Oo{constructor(){super(...arguments),et.add(this),ro.set(this,[]),ln.set(this,{}),ci.set(this,{}),Vt.set(this,void 0),tr.set(this,void 0),Er.set(this,void 0),Gn.set(this,void 0),Di.set(this,void 0),Dt.set(this,void 0),ui.set(this,void 0),di.set(this,void 0),bs.set(this,void 0)}[(ro=new WeakMap,ln=new WeakMap,ci=new WeakMap,Vt=new WeakMap,tr=new WeakMap,Er=new WeakMap,Gn=new WeakMap,Di=new WeakMap,Dt=new WeakMap,ui=new WeakMap,di=new WeakMap,bs=new WeakMap,et=new WeakSet,Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("event",s=>{const i=n.shift();i?i.resolve(s):e.push(s)}),this.on("end",()=>{r=!0;for(const s of n)s.resolve(void 0);n.length=0}),this.on("abort",s=>{r=!0;for(const i of n)i.reject(s);n.length=0}),this.on("error",s=>{r=!0;for(const i of n)i.reject(s);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((i,a)=>n.push({resolve:i,reject:a})).then(i=>i?{value:i,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(e){const n=new er;return n._run(()=>n._fromReadableStream(e)),n}async _fromReadableStream(e,n){const r=n?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),this._connected();const s=fn.fromReadableStream(e,this.controller);for await(const i of s)y(this,et,"m",vs).call(this,i);if(s.controller.signal?.aborted)throw new Ht;return this._addRun(y(this,et,"m",_s).call(this))}toReadableStream(){return new fn(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(e,n,r,s){const i=new er;return i._run(()=>i._runToolAssistantStream(e,n,r,{...s,headers:{...s?.headers,"X-Stainless-Helper-Method":"stream"}})),i}async _createToolAssistantStream(e,n,r,s){const i=s?.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort()));const a={...r,stream:!0},o=await e.submitToolOutputs(n,a,{...s,signal:this.controller.signal});this._connected();for await(const l of o)y(this,et,"m",vs).call(this,l);if(o.controller.signal?.aborted)throw new Ht;return this._addRun(y(this,et,"m",_s).call(this))}static createThreadAssistantStream(e,n,r){const s=new er;return s._run(()=>s._threadAssistantStream(e,n,{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"stream"}})),s}static createAssistantStream(e,n,r,s){const i=new er;return i._run(()=>i._runAssistantStream(e,n,r,{...s,headers:{...s?.headers,"X-Stainless-Helper-Method":"stream"}})),i}currentEvent(){return y(this,ui,"f")}currentRun(){return y(this,di,"f")}currentMessageSnapshot(){return y(this,Vt,"f")}currentRunStepSnapshot(){return y(this,bs,"f")}async finalRunSteps(){return await this.done(),Object.values(y(this,ln,"f"))}async finalMessages(){return await this.done(),Object.values(y(this,ci,"f"))}async finalRun(){if(await this.done(),!y(this,tr,"f"))throw Error("Final run was not received.");return y(this,tr,"f")}async _createThreadAssistantStream(e,n,r){const s=r?.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort()));const i={...n,stream:!0},a=await e.createAndRun(i,{...r,signal:this.controller.signal});this._connected();for await(const o of a)y(this,et,"m",vs).call(this,o);if(a.controller.signal?.aborted)throw new Ht;return this._addRun(y(this,et,"m",_s).call(this))}async _createAssistantStream(e,n,r,s){const i=s?.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort()));const a={...r,stream:!0},o=await e.create(n,a,{...s,signal:this.controller.signal});this._connected();for await(const l of o)y(this,et,"m",vs).call(this,l);if(o.controller.signal?.aborted)throw new Ht;return this._addRun(y(this,et,"m",_s).call(this))}static accumulateDelta(e,n){for(const[r,s]of Object.entries(n)){if(!e.hasOwnProperty(r)){e[r]=s;continue}let i=e[r];if(i==null){e[r]=s;continue}if(r==="index"||r==="type"){e[r]=s;continue}if(typeof i=="string"&&typeof s=="string")i+=s;else if(typeof i=="number"&&typeof s=="number")i+=s;else if(va(i)&&va(s))i=this.accumulateDelta(i,s);else if(Array.isArray(i)&&Array.isArray(s)){if(i.every(a=>typeof a=="string"||typeof a=="number")){i.push(...s);continue}for(const a of s){if(!va(a))throw new Error(`Expected array delta entry to be an object but got: ${a}`);const o=a.index;if(o==null)throw console.error(a),new Error("Expected array delta entry to have an `index` property");if(typeof o!="number")throw new Error(`Expected array delta entry \`index\` property to be a number but got ${o}`);const l=i[o];l==null?i.push(a):i[o]=this.accumulateDelta(l,a)}continue}else throw Error(`Unhandled record type: ${r}, deltaValue: ${s}, accValue: ${i}`);e[r]=i}return e}_addRun(e){return e}async _threadAssistantStream(e,n,r){return await this._createThreadAssistantStream(n,e,r)}async _runAssistantStream(e,n,r,s){return await this._createAssistantStream(n,e,r,s)}async _runToolAssistantStream(e,n,r,s){return await this._createToolAssistantStream(n,e,r,s)}}er=Ss,vs=function(e){if(!this.ended)switch(Z(this,ui,e),y(this,et,"m",sc).call(this,e),e.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.incomplete":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":y(this,et,"m",lc).call(this,e);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":y(this,et,"m",rc).call(this,e);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":y(this,et,"m",nc).call(this,e);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},_s=function(){if(this.ended)throw new J("stream has ended, this shouldn't happen");if(!y(this,tr,"f"))throw Error("Final run has not been received");return y(this,tr,"f")},nc=function(e){const[n,r]=y(this,et,"m",ac).call(this,e,y(this,Vt,"f"));Z(this,Vt,n),y(this,ci,"f")[n.id]=n;for(const s of r){const i=n.content[s.index];i?.type=="text"&&this._emit("textCreated",i.text)}switch(e.event){case"thread.message.created":this._emit("messageCreated",e.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",e.data.delta,n),e.data.delta.content)for(const s of e.data.delta.content){if(s.type=="text"&&s.text){let i=s.text,a=n.content[s.index];if(a&&a.type=="text")this._emit("textDelta",i,a.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(s.index!=y(this,Er,"f")){if(y(this,Gn,"f"))switch(y(this,Gn,"f").type){case"text":this._emit("textDone",y(this,Gn,"f").text,y(this,Vt,"f"));break;case"image_file":this._emit("imageFileDone",y(this,Gn,"f").image_file,y(this,Vt,"f"));break}Z(this,Er,s.index)}Z(this,Gn,n.content[s.index])}break;case"thread.message.completed":case"thread.message.incomplete":if(y(this,Er,"f")!==void 0){const s=e.data.content[y(this,Er,"f")];if(s)switch(s.type){case"image_file":this._emit("imageFileDone",s.image_file,y(this,Vt,"f"));break;case"text":this._emit("textDone",s.text,y(this,Vt,"f"));break}}y(this,Vt,"f")&&this._emit("messageDone",e.data),Z(this,Vt,void 0)}},rc=function(e){const n=y(this,et,"m",ic).call(this,e);switch(Z(this,bs,n),e.event){case"thread.run.step.created":this._emit("runStepCreated",e.data);break;case"thread.run.step.delta":const r=e.data.delta;if(r.step_details&&r.step_details.type=="tool_calls"&&r.step_details.tool_calls&&n.step_details.type=="tool_calls")for(const i of r.step_details.tool_calls)i.index==y(this,Di,"f")?this._emit("toolCallDelta",i,n.step_details.tool_calls[i.index]):(y(this,Dt,"f")&&this._emit("toolCallDone",y(this,Dt,"f")),Z(this,Di,i.index),Z(this,Dt,n.step_details.tool_calls[i.index]),y(this,Dt,"f")&&this._emit("toolCallCreated",y(this,Dt,"f")));this._emit("runStepDelta",e.data.delta,n);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":Z(this,bs,void 0),e.data.step_details.type=="tool_calls"&&y(this,Dt,"f")&&(this._emit("toolCallDone",y(this,Dt,"f")),Z(this,Dt,void 0)),this._emit("runStepDone",e.data,n);break}},sc=function(e){y(this,ro,"f").push(e),this._emit("event",e)},ic=function(e){switch(e.event){case"thread.run.step.created":return y(this,ln,"f")[e.data.id]=e.data,e.data;case"thread.run.step.delta":let n=y(this,ln,"f")[e.data.id];if(!n)throw Error("Received a RunStepDelta before creation of a snapshot");let r=e.data;if(r.delta){const s=er.accumulateDelta(n,r.delta);y(this,ln,"f")[e.data.id]=s}return y(this,ln,"f")[e.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":y(this,ln,"f")[e.data.id]=e.data;break}if(y(this,ln,"f")[e.data.id])return y(this,ln,"f")[e.data.id];throw new Error("No snapshot available")},ac=function(e,n){let r=[];switch(e.event){case"thread.message.created":return[e.data,r];case"thread.message.delta":if(!n)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let s=e.data;if(s.delta.content)for(const i of s.delta.content)if(i.index in n.content){let a=n.content[i.index];n.content[i.index]=y(this,et,"m",oc).call(this,i,a)}else n.content[i.index]=i,r.push(i);return[n,r];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(n)return[n,r];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},oc=function(e,n){return er.accumulateDelta(n,e)},lc=function(e){switch(Z(this,di,e.data),e.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":case"thread.run.incomplete":Z(this,tr,e.data),y(this,Dt,"f")&&(this._emit("toolCallDone",y(this,Dt,"f")),Z(this,Dt,void 0));break}};let Lo=class extends V{constructor(){super(...arguments),this.steps=new Rd(this._client)}create(e,n,r){const{include:s,...i}=n;return this._client.post(R`/threads/${e}/runs`,{query:{include:s},body:i,...r,headers:H([{"OpenAI-Beta":"assistants=v2"},r?.headers]),stream:n.stream??!1})}retrieve(e,n,r){const{thread_id:s}=n;return this._client.get(R`/threads/${s}/runs/${e}`,{...r,headers:H([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}update(e,n,r){const{thread_id:s,...i}=n;return this._client.post(R`/threads/${s}/runs/${e}`,{body:i,...r,headers:H([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}list(e,n={},r){return this._client.getAPIList(R`/threads/${e}/runs`,Ue,{query:n,...r,headers:H([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}cancel(e,n,r){const{thread_id:s}=n;return this._client.post(R`/threads/${s}/runs/${e}/cancel`,{...r,headers:H([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}async createAndPoll(e,n,r){const s=await this.create(e,n,r);return await this.poll(s.id,{thread_id:e},r)}createAndStream(e,n,r){return Ss.createAssistantStream(e,this._client.beta.threads.runs,n,r)}async poll(e,n,r){const s=H([r?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":r?.pollIntervalMs?.toString()??void 0}]);for(;;){const{data:i,response:a}=await this.retrieve(e,n,{...r,headers:{...r?.headers,...s}}).withResponse();switch(i.status){case"queued":case"in_progress":case"cancelling":let o=5e3;if(r?.pollIntervalMs)o=r.pollIntervalMs;else{const l=a.headers.get("openai-poll-after-ms");if(l){const c=parseInt(l);isNaN(c)||(o=c)}}await Ns(o);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return i}}}stream(e,n,r){return Ss.createAssistantStream(e,this._client.beta.threads.runs,n,r)}submitToolOutputs(e,n,r){const{thread_id:s,...i}=n;return this._client.post(R`/threads/${s}/runs/${e}/submit_tool_outputs`,{body:i,...r,headers:H([{"OpenAI-Beta":"assistants=v2"},r?.headers]),stream:n.stream??!1})}async submitToolOutputsAndPoll(e,n,r){const s=await this.submitToolOutputs(e,n,r);return await this.poll(s.id,n,r)}submitToolOutputsStream(e,n,r){return Ss.createToolAssistantStream(e,this._client.beta.threads.runs,n,r)}};Lo.Steps=Rd;class Yi extends V{constructor(){super(...arguments),this.runs=new Lo(this._client),this.messages=new Dd(this._client)}create(e={},n){return this._client.post("/threads",{body:e,...n,headers:H([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}retrieve(e,n){return this._client.get(R`/threads/${e}`,{...n,headers:H([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}update(e,n,r){return this._client.post(R`/threads/${e}`,{body:n,...r,headers:H([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}delete(e,n){return this._client.delete(R`/threads/${e}`,{...n,headers:H([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}createAndRun(e,n){return this._client.post("/threads/runs",{body:e,...n,headers:H([{"OpenAI-Beta":"assistants=v2"},n?.headers]),stream:e.stream??!1})}async createAndRunPoll(e,n){const r=await this.createAndRun(e,n);return await this.runs.poll(r.id,{thread_id:r.thread_id},n)}createAndRunStream(e,n){return Ss.createThreadAssistantStream(e,this._client.beta.threads,n)}}Yi.Runs=Lo;Yi.Messages=Dd;class zr extends V{constructor(){super(...arguments),this.realtime=new Vi(this._client),this.chatkit=new Ji(this._client),this.assistants=new xd(this._client),this.threads=new Yi(this._client)}}zr.Realtime=Vi;zr.ChatKit=Ji;zr.Assistants=xd;zr.Threads=Yi;class Id extends V{create(e,n){return this._client.post("/completions",{body:e,...n,stream:e.stream??!1})}}class Pd extends V{retrieve(e,n,r){const{container_id:s}=n;return this._client.get(R`/containers/${s}/files/${e}/content`,{...r,headers:H([{Accept:"application/binary"},r?.headers]),__binaryResponse:!0})}}let Bo=class extends V{constructor(){super(...arguments),this.content=new Pd(this._client)}create(e,n,r){return this._client.post(R`/containers/${e}/files`,lr({body:n,...r},this._client))}retrieve(e,n,r){const{container_id:s}=n;return this._client.get(R`/containers/${s}/files/${e}`,r)}list(e,n={},r){return this._client.getAPIList(R`/containers/${e}/files`,Ue,{query:n,...r})}delete(e,n,r){const{container_id:s}=n;return this._client.delete(R`/containers/${s}/files/${e}`,{...r,headers:H([{Accept:"*/*"},r?.headers])})}};Bo.Content=Pd;class Uo extends V{constructor(){super(...arguments),this.files=new Bo(this._client)}create(e,n){return this._client.post("/containers",{body:e,...n})}retrieve(e,n){return this._client.get(R`/containers/${e}`,n)}list(e={},n){return this._client.getAPIList("/containers",Ue,{query:e,...n})}delete(e,n){return this._client.delete(R`/containers/${e}`,{...n,headers:H([{Accept:"*/*"},n?.headers])})}}Uo.Files=Bo;class Od extends V{create(e,n,r){const{include:s,...i}=n;return this._client.post(R`/conversations/${e}/items`,{query:{include:s},body:i,...r})}retrieve(e,n,r){const{conversation_id:s,...i}=n;return this._client.get(R`/conversations/${s}/items/${e}`,{query:i,...r})}list(e,n={},r){return this._client.getAPIList(R`/conversations/${e}/items`,$i,{query:n,...r})}delete(e,n,r){const{conversation_id:s}=n;return this._client.delete(R`/conversations/${s}/items/${e}`,r)}}class Wo extends V{constructor(){super(...arguments),this.items=new Od(this._client)}create(e={},n){return this._client.post("/conversations",{body:e,...n})}retrieve(e,n){return this._client.get(R`/conversations/${e}`,n)}update(e,n,r){return this._client.post(R`/conversations/${e}`,{body:n,...r})}delete(e,n){return this._client.delete(R`/conversations/${e}`,n)}}Wo.Items=Od;class Md extends V{create(e,n){const r=!!e.encoding_format;let s=r?e.encoding_format:"base64";r&&Ze(this._client).debug("embeddings/user defined encoding_format:",e.encoding_format);const i=this._client.post("/embeddings",{body:{...e,encoding_format:s},...n});return r?i:(Ze(this._client).debug("embeddings/decoding base64 embeddings from base64"),i._thenUnwrap(a=>(a&&a.data&&a.data.forEach(o=>{const l=o.embedding;o.embedding=rv(l)}),a)))}}class Nd extends V{retrieve(e,n,r){const{eval_id:s,run_id:i}=n;return this._client.get(R`/evals/${s}/runs/${i}/output_items/${e}`,r)}list(e,n,r){const{eval_id:s,...i}=n;return this._client.getAPIList(R`/evals/${s}/runs/${e}/output_items`,Ue,{query:i,...r})}}class Ho extends V{constructor(){super(...arguments),this.outputItems=new Nd(this._client)}create(e,n,r){return this._client.post(R`/evals/${e}/runs`,{body:n,...r})}retrieve(e,n,r){const{eval_id:s}=n;return this._client.get(R`/evals/${s}/runs/${e}`,r)}list(e,n={},r){return this._client.getAPIList(R`/evals/${e}/runs`,Ue,{query:n,...r})}delete(e,n,r){const{eval_id:s}=n;return this._client.delete(R`/evals/${s}/runs/${e}`,r)}cancel(e,n,r){const{eval_id:s}=n;return this._client.post(R`/evals/${s}/runs/${e}`,r)}}Ho.OutputItems=Nd;class qo extends V{constructor(){super(...arguments),this.runs=new Ho(this._client)}create(e,n){return this._client.post("/evals",{body:e,...n})}retrieve(e,n){return this._client.get(R`/evals/${e}`,n)}update(e,n,r){return this._client.post(R`/evals/${e}`,{body:n,...r})}list(e={},n){return this._client.getAPIList("/evals",Ue,{query:e,...n})}delete(e,n){return this._client.delete(R`/evals/${e}`,n)}}qo.Runs=Ho;let Fd=class extends V{create(e,n){return this._client.post("/files",lr({body:e,...n},this._client))}retrieve(e,n){return this._client.get(R`/files/${e}`,n)}list(e={},n){return this._client.getAPIList("/files",Ue,{query:e,...n})}delete(e,n){return this._client.delete(R`/files/${e}`,n)}content(e,n){return this._client.get(R`/files/${e}/content`,{...n,headers:H([{Accept:"application/binary"},n?.headers]),__binaryResponse:!0})}async waitForProcessing(e,{pollInterval:n=5e3,maxWait:r=1800*1e3}={}){const s=new Set(["processed","error","deleted"]),i=Date.now();let a=await this.retrieve(e);for(;!a.status||!s.has(a.status);)if(await Ns(n),a=await this.retrieve(e),Date.now()-i>r)throw new Ao({message:`Giving up on waiting for file ${e} to finish processing after ${r} milliseconds.`});return a}};class Ld extends V{}let Bd=class extends V{run(e,n){return this._client.post("/fine_tuning/alpha/graders/run",{body:e,...n})}validate(e,n){return this._client.post("/fine_tuning/alpha/graders/validate",{body:e,...n})}};class zo extends V{constructor(){super(...arguments),this.graders=new Bd(this._client)}}zo.Graders=Bd;class Ud extends V{create(e,n,r){return this._client.getAPIList(R`/fine_tuning/checkpoints/${e}/permissions`,Xi,{body:n,method:"post",...r})}retrieve(e,n={},r){return this._client.get(R`/fine_tuning/checkpoints/${e}/permissions`,{query:n,...r})}delete(e,n,r){const{fine_tuned_model_checkpoint:s}=n;return this._client.delete(R`/fine_tuning/checkpoints/${s}/permissions/${e}`,r)}}let jo=class extends V{constructor(){super(...arguments),this.permissions=new Ud(this._client)}};jo.Permissions=Ud;class Wd extends V{list(e,n={},r){return this._client.getAPIList(R`/fine_tuning/jobs/${e}/checkpoints`,Ue,{query:n,...r})}}class Xo extends V{constructor(){super(...arguments),this.checkpoints=new Wd(this._client)}create(e,n){return this._client.post("/fine_tuning/jobs",{body:e,...n})}retrieve(e,n){return this._client.get(R`/fine_tuning/jobs/${e}`,n)}list(e={},n){return this._client.getAPIList("/fine_tuning/jobs",Ue,{query:e,...n})}cancel(e,n){return this._client.post(R`/fine_tuning/jobs/${e}/cancel`,n)}listEvents(e,n={},r){return this._client.getAPIList(R`/fine_tuning/jobs/${e}/events`,Ue,{query:n,...r})}pause(e,n){return this._client.post(R`/fine_tuning/jobs/${e}/pause`,n)}resume(e,n){return this._client.post(R`/fine_tuning/jobs/${e}/resume`,n)}}Xo.Checkpoints=Wd;class jr extends V{constructor(){super(...arguments),this.methods=new Ld(this._client),this.jobs=new Xo(this._client),this.checkpoints=new jo(this._client),this.alpha=new zo(this._client)}}jr.Methods=Ld;jr.Jobs=Xo;jr.Checkpoints=jo;jr.Alpha=zo;class Hd extends V{}class Vo extends V{constructor(){super(...arguments),this.graderModels=new Hd(this._client)}}Vo.GraderModels=Hd;class qd extends V{createVariation(e,n){return this._client.post("/images/variations",lr({body:e,...n},this._client))}edit(e,n){return this._client.post("/images/edits",lr({body:e,...n,stream:e.stream??!1},this._client))}generate(e,n){return this._client.post("/images/generations",{body:e,...n,stream:e.stream??!1})}}class zd extends V{retrieve(e,n){return this._client.get(R`/models/${e}`,n)}list(e){return this._client.getAPIList("/models",Xi,e)}delete(e,n){return this._client.delete(R`/models/${e}`,n)}}class jd extends V{create(e,n){return this._client.post("/moderations",{body:e,...n})}}class Xd extends V{accept(e,n,r){return this._client.post(R`/realtime/calls/${e}/accept`,{body:n,...r,headers:H([{Accept:"*/*"},r?.headers])})}hangup(e,n){return this._client.post(R`/realtime/calls/${e}/hangup`,{...n,headers:H([{Accept:"*/*"},n?.headers])})}refer(e,n,r){return this._client.post(R`/realtime/calls/${e}/refer`,{body:n,...r,headers:H([{Accept:"*/*"},r?.headers])})}reject(e,n={},r){return this._client.post(R`/realtime/calls/${e}/reject`,{body:n,...r,headers:H([{Accept:"*/*"},r?.headers])})}}class Vd extends V{create(e,n){return this._client.post("/realtime/client_secrets",{body:e,...n})}}class Ki extends V{constructor(){super(...arguments),this.clientSecrets=new Vd(this._client),this.calls=new Xd(this._client)}}Ki.ClientSecrets=Vd;Ki.Calls=Xd;function iv(t,e){return!e||!ov(e)?{...t,output_parsed:null,output:t.output.map(n=>n.type==="function_call"?{...n,parsed_arguments:null}:n.type==="message"?{...n,content:n.content.map(r=>({...r,parsed:null}))}:n)}:Jd(t,e)}function Jd(t,e){const n=t.output.map(s=>{if(s.type==="function_call")return{...s,parsed_arguments:uv(e,s)};if(s.type==="message"){const i=s.content.map(a=>a.type==="output_text"?{...a,parsed:av(e,a.text)}:a);return{...s,content:i}}return s}),r=Object.assign({},t,{output:n});return Object.getOwnPropertyDescriptor(t,"output_text")||so(r),Object.defineProperty(r,"output_parsed",{enumerable:!0,get(){for(const s of r.output)if(s.type==="message"){for(const i of s.content)if(i.type==="output_text"&&i.parsed!==null)return i.parsed}return null}}),r}function av(t,e){return t.text?.format?.type!=="json_schema"?null:"$parseRaw"in t.text?.format?(t.text?.format).$parseRaw(e):JSON.parse(e)}function ov(t){return!!Io(t.text?.format)}function lv(t){return t?.$brand==="auto-parseable-tool"}function cv(t,e){return t.find(n=>n.type==="function"&&n.name===e)}function uv(t,e){const n=cv(t.tools??[],e.name);return{...e,...e,parsed_arguments:lv(n)?n.$parseRaw(e.arguments):n?.strict?JSON.parse(e.arguments):null}}function so(t){const e=[];for(const n of t.output)if(n.type==="message")for(const r of n.content)r.type==="output_text"&&e.push(r.text);t.output_text=e.join("")}var Sr,ei,Pn,ti,cc,uc,dc,fc;class Jo extends Oo{constructor(e){super(),Sr.add(this),ei.set(this,void 0),Pn.set(this,void 0),ti.set(this,void 0),Z(this,ei,e)}static createResponse(e,n,r){const s=new Jo(n);return s._run(()=>s._createOrRetrieveResponse(e,n,{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"stream"}})),s}async _createOrRetrieveResponse(e,n,r){const s=r?.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),y(this,Sr,"m",cc).call(this);let i,a=null;"response_id"in n?(i=await e.responses.retrieve(n.response_id,{stream:!0},{...r,signal:this.controller.signal,stream:!0}),a=n.starting_after??null):i=await e.responses.create({...n,stream:!0},{...r,signal:this.controller.signal}),this._connected();for await(const o of i)y(this,Sr,"m",uc).call(this,o,a);if(i.controller.signal?.aborted)throw new Ht;return y(this,Sr,"m",dc).call(this)}[(ei=new WeakMap,Pn=new WeakMap,ti=new WeakMap,Sr=new WeakSet,cc=function(){this.ended||Z(this,Pn,void 0)},uc=function(n,r){if(this.ended)return;const s=(a,o)=>{(r==null||o.sequence_number>r)&&this._emit(a,o)},i=y(this,Sr,"m",fc).call(this,n);switch(s("event",n),n.type){case"response.output_text.delta":{const a=i.output[n.output_index];if(!a)throw new J(`missing output at index ${n.output_index}`);if(a.type==="message"){const o=a.content[n.content_index];if(!o)throw new J(`missing content at index ${n.content_index}`);if(o.type!=="output_text")throw new J(`expected content to be 'output_text', got ${o.type}`);s("response.output_text.delta",{...n,snapshot:o.text})}break}case"response.function_call_arguments.delta":{const a=i.output[n.output_index];if(!a)throw new J(`missing output at index ${n.output_index}`);a.type==="function_call"&&s("response.function_call_arguments.delta",{...n,snapshot:a.arguments});break}default:s(n.type,n);break}},dc=function(){if(this.ended)throw new J("stream has ended, this shouldn't happen");const n=y(this,Pn,"f");if(!n)throw new J("request ended without sending any events");Z(this,Pn,void 0);const r=dv(n,y(this,ei,"f"));return Z(this,ti,r),r},fc=function(n){let r=y(this,Pn,"f");if(!r){if(n.type!=="response.created")throw new J(`When snapshot hasn't been set yet, expected 'response.created' event, got ${n.type}`);return r=Z(this,Pn,n.response),r}switch(n.type){case"response.output_item.added":{r.output.push(n.item);break}case"response.content_part.added":{const s=r.output[n.output_index];if(!s)throw new J(`missing output at index ${n.output_index}`);const i=s.type,a=n.part;i==="message"&&a.type!=="reasoning_text"?s.content.push(a):i==="reasoning"&&a.type==="reasoning_text"&&(s.content||(s.content=[]),s.content.push(a));break}case"response.output_text.delta":{const s=r.output[n.output_index];if(!s)throw new J(`missing output at index ${n.output_index}`);if(s.type==="message"){const i=s.content[n.content_index];if(!i)throw new J(`missing content at index ${n.content_index}`);if(i.type!=="output_text")throw new J(`expected content to be 'output_text', got ${i.type}`);i.text+=n.delta}break}case"response.function_call_arguments.delta":{const s=r.output[n.output_index];if(!s)throw new J(`missing output at index ${n.output_index}`);s.type==="function_call"&&(s.arguments+=n.delta);break}case"response.reasoning_text.delta":{const s=r.output[n.output_index];if(!s)throw new J(`missing output at index ${n.output_index}`);if(s.type==="reasoning"){const i=s.content?.[n.content_index];if(!i)throw new J(`missing content at index ${n.content_index}`);if(i.type!=="reasoning_text")throw new J(`expected content to be 'reasoning_text', got ${i.type}`);i.text+=n.delta}break}case"response.completed":{Z(this,Pn,n.response);break}}return r},Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("event",s=>{const i=n.shift();i?i.resolve(s):e.push(s)}),this.on("end",()=>{r=!0;for(const s of n)s.resolve(void 0);n.length=0}),this.on("abort",s=>{r=!0;for(const i of n)i.reject(s);n.length=0}),this.on("error",s=>{r=!0;for(const i of n)i.reject(s);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((i,a)=>n.push({resolve:i,reject:a})).then(i=>i?{value:i,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}async finalResponse(){await this.done();const e=y(this,ti,"f");if(!e)throw new J("stream ended without producing a ChatCompletion");return e}}function dv(t,e){return iv(t,e)}class Yd extends V{list(e,n={},r){return this._client.getAPIList(R`/responses/${e}/input_items`,Ue,{query:n,...r})}}class Yo extends V{constructor(){super(...arguments),this.inputItems=new Yd(this._client)}create(e,n){return this._client.post("/responses",{body:e,...n,stream:e.stream??!1})._thenUnwrap(r=>("object"in r&&r.object==="response"&&so(r),r))}retrieve(e,n={},r){return this._client.get(R`/responses/${e}`,{query:n,...r,stream:n?.stream??!1})._thenUnwrap(s=>("object"in s&&s.object==="response"&&so(s),s))}delete(e,n){return this._client.delete(R`/responses/${e}`,{...n,headers:H([{Accept:"*/*"},n?.headers])})}parse(e,n){return this._client.responses.create(e,n)._thenUnwrap(r=>Jd(r,e))}stream(e,n){return Jo.createResponse(this._client,e,n)}cancel(e,n){return this._client.post(R`/responses/${e}/cancel`,n)}}Yo.InputItems=Yd;class Kd extends V{create(e,n,r){return this._client.post(R`/uploads/${e}/parts`,lr({body:n,...r},this._client))}}class Ko extends V{constructor(){super(...arguments),this.parts=new Kd(this._client)}create(e,n){return this._client.post("/uploads",{body:e,...n})}cancel(e,n){return this._client.post(R`/uploads/${e}/cancel`,n)}complete(e,n,r){return this._client.post(R`/uploads/${e}/complete`,{body:n,...r})}}Ko.Parts=Kd;const fv=async t=>{const e=await Promise.allSettled(t),n=e.filter(s=>s.status==="rejected");if(n.length){for(const s of n)console.error(s.reason);throw new Error(`${n.length} promise(s) failed - see the above errors`)}const r=[];for(const s of e)s.status==="fulfilled"&&r.push(s.value);return r};class Gd extends V{create(e,n,r){return this._client.post(R`/vector_stores/${e}/file_batches`,{body:n,...r,headers:H([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}retrieve(e,n,r){const{vector_store_id:s}=n;return this._client.get(R`/vector_stores/${s}/file_batches/${e}`,{...r,headers:H([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}cancel(e,n,r){const{vector_store_id:s}=n;return this._client.post(R`/vector_stores/${s}/file_batches/${e}/cancel`,{...r,headers:H([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}async createAndPoll(e,n,r){const s=await this.create(e,n);return await this.poll(e,s.id,r)}listFiles(e,n,r){const{vector_store_id:s,...i}=n;return this._client.getAPIList(R`/vector_stores/${s}/file_batches/${e}/files`,Ue,{query:i,...r,headers:H([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}async poll(e,n,r){const s=H([r?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":r?.pollIntervalMs?.toString()??void 0}]);for(;;){const{data:i,response:a}=await this.retrieve(n,{vector_store_id:e},{...r,headers:s}).withResponse();switch(i.status){case"in_progress":let o=5e3;if(r?.pollIntervalMs)o=r.pollIntervalMs;else{const l=a.headers.get("openai-poll-after-ms");if(l){const c=parseInt(l);isNaN(c)||(o=c)}}await Ns(o);break;case"failed":case"cancelled":case"completed":return i}}}async uploadAndPoll(e,{files:n,fileIds:r=[]},s){if(n==null||n.length==0)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");const i=s?.maxConcurrency??5,a=Math.min(i,n.length),o=this._client,l=n.values(),c=[...r];async function f(m){for(let u of m){const p=await o.files.create({file:u,purpose:"assistants"},s);c.push(p.id)}}const h=Array(a).fill(l).map(f);return await fv(h),await this.createAndPoll(e,{file_ids:c})}}class Qd extends V{create(e,n,r){return this._client.post(R`/vector_stores/${e}/files`,{body:n,...r,headers:H([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}retrieve(e,n,r){const{vector_store_id:s}=n;return this._client.get(R`/vector_stores/${s}/files/${e}`,{...r,headers:H([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}update(e,n,r){const{vector_store_id:s,...i}=n;return this._client.post(R`/vector_stores/${s}/files/${e}`,{body:i,...r,headers:H([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}list(e,n={},r){return this._client.getAPIList(R`/vector_stores/${e}/files`,Ue,{query:n,...r,headers:H([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}delete(e,n,r){const{vector_store_id:s}=n;return this._client.delete(R`/vector_stores/${s}/files/${e}`,{...r,headers:H([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}async createAndPoll(e,n,r){const s=await this.create(e,n,r);return await this.poll(e,s.id,r)}async poll(e,n,r){const s=H([r?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":r?.pollIntervalMs?.toString()??void 0}]);for(;;){const i=await this.retrieve(n,{vector_store_id:e},{...r,headers:s}).withResponse(),a=i.data;switch(a.status){case"in_progress":let o=5e3;if(r?.pollIntervalMs)o=r.pollIntervalMs;else{const l=i.response.headers.get("openai-poll-after-ms");if(l){const c=parseInt(l);isNaN(c)||(o=c)}}await Ns(o);break;case"failed":case"completed":return a}}}async upload(e,n,r){const s=await this._client.files.create({file:n,purpose:"assistants"},r);return this.create(e,{file_id:s.id},r)}async uploadAndPoll(e,n,r){const s=await this.upload(e,n,r);return await this.poll(e,s.id,r)}content(e,n,r){const{vector_store_id:s}=n;return this._client.getAPIList(R`/vector_stores/${s}/files/${e}/content`,Xi,{...r,headers:H([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}}class Gi extends V{constructor(){super(...arguments),this.files=new Qd(this._client),this.fileBatches=new Gd(this._client)}create(e,n){return this._client.post("/vector_stores",{body:e,...n,headers:H([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}retrieve(e,n){return this._client.get(R`/vector_stores/${e}`,{...n,headers:H([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}update(e,n,r){return this._client.post(R`/vector_stores/${e}`,{body:n,...r,headers:H([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}list(e={},n){return this._client.getAPIList("/vector_stores",Ue,{query:e,...n,headers:H([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}delete(e,n){return this._client.delete(R`/vector_stores/${e}`,{...n,headers:H([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}search(e,n,r){return this._client.getAPIList(R`/vector_stores/${e}/search`,Xi,{body:n,method:"post",...r,headers:H([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}}Gi.Files=Qd;Gi.FileBatches=Gd;class Zd extends V{create(e,n){return this._client.post("/videos",Gl({body:e,...n},this._client))}retrieve(e,n){return this._client.get(R`/videos/${e}`,n)}list(e={},n){return this._client.getAPIList("/videos",$i,{query:e,...n})}delete(e,n){return this._client.delete(R`/videos/${e}`,n)}downloadContent(e,n={},r){return this._client.get(R`/videos/${e}/content`,{query:n,...r,headers:H([{Accept:"application/binary"},r?.headers]),__binaryResponse:!0})}remix(e,n,r){return this._client.post(R`/videos/${e}/remix`,Gl({body:n,...r},this._client))}}var xr,ef,fi;class tf extends V{constructor(){super(...arguments),xr.add(this)}async unwrap(e,n,r=this._client.webhookSecret,s=300){return await this.verifySignature(e,n,r,s),JSON.parse(e)}async verifySignature(e,n,r=this._client.webhookSecret,s=300){if(typeof crypto>"u"||typeof crypto.subtle.importKey!="function"||typeof crypto.subtle.verify!="function")throw new Error("Webhook signature verification is only supported when the `crypto` global is defined");y(this,xr,"m",ef).call(this,r);const i=H([n]).values,a=y(this,xr,"m",fi).call(this,i,"webhook-signature"),o=y(this,xr,"m",fi).call(this,i,"webhook-timestamp"),l=y(this,xr,"m",fi).call(this,i,"webhook-id"),c=parseInt(o,10);if(isNaN(c))throw new cs("Invalid webhook timestamp format");const f=Math.floor(Date.now()/1e3);if(f-c>s)throw new cs("Webhook timestamp is too old");if(c>f+s)throw new cs("Webhook timestamp is too new");const h=a.split(" ").map(v=>v.startsWith("v1,")?v.substring(3):v),m=r.startsWith("whsec_")?Buffer.from(r.replace("whsec_",""),"base64"):Buffer.from(r,"utf-8"),u=l?`${l}.${o}.${e}`:`${o}.${e}`,p=await crypto.subtle.importKey("raw",m,{name:"HMAC",hash:"SHA-256"},!1,["verify"]);for(const v of h)try{const _=Buffer.from(v,"base64");if(await crypto.subtle.verify("HMAC",p,_,new TextEncoder().encode(u)))return}catch{continue}throw new cs("The given webhook signature does not match the expected signature")}}xr=new WeakSet,ef=function(e){if(typeof e!="string"||e.length===0)throw new Error("The webhook secret must either be set using the env var, OPENAI_WEBHOOK_SECRET, on the client class, OpenAI({ webhookSecret: '123' }), or passed to this function")},fi=function(e,n){if(!e)throw new Error("Headers are required");const r=e.get(n);if(r==null)throw new Error(`Missing required header: ${n}`);return r};var io,Go,hi,nf;class ue{constructor({baseURL:e=br("OPENAI_BASE_URL"),apiKey:n=br("OPENAI_API_KEY"),organization:r=br("OPENAI_ORG_ID")??null,project:s=br("OPENAI_PROJECT_ID")??null,webhookSecret:i=br("OPENAI_WEBHOOK_SECRET")??null,...a}={}){if(io.add(this),hi.set(this,void 0),this.completions=new Id(this),this.chat=new Fo(this),this.embeddings=new Md(this),this.files=new Fd(this),this.images=new qd(this),this.audio=new Ls(this),this.moderations=new jd(this),this.models=new zd(this),this.fineTuning=new jr(this),this.graders=new Vo(this),this.vectorStores=new Gi(this),this.webhooks=new tf(this),this.beta=new zr(this),this.batches=new kd(this),this.uploads=new Ko(this),this.responses=new Yo(this),this.realtime=new Ki(this),this.conversations=new Wo(this),this.evals=new qo(this),this.containers=new Uo(this),this.videos=new Zd(this),n===void 0)throw new J("Missing credentials. Please pass an `apiKey`, or set the `OPENAI_API_KEY` environment variable.");const o={apiKey:n,organization:r,project:s,webhookSecret:i,...a,baseURL:e||"https://api.openai.com/v1"};if(!o.dangerouslyAllowBrowser&&hm())throw new J(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);this.baseURL=o.baseURL,this.timeout=o.timeout??Go.DEFAULT_TIMEOUT,this.logger=o.logger??console;const l="warn";this.logLevel=l,this.logLevel=Yl(o.logLevel,"ClientOptions.logLevel",this)??Yl(br("OPENAI_LOG"),"process.env['OPENAI_LOG']",this)??l,this.fetchOptions=o.fetchOptions,this.maxRetries=o.maxRetries??2,this.fetch=o.fetch??gm(),Z(this,hi,wm),this._options=o,this.apiKey=typeof n=="string"?n:"Missing Key",this.organization=r,this.project=s,this.webhookSecret=i}withOptions(e){return new this.constructor({...this._options,baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,organization:this.organization,project:this.project,webhookSecret:this.webhookSecret,...e})}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){}async authHeaders(e){return H([{Authorization:`Bearer ${this.apiKey}`}])}stringifyQuery(e){return Cm(e,{arrayFormat:"brackets"})}getUserAgent(){return`${this.constructor.name}/JS ${$r}`}defaultIdempotencyKey(){return`stainless-node-retry-${Cu()}`}makeStatusError(e,n,r,s){return rt.generate(e,n,r,s)}async _callApiKey(){const e=this._options.apiKey;if(typeof e!="function")return!1;let n;try{n=await e()}catch(r){throw r instanceof J?r:new J(`Failed to get token from 'apiKey' function: ${r.message}`,{cause:r})}if(typeof n!="string"||!n)throw new J(`Expected 'apiKey' function argument to return a string but it returned ${n}`);return this.apiKey=n,!0}buildURL(e,n,r){const s=!y(this,io,"m",nf).call(this)&&r||this.baseURL,i=lm(e)?new URL(e):new URL(s+(s.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),a=this.defaultQuery();return cm(a)||(n={...a,...n}),typeof n=="object"&&n&&!Array.isArray(n)&&(i.search=this.stringifyQuery(n)),i.toString()}async prepareOptions(e){await this._callApiKey()}async prepareRequest(e,{url:n,options:r}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,r){return this.request(Promise.resolve(r).then(s=>({method:e,path:n,...s})))}request(e,n=null){return new ji(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,r){const s=await e,i=s.maxRetries??this.maxRetries;n==null&&(n=i),await this.prepareOptions(s);const{req:a,url:o,timeout:l}=await this.buildRequest(s,{retryCount:i-n});await this.prepareRequest(a,{url:o,options:s});const c="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),f=r===void 0?"":`, retryOf: ${r}`,h=Date.now();if(Ze(this).debug(`[${c}] sending request`,Yn({retryOfRequestLogID:r,method:s.method,url:o,options:s,headers:a.headers})),s.signal?.aborted)throw new Ht;const m=new AbortController,u=await this.fetchWithTimeout(o,a,l,m).catch(Va),p=Date.now();if(u instanceof globalThis.Error){const b=`retrying, ${n} attempts remaining`;if(s.signal?.aborted)throw new Ht;const g=Xa(u)||/timed? ?out/i.test(String(u)+("cause"in u?String(u.cause):""));if(n)return Ze(this).info(`[${c}] connection ${g?"timed out":"failed"} - ${b}`),Ze(this).debug(`[${c}] connection ${g?"timed out":"failed"} (${b})`,Yn({retryOfRequestLogID:r,url:o,durationMs:p-h,message:u.message})),this.retryRequest(s,n,r??c);throw Ze(this).info(`[${c}] connection ${g?"timed out":"failed"} - error; no more retries left`),Ze(this).debug(`[${c}] connection ${g?"timed out":"failed"} (error; no more retries left)`,Yn({retryOfRequestLogID:r,url:o,durationMs:p-h,message:u.message})),g?new Ao:new qi({cause:u})}const v=[...u.headers.entries()].filter(([b])=>b==="x-request-id").map(([b,g])=>", "+b+": "+JSON.stringify(g)).join(""),_=`[${c}${f}${v}] ${a.method} ${o} ${u.ok?"succeeded":"failed"} with status ${u.status} in ${p-h}ms`;if(!u.ok){const b=await this.shouldRetry(u);if(n&&b){const T=`retrying, ${n} attempts remaining`;return await ym(u.body),Ze(this).info(`${_} - ${T}`),Ze(this).debug(`[${c}] response error (${T})`,Yn({retryOfRequestLogID:r,url:u.url,status:u.status,headers:u.headers,durationMs:p-h})),this.retryRequest(s,n,r??c,u.headers)}const g=b?"error; no more retries left":"error; not retryable";Ze(this).info(`${_} - ${g}`);const k=await u.text().catch(T=>Va(T).message),S=fm(k),C=S?void 0:k;throw Ze(this).debug(`[${c}] response error (${g})`,Yn({retryOfRequestLogID:r,url:u.url,status:u.status,headers:u.headers,message:C,durationMs:Date.now()-h})),this.makeStatusError(u.status,S,C,u.headers)}return Ze(this).info(_),Ze(this).debug(`[${c}] response start`,Yn({retryOfRequestLogID:r,url:u.url,status:u.status,headers:u.headers,durationMs:p-h})),{response:u,options:s,controller:m,requestLogID:c,retryOfRequestLogID:r,startTime:h}}getAPIList(e,n,r){return this.requestAPIList(n,{method:"get",path:e,...r})}requestAPIList(e,n){const r=this.makeRequest(n,null,void 0);return new Mm(this,r,e)}async fetchWithTimeout(e,n,r,s){const{signal:i,method:a,...o}=n||{};i&&i.addEventListener("abort",()=>s.abort());const l=setTimeout(()=>s.abort(),r),c=globalThis.ReadableStream&&o.body instanceof globalThis.ReadableStream||typeof o.body=="object"&&o.body!==null&&Symbol.asyncIterator in o.body,f={signal:s.signal,...c?{duplex:"half"}:{},method:"GET",...o};a&&(f.method=a.toUpperCase());try{return await this.fetch.call(void 0,e,f)}finally{clearTimeout(l)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,r,s){let i;const a=s?.get("retry-after-ms");if(a){const l=parseFloat(a);Number.isNaN(l)||(i=l)}const o=s?.get("retry-after");if(o&&!i){const l=parseFloat(o);Number.isNaN(l)?i=Date.parse(o)-Date.now():i=l*1e3}if(!(i&&0<=i&&i<60*1e3)){const l=e.maxRetries??this.maxRetries;i=this.calculateDefaultRetryTimeoutMillis(n,l)}return await Ns(i),this.makeRequest(e,n-1,r)}calculateDefaultRetryTimeoutMillis(e,n){const i=n-e,a=Math.min(.5*Math.pow(2,i),8),o=1-Math.random()*.25;return a*o*1e3}async buildRequest(e,{retryCount:n=0}={}){const r={...e},{method:s,path:i,query:a,defaultBaseURL:o}=r,l=this.buildURL(i,a,o);"timeout"in r&&dm("timeout",r.timeout),r.timeout=r.timeout??this.timeout;const{bodyHeaders:c,body:f}=this.buildBody({options:r}),h=await this.buildHeaders({options:e,method:s,bodyHeaders:c,retryCount:n});return{req:{method:s,headers:h,...r.signal&&{signal:r.signal},...globalThis.ReadableStream&&f instanceof globalThis.ReadableStream&&{duplex:"half"},...f&&{body:f},...this.fetchOptions??{},...r.fetchOptions??{}},url:l,timeout:r.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:r,retryCount:s}){let i={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),i[this.idempotencyHeader]=e.idempotencyKey);const a=H([i,{Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(s),...e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{},..._m(),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project},await this.authHeaders(e),this._options.defaultHeaders,r,e.headers]);return this.validateHeaders(a),a.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const r=H([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&r.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:Bu(e)}:y(this,hi,"f").call(this,{body:e,headers:r})}}Go=ue,hi=new WeakMap,io=new WeakSet,nf=function(){return this.baseURL!=="https://api.openai.com/v1"};ue.OpenAI=Go;ue.DEFAULT_TIMEOUT=6e5;ue.OpenAIError=J;ue.APIError=rt;ue.APIConnectionError=qi;ue.APIConnectionTimeoutError=Ao;ue.APIUserAbortError=Ht;ue.NotFoundError=Du;ue.ConflictError=Ru;ue.RateLimitError=Pu;ue.BadRequestError=Eu;ue.AuthenticationError=Au;ue.InternalServerError=Ou;ue.PermissionDeniedError=Tu;ue.UnprocessableEntityError=Iu;ue.InvalidWebhookSignatureError=cs;ue.toFile=Um;ue.Completions=Id;ue.Chat=Fo;ue.Embeddings=Md;ue.Files=Fd;ue.Images=qd;ue.Audio=Ls;ue.Moderations=jd;ue.Models=zd;ue.FineTuning=jr;ue.Graders=Vo;ue.VectorStores=Gi;ue.Webhooks=tf;ue.Beta=zr;ue.Batches=kd;ue.Uploads=Ko;ue.Responses=Yo;ue.Realtime=Ki;ue.Conversations=Wo;ue.Evals=qo;ue.Containers=Uo;ue.Videos=Zd;const ni=43200,hc=1440,pc=Symbol.for("constructDateFrom");function Qo(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&pc in t?t[pc](e):t instanceof Date?new t.constructor(e):new Date(e)}function Wn(t,e){return Qo(t,t)}let hv={};function pv(){return hv}function mc(t){const e=Wn(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function Zo(t,...e){const n=Qo.bind(null,e.find(r=>typeof r=="object"));return e.map(n)}function pi(t,e){const n=+Wn(t)-+Wn(e);return n<0?-1:n>0?1:n}function mv(t){return Qo(t,Date.now())}function vv(t,e,n){const[r,s]=Zo(n?.in,t,e),i=r.getFullYear()-s.getFullYear(),a=r.getMonth()-s.getMonth();return i*12+a}function _v(t){return e=>{const n=Math.trunc,r=n(e);return r===0?0:r}}function gv(t,e){return+Wn(t)-+Wn(e)}function yv(t,e){const n=Wn(t);return n.setHours(23,59,59,999),n}function wv(t,e){const n=Wn(t),r=n.getMonth();return n.setFullYear(n.getFullYear(),r+1,0),n.setHours(23,59,59,999),n}function bv(t,e){const n=Wn(t);return+yv(n)==+wv(n)}function Sv(t,e,n){const[r,s,i]=Zo(n?.in,t,t,e),a=pi(s,i),o=Math.abs(vv(s,i));if(o<1)return 0;s.getMonth()===1&&s.getDate()>27&&s.setDate(30),s.setMonth(s.getMonth()-a*o);let l=pi(s,i)===-a;bv(r)&&o===1&&pi(r,i)===1&&(l=!1);const c=a*(o-+l);return c===0?0:c}function $v(t,e,n){const r=gv(t,e)/1e3;return _v()(r)}const kv={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},xv=(t,e,n)=>{let r;const s=kv[t];return typeof s=="string"?r=s:e===1?r=s.one:r=s.other.replace("{{count}}",e.toString()),n?.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function ka(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const Cv={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Ev={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Av={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Tv={date:ka({formats:Cv,defaultWidth:"full"}),time:ka({formats:Ev,defaultWidth:"full"}),dateTime:ka({formats:Av,defaultWidth:"full"})},Dv={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Rv=(t,e,n,r)=>Dv[t];function as(t){return(e,n)=>{const r=n?.context?String(n.context):"standalone";let s;if(r==="formatting"&&t.formattingValues){const a=t.defaultFormattingWidth||t.defaultWidth,o=n?.width?String(n.width):a;s=t.formattingValues[o]||t.formattingValues[a]}else{const a=t.defaultWidth,o=n?.width?String(n.width):t.defaultWidth;s=t.values[o]||t.values[a]}const i=t.argumentCallback?t.argumentCallback(e):e;return s[i]}}const Iv={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Pv={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Ov={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Mv={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Nv={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Fv={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Lv=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},Bv={ordinalNumber:Lv,era:as({values:Iv,defaultWidth:"wide"}),quarter:as({values:Pv,defaultWidth:"wide",argumentCallback:t=>t-1}),month:as({values:Ov,defaultWidth:"wide"}),day:as({values:Mv,defaultWidth:"wide"}),dayPeriod:as({values:Nv,defaultWidth:"wide",formattingValues:Fv,defaultFormattingWidth:"wide"})};function os(t){return(e,n={})=>{const r=n.width,s=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],i=e.match(s);if(!i)return null;const a=i[0],o=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(o)?Wv(o,h=>h.test(a)):Uv(o,h=>h.test(a));let c;c=t.valueCallback?t.valueCallback(l):l,c=n.valueCallback?n.valueCallback(c):c;const f=e.slice(a.length);return{value:c,rest:f}}}function Uv(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function Wv(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function Hv(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const s=r[0],i=e.match(t.parsePattern);if(!i)return null;let a=t.valueCallback?t.valueCallback(i[0]):i[0];a=n.valueCallback?n.valueCallback(a):a;const o=e.slice(s.length);return{value:a,rest:o}}}const qv=/^(\d+)(th|st|nd|rd)?/i,zv=/\d+/i,jv={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Xv={any:[/^b/i,/^(a|c)/i]},Vv={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Jv={any:[/1/i,/2/i,/3/i,/4/i]},Yv={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Kv={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Gv={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Qv={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Zv={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},e_={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},t_={ordinalNumber:Hv({matchPattern:qv,parsePattern:zv,valueCallback:t=>parseInt(t,10)}),era:os({matchPatterns:jv,defaultMatchWidth:"wide",parsePatterns:Xv,defaultParseWidth:"any"}),quarter:os({matchPatterns:Vv,defaultMatchWidth:"wide",parsePatterns:Jv,defaultParseWidth:"any",valueCallback:t=>t+1}),month:os({matchPatterns:Yv,defaultMatchWidth:"wide",parsePatterns:Kv,defaultParseWidth:"any"}),day:os({matchPatterns:Gv,defaultMatchWidth:"wide",parsePatterns:Qv,defaultParseWidth:"any"}),dayPeriod:os({matchPatterns:Zv,defaultMatchWidth:"any",parsePatterns:e_,defaultParseWidth:"any"})},n_={code:"en-US",formatDistance:xv,formatLong:Tv,formatRelative:Rv,localize:Bv,match:t_,options:{weekStartsOn:0,firstWeekContainsDate:1}};function r_(t,e,n){const r=pv(),s=n?.locale??r.locale??n_,i=2520,a=pi(t,e);if(isNaN(a))throw new RangeError("Invalid time value");const o=Object.assign({},n,{addSuffix:n?.addSuffix,comparison:a}),[l,c]=Zo(n?.in,...a>0?[e,t]:[t,e]),f=$v(c,l),h=(mc(c)-mc(l))/1e3,m=Math.round((f-h)/60);let u;if(m<2)return m===0?s.formatDistance("lessThanXMinutes",1,o):s.formatDistance("xMinutes",m,o);if(m<45)return s.formatDistance("xMinutes",m,o);if(m<90)return s.formatDistance("aboutXHours",1,o);if(m<hc){const p=Math.round(m/60);return s.formatDistance("aboutXHours",p,o)}else{if(m<i)return s.formatDistance("xDays",1,o);if(m<ni){const p=Math.round(m/hc);return s.formatDistance("xDays",p,o)}else if(m<ni*2)return u=Math.round(m/ni),s.formatDistance("aboutXMonths",u,o)}if(u=Sv(c,l),u<12){const p=Math.round(m/ni);return s.formatDistance("xMonths",p,o)}else{const p=u%12,v=Math.trunc(u/12);return p<3?s.formatDistance("aboutXYears",v,o):p<9?s.formatDistance("overXYears",v,o):s.formatDistance("almostXYears",v+1,o)}}function s_(t,e){return r_(t,mv(t),e)}function i_(t){return function(e){return e.key==="Enter"||e.key===" "&&!e.preventDefault()?t.call(this,e):void 0}}function Or(t,e){let n={update(r){typeof r=="string"?t.innerText=r:r?.domNodes?t.replaceChildren(...r.domNodes):r?.html&&(t.innerHTML=r.html)}};return n.update(e),n}function a_(t,e){let n=new ResizeObserver(r=>{for(let s of r)e(s)});return n.observe(t),{destroy(){n.unobserve(t)}}}const ao=86400;function mn(t=void 0){return t!==void 0?t instanceof Date?_c(t):l_(t):_c(new Date)}function tt(t){if(typeof t=="number")t={seconds:t};else if(typeof t=="string"){let n=0,r=2;for(let s of t.split(":",3))n+=parseInt(s,10)*Math.pow(60,r--);t={seconds:n}}else t instanceof Date&&(t={hours:t.getUTCHours(),minutes:t.getUTCMinutes(),seconds:t.getUTCSeconds()});let e=t.weeks||t.week||0;return{years:t.years||t.year||0,months:t.months||t.month||0,days:e*7+(t.days||t.day||0),seconds:(t.hours||t.hour||0)*60*60+(t.minutes||t.minute||0)*60+(t.seconds||t.second||0),inWeeks:!!e}}function oe(t){return new Date(t.getTime())}function Oe(t,e,n=1){t.setUTCFullYear(t.getUTCFullYear()+n*e.years);let r=t.getUTCMonth()+n*e.months;for(t.setUTCMonth(r),r%=12,r<0&&(r+=12);t.getUTCMonth()!==r;)Mr(t);return t.setUTCDate(t.getUTCDate()+n*e.days),t.setUTCSeconds(t.getUTCSeconds()+n*e.seconds),t}function mi(t,e,n=1){return Oe(t,e,-n)}function Hn(t,e=1){return t.setUTCDate(t.getUTCDate()+e),t}function Mr(t,e=1){return Hn(t,-e)}function It(t){return t.setUTCHours(0,0,0,0),t}function nt(t){return new Date(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds())}function hn(t,e=19){return t.toISOString().substring(0,e)}function Wt(t,...e){return e.every(n=>t.getTime()===n.getTime())}function o_(t,e){let n=e-t.getUTCDay();return t.setUTCDate(t.getUTCDate()+(n>=0?n:n+7)),t}function rf(t,e){let n=e-t.getUTCDay();return t.setUTCDate(t.getUTCDate()+(n<=0?n:n-7)),t}function vc(t){return typeof t=="string"&&t.length<=10}function oo(t,e){return t.setUTCHours(e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),0),t}function Lt(t){return t.seconds}function lo(t,e){return Oe(t,e),t}function co(t,e,n){if(mi(t,e),n.length&&n.length<7)for(;n.includes(t.getUTCDay());)Mr(t);return t}function _c(t){return new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds()))}function l_(t){const e=t.match(/\d+/g);return new Date(Date.UTC(Number(e[0]),Number(e[1])-1,Number(e[2]),Number(e[3]||0),Number(e[4]||0),Number(e[5]||0)))}function Nr(...t){return Object.assign(...t)}function kn(t){return Object.keys(t)}function c_(t){return Object.entries(t)}function u_(t){return Math.floor(t)}function On(...t){return Math.min(...t)}function $n(...t){return Math.max(...t)}function d_(){return Symbol("ec")}function el(t){return Array.isArray(t)}function Pe(t){return typeof t=="function"}function f_(t){return t()}function sf(t){t.forEach(f_)}function h_(){}const uo=t=>t;function af(t,e,n){n.update(r=>r.set(e,t))}function p_(t){sf(t),t.clear()}function m_(t,e,n){e??=t,n.has(e)||n.set(e,setTimeout(()=>{n.delete(e),t()}))}let tl=d_();function nl(t,e){t[tl]=e}function v_(t){return!!t?.[tl]}function $s(t){return t[tl]}function of(t,e,n,r=[]){let s=document.createElement(t);s.className=e,typeof n=="string"?s.innerText=n:n.domNodes?s.replaceChildren(...n.domNodes):n.html&&(s.innerHTML=n.html);for(let i of r)s.setAttribute(...i);return s}function __(t){return t.scrollHeight>t.clientHeight}function Fr(t){return t.getBoundingClientRect()}function fo(t,e){for(;e--;)t=t.parentElement;return t}function g_(t){return Fr(t).height}function Tr(t,e,n=document,r=[]){r.push(n);for(let s of n.elementsFromPoint(t,e)){if(v_(s))return s;if(s.shadowRoot&&!r.includes(s.shadowRoot)){let i=Tr(t,e,s.shadowRoot,r);if(i)return i}}return null}function gs(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function y_(t,e,n,r){return{type:t,title:e,currentStart:n.start,currentEnd:n.end,activeStart:r.start,activeEnd:r.end,calendar:void 0}}function $t(t){return t=Nr({},t),t.currentStart=nt(t.currentStart),t.currentEnd=nt(t.currentEnd),t.activeStart=nt(t.activeStart),t.activeEnd=nt(t.activeEnd),t}function lf(t){return t.startsWith("list")}function xa(t){return t.includes("Timeline")}let w_=1;function Ri(t){return t.map(e=>{let n={id:"id"in e?String(e.id):`{generated-${w_++}}`,resourceIds:Ca(e,"resourceId").map(String),allDay:e.allDay??(vc(e.start)&&vc(e.end)),start:mn(e.start),end:mn(e.end),title:e.title??"",editable:e.editable,startEditable:e.startEditable,durationEditable:e.durationEditable,display:e.display??"auto",extendedProps:e.extendedProps??{},backgroundColor:e.backgroundColor??e.color,textColor:e.textColor,classNames:Ca(e,"className"),styles:Ca(e,"style")};if(n.allDay){It(n.start);let r=oe(n.end);It(n.end),(!Wt(n.end,r)||Wt(n.end,n.start))&&Hn(n.end)}return n})}function Ca(t,e){let n=t[e+"s"]??t[e]??[];return el(n)?n:[n]}function b_(t){return t.map(e=>({events:e.events,url:e.url&&e.url.trimEnd("&")||"",method:e.method&&e.method.toUpperCase()||"GET",extraParams:e.extraParams||{}}))}function Ii(t,e,n){let r={start:t.start>e?t.start:e,end:t.end<n?t.end:n,event:t};return r.zeroDuration=Wt(r.start,r.end),r}function cf(t,e){Pe(e)?t.sort((n,r)=>e(gc(n),gc(r))):t.sort((n,r)=>n.start-r.start||r.event.allDay-n.event.allDay)}function gc(t){return{...t,start:nt(t.start),end:nt(t.end),event:kt(t.event)}}function S_(t,e,n,r,s,i){let a=s.formatRange(t.start,e&&t.event.display!=="pointer"&&!t.zeroDuration?oo(oe(t.start),t.end):t.start),o;if(n&&(o=Pe(n)?n({event:kt(t.event),timeText:a,view:$t(i)}):n),o===void 0){let l;switch(t.event.display){case"background":l=[];break;case"pointer":l=[yc(a,t,r)];break;default:l=[...t.event.allDay?[]:[yc(a,t,r)],of("h4",r.eventTitle,t.event.title)]}o={domNodes:l}}return[a,o]}function yc(t,e,n){return of("time",n.eventTime,t,[["datetime",hn(e.start)]])}function $_(t,e,n){let r=e.classNames;return t&&(Pe(t)&&(t=t({event:kt(e),view:$t(n)})),r=[...el(t)?t:[t],...r]),r}function kt(t){return uf(t,nt)}function Ea(t){return uf(t,oe)}function uf(t,e){return t=Nr({},t),t.start=e(t.start),t.end=e(t.end),t}function Aa(t,e,n){let r={};if(t.length){cf(t,n);let s;for(let i of t){let a=[],o=It(oe(i.start));for(;i.end>o;){if(!e.includes(o.getUTCDay())&&(a.push(oe(o)),a.length>1)){let l=o.getTime();r[l]?r[l].chunks.push(i):r[l]={sorted:!1,chunks:[i]}}Hn(o)}if(a.length){i.date=a[0],i.days=a.length,i.dates=a,i.start<a[0]&&(i.start=a[0]);let l=Hn(oe(a.at(-1)));i.end>l&&(i.end=l)}else i.date=It(oe(i.start)),i.days=1,i.dates=[i.date];s&&Wt(s.date,i.date)&&(i.prev=s),s=i}}return r}function k_(t,e,n){t.top=0,t.prev&&(t.top=t.prev.bottom+1),t.bottom=t.top+n;let r=1,s=t.date.getTime();if(e[s]){e[s].sorted||(e[s].chunks.sort((i,a)=>i.top-a.top),e[s].sorted=!0);for(let i of e[s].chunks)if(t.top<i.bottom&&t.bottom>i.top){let a=i.bottom-t.top+1;r+=a,t.top+=a,t.bottom+=a}}return r}function df(t,e){t.length=e.length;let n=[];for(let r of t)n.push(r?.reposition?.());return n}function Pi(t,e,n,r){return t.start<n&&t.end>e?r?(el(r)||(r=[r]),r.some(s=>t.resourceIds.includes(s.id))):!0:!1}function Bs(t){return x_(t)||ff(t)||C_(t)}function vn(t){return t==="background"}function x_(t){return t==="preview"}function ff(t){return t==="ghost"}function C_(t){return t==="pointer"}function E_(t){return hf(t,"day")}function A_(t){return hf(t,"week")}function hf(t,e){return{...t,next:"Next "+e,prev:"Previous "+e}}function wc(t){return e=>({...e,view:t})}function T_(t){let e,n;return t&&({start:e,end:n}=t,e&&(e=It(mn(e))),n&&(n=It(mn(n)))),{start:e,end:n}}function rl(t,e){return e.start&&t<e.start||e.end&&t>e.end}function bc(t,e){return e.start&&t<e.start&&(t=e.start),e.end&&t>e.end&&(t=e.end),t}function D_(t){let e=[];return pf(t,0,e),e}function pf(t,e,n){let r=[];for(let s of t){let i=R_(s);r.push(i),n.push(i);let a={level:e,children:[],expanded:!0,hidden:!1};nl(i,a),s.children&&(a.children=pf(s.children,e+1,n))}return r}function R_(t){return{id:String(t.id),title:t.title||"",eventBackgroundColor:t.eventBackgroundColor,eventTextColor:t.eventTextColor,extendedProps:t.extendedProps??{}}}function I_(t,e){return mf(t,e)?.eventBackgroundColor}function P_(t,e){return mf(t,e)?.eventTextColor}function mf(t,e){return e.find(n=>t.resourceIds.includes(n.id))}function Ta(t,e){return Pt([t,e],([n,r])=>{let s=Pe(r)?{format:r}:new Intl.DateTimeFormat(n,r);return{format:i=>s.format(nt(i))}})}function Sc(t,e){return Pt([t,e],([n,r])=>{let s;if(Pe(r))s=r;else{let i=new Intl.DateTimeFormat(n,r);s=(a,o)=>{if(a<=o)return i.formatRange(a,o);{let l=i.formatRangeToParts(o,a),c="",f=["startRange","endRange"],h=[!1,!1];for(let m of l){let u=f.indexOf(m.source);u>=0?h[u]||(c+=O_(f[1-u],l),h[u]=!0):c+=m.value}return c}}}return{formatRange:(i,a)=>s(nt(i),nt(a))}})}function O_(t,e){let n="";for(let r of e)r.source==t&&(n+=r.value);return n}function M_(t,e,n,r,s){t=oe(t);let i=[],a=oe(t);Oe(t,r.min),Oe(a,r.max),n===void 0&&(n=e.seconds<3600?tt(e.seconds*2):e);let o=oe(t);for(;t<a;){for(i.push([hn(t),s.format(t),t>=o]);n.seconds&&t>=o;)Oe(o,n);Oe(t,e)}return i}function N_(t,e,n,r,s){let i=tt(t),a=tt(e);if(n){let o=tt(On(Lt(i),$n(0,Lt(a)-ao))),l=tt($n(Lt(a),Lt(o)+ao)),c=Pe(n?.eventFilter)?n.eventFilter:f=>!vn(f.display);e:for(let f of r){let h=Oe(oe(f),i),m=Oe(oe(f),a),u=Oe(oe(f),o),p=Oe(oe(f),l);for(let v of s)if(!v.allDay&&c(v)&&v.start<p&&v.end>u){if(v.start<h){let _=$n((v.start-f)/1e3,Lt(o));_<Lt(i)&&(i.seconds=_)}if(v.end>m){let _=On((v.end-f)/1e3,Lt(l));_>Lt(a)&&(a.seconds=_)}if(Lt(i)===Lt(o)&&Lt(a)===Lt(l))break e}}}return{min:i,max:a}}const vf=["buttonText","customButtons","theme"];function F_(t){let e={allDayContent:void 0,allDaySlot:!0,buttonText:{today:"today"},customButtons:{},date:new Date,datesSet:void 0,dayHeaderFormat:{weekday:"short",month:"numeric",day:"numeric"},dayHeaderAriaLabelFormat:{dateStyle:"full"},displayEventEnd:!0,duration:{weeks:1},events:[],eventAllUpdated:void 0,eventBackgroundColor:void 0,eventClassNames:void 0,eventClick:void 0,eventColor:void 0,eventContent:void 0,eventDidMount:void 0,eventFilter:void 0,eventMouseEnter:void 0,eventMouseLeave:void 0,eventOrder:void 0,eventSources:[],eventTextColor:void 0,eventTimeFormat:{hour:"numeric",minute:"2-digit"},filterEventsWithResources:!1,filterResourcesWithEvents:!1,firstDay:0,flexibleSlotTimeLimits:!1,headerToolbar:{start:"title",center:"",end:"today prev,next"},height:void 0,hiddenDays:[],highlightedDates:[],lazyFetching:!0,loading:void 0,locale:void 0,nowIndicator:!1,resourceLabelContent:void 0,resourceLabelDidMount:void 0,resources:[],selectable:!1,scrollTime:"06:00:00",slotDuration:"00:30:00",slotEventOverlap:!0,slotHeight:24,slotLabelInterval:void 0,slotLabelFormat:{hour:"numeric",minute:"2-digit"},slotMaxTime:"24:00:00",slotMinTime:"00:00:00",slotWidth:72,theme:{allDay:"ec-all-day",active:"ec-active",bgEvent:"ec-bg-event",bgEvents:"ec-bg-events",body:"ec-body",button:"ec-button",buttonGroup:"ec-button-group",calendar:"ec",content:"ec-content",day:"ec-day",dayHead:"ec-day-head",days:"ec-days",disabled:"ec-disabled",event:"ec-event",eventBody:"ec-event-body",eventTime:"ec-event-time",eventTitle:"ec-event-title",events:"ec-events",extra:"ec-extra",handle:"ec-handle",header:"ec-header",hiddenScroll:"ec-hidden-scroll",highlight:"ec-highlight",icon:"ec-icon",line:"ec-line",lines:"ec-lines",minor:"ec-minor",nowIndicator:"ec-now-indicator",otherMonth:"ec-other-month",resource:"ec-resource",sidebar:"ec-sidebar",sidebarTitle:"ec-sidebar-title",today:"ec-today",time:"ec-time",title:"ec-title",toolbar:"ec-toolbar",view:"",weekdays:["ec-sun","ec-mon","ec-tue","ec-wed","ec-thu","ec-fri","ec-sat"],withScroll:"ec-with-scroll"},titleFormat:{year:"numeric",month:"short",day:"numeric"},validRange:void 0,view:void 0,viewDidMount:void 0,views:{}};for(let n of t)n.createOptions?.(e);return e}function L_(t){let e={date:n=>It(mn(n)),duration:tt,events:Ri,eventSources:b_,hiddenDays:n=>[...new Set(n)],highlightedDates:n=>n.map(r=>It(mn(r))),resources:D_,scrollTime:tt,slotDuration:tt,slotLabelInterval:n=>n!==void 0?tt(n):void 0,slotMaxTime:tt,slotMinTime:tt,validRange:T_};for(let n of t)n.createParsers?.(e);return e}function B_(t,e){let n=[];for(let r of kn(t))t[r]!==e[r]&&n.push([r,t[r]]);return n}function U_(t){return Pt(t.view,e=>e?.startsWith("dayGrid"))}function W_(t){return Pt([t._currentRange,t.firstDay,t.slotMaxTime,t._dayGrid],([e,n,r,s])=>{let i=oe(e.start),a=oe(e.end);if(s)rf(i,n),o_(a,n);else if(r.days||r.seconds>ao){Oe(Mr(a),r);let o=Mr(oe(a));o<i&&(i=o)}return{start:i,end:a}})}function H_(t){return Pt([t.date,t.duration,t.firstDay],([e,n,r])=>{let s=oe(e),i;return n.months?s.setUTCDate(1):n.inWeeks&&rf(s,r),i=Oe(oe(s),n),{start:s,end:i}})}function q_(t){return Pt([t._activeRange,t.hiddenDays],([e,n])=>{let r=[],s=It(oe(e.start)),i=It(oe(e.end));for(;s<i;)n.includes(s.getUTCDay())||r.push(oe(s)),Hn(s);return!r.length&&n.length&&n.length<7&&(t.date.update(a=>{for(;n.includes(a.getUTCDay());)Hn(a);return a}),r=Cs(t._viewDates)),r})}function z_(t){return Pt([t.date,t._activeRange,t._intlTitle,t._dayGrid],([e,n,r,s])=>s?r.formatRange(e,e):r.formatRange(n.start,Mr(oe(n.end))))}function j_(t){return Pt([t.view,t._viewTitle,t._currentRange,t._activeRange],e=>y_(...e))}function X_(t){let e=bt([]),n,r=0,s={};return Pt([t.events,t.eventSources,t._activeRange,t._fetchedRange,t.lazyFetching,t.loading],(i,a)=>af(()=>{let[o,l,c,f,h,m]=i;if(!l.length){a(o);return}if(!f.start||f.start>c.start||f.end<c.end||!h){n&&n.abort(),n=new AbortController,Pe(m)&&!r&&m(!0);let u=()=>{--r===0&&Pe(m)&&m(!1)},p=[],v=k=>u(),_=k=>{p=p.concat(Ri(k)),a(p),u()},b=hn(c.start),g=hn(c.end);for(let k of l){if(Pe(k.events)){let S=k.events({start:nt(c.start),end:nt(c.end),startStr:b,endStr:g},_,v);S!==void 0&&Promise.resolve(S).then(_,v)}else{let S=Pe(k.extraParams)?k.extraParams():Nr({},k.extraParams);S.start=b,S.end=g,S=new URLSearchParams(S);let C=k.url,x={},T;["GET","HEAD"].includes(k.method)?C+=(C.includes("?")?"&":"?")+S:(x["content-type"]="application/x-www-form-urlencoded;charset=UTF-8",T=String(S)),fetch(C,{method:k.method,headers:x,body:T,signal:n.signal,credentials:"same-origin"}).then($=>$.json()).then(_).catch(v)}++r}f.start=c.start,f.end=c.end}},s,t._queue),[]).subscribe(e.set),e}function V_(t){let e;t._view.subscribe(r=>e=r);let n={};return Pt([t._events,t.eventFilter],(r,s)=>af(()=>{let[i,a]=r;s(Pe(a)?i.filter((o,l,c)=>a({event:o,index:l,events:c,view:e})):i)},n,t._queue),[])}function J_(){return $u(mn(),t=>{let e=setInterval(()=>{t(mn())},1e3);return()=>clearInterval(e)})}function Y_(t){return Pt(t._now,e=>It(oe(e)))}class K_{constructor(e,n){e=e||[];let r=F_(e),s=L_(e);r=ho(r,s),n=ho(n,s);for(let[a,o]of Object.entries(r))this[a]=bt(o);this._queue=bt(new Map),this._tasks=new Map,this._auxiliary=bt([]),this._dayGrid=U_(this),this._currentRange=H_(this),this._activeRange=W_(this),this._fetchedRange=bt({start:void 0,end:void 0}),this._events=X_(this),this._now=J_(),this._today=Y_(this),this._intlEventTime=Sc(this.locale,this.eventTimeFormat),this._intlSlotLabel=Ta(this.locale,this.slotLabelFormat),this._intlDayHeader=Ta(this.locale,this.dayHeaderFormat),this._intlDayHeaderAL=Ta(this.locale,this.dayHeaderAriaLabelFormat),this._intlTitle=Sc(this.locale,this.titleFormat),this._bodyEl=bt(void 0),this._scrollable=bt(!1),this._recheckScrollable=bt(!1),this._viewTitle=z_(this),this._viewDates=q_(this),this._view=j_(this),this._viewComponent=bt(void 0),this._filteredEvents=V_(this),this._interaction=bt({}),this._iEvents=bt([null,null]),this._iClasses=bt(uo),this._iClass=bt(void 0),this._set=(a,o)=>{po(a,this)&&(s[a]&&(o=s[a](o)),this[a].set(o))},this._get=a=>po(a,this)?Cs(this[a]):void 0;for(let a of e)a.createStores?.(this);n.view&&this.view.set(n.view);let i=new Set([...kn(r.views),...kn(n.views??{})]);for(let a of i){let o=$c(r,r.views[a]??{}),l=$c(o,n,n.views?.[a]??{}),c=l.component;G_(l,this);for(let f of kn(l)){let{set:h,_set:m=h,...u}=this[f];this[f]={set:vf.includes(f)?p=>{if(Pe(p)){let v=p(o[f]);l[f]=v,h(h===m?v:p)}else l[f]=p,h(p)}:p=>{l[f]=p,h(p)},_set:m,...u}}this.view.subscribe(f=>{if(f===a){this._viewComponent.set(c),Pe(l.viewDidMount)&&bi().then(()=>l.viewDidMount({view:$t(Cs(this._view))}));for(let h of kn(l))this[h]._set(l[h])}})}}}function ho(t,e){let n={...t};for(let r of kn(e))r in n&&(n[r]=e[r](n[r]));if(t.views){n.views={};for(let r of kn(t.views))n.views[r]=ho(t.views[r],e)}return n}function $c(...t){let e={};for(let n of t){let r={};for(let s of vf)Pe(n[s])&&(r[s]=n[s](e[s]));e={...e,...n,...r}}return e}function G_(t,e){kn(t).filter(n=>!po(n,e)||n==="view").forEach(n=>delete t[n])}function po(t,e){return e.hasOwnProperty(t)&&t[0]!=="_"}var Q_=Y("<h2></h2>"),Z_=Y("<button><i></i></button>"),eg=Y("<button><i></i></button>"),tg=Y("<button> </button>"),ng=Y("<button></button>"),rg=Y("<button> </button>");function kc(t,e){Ee(e,!1);const n=()=>w(A,"$validRange",u),r=()=>w(C,"$date",u),s=()=>w(x,"$duration",u),i=()=>w(T,"$hiddenDays",u),a=()=>w(_,"$_currentRange",u),o=()=>w(g,"$_viewDates",u),l=()=>w($,"$theme",u),c=()=>w(b,"$_viewTitle",u),f=()=>w(k,"$buttonText",u),h=()=>w(S,"$customButtons",u),m=()=>w(E,"$view",u),[u,p]=Ge();let v=Ce(e,"buttons",8),{_currentRange:_,_viewTitle:b,_viewDates:g,buttonText:k,customButtons:S,date:C,duration:x,hiddenDays:T,theme:$,validRange:A,view:E}=st("state"),D=It(mn()),M=Zn(),I=Zn(),X=Zn(),te=Zn(!1);function Q(){return d(te)}function W(){return o().every(G=>rl(G,n()))}function ne(){Ne(C,co(r(),s(),i()))}function q(){Ne(C,lo(r(),s()))}Hh(()=>(n(),r(),s(),i(),d(X),a(),bi),()=>{if(!Q()){if(K(te,!0),K(M,!1),K(I,!1),n().start){let G=oe(r());Ne(C,co(r(),s(),i())),K(M,W()),Ne(C,G)}if(n().end){let G=oe(r());Ne(C,lo(r(),s())),K(I,W()),Ne(C,G)}if(K(X,D>=a().start&&D<a().end),!d(X)&&(n().start||n().end)){let G=oe(r());Ne(C,oe(D)),K(X,W()),Ne(C,G)}bi().then(()=>K(te,!1))}}),qh(),Os();var N=xe(),O=ae(N);wt(O,1,v,en,(G,z)=>{var fe=xe(),be=ae(fe);{var de=le=>{var ve=Q_();or(ve,(ge,Fe)=>Or?.(ge,Fe),c),we(()=>ie(ve,1,(l(),U(()=>l().title)))),P(le,ve)},Me=le=>{var ve=xe(),ge=ae(ve);{var Fe=We=>{var ye=Z_(),zt=B(ye);we(()=>{ie(ye,1,`${l(),U(()=>l().button)??""} ec-${d(z)??""}`),Ke(ye,"aria-label",(f(),U(()=>f().prev))),Ke(ye,"title",(f(),U(()=>f().prev))),ye.disabled=d(M),ie(zt,1,`${l(),U(()=>l().icon)??""} ec-${d(z)??""}`)}),Ye("click",ye,ne),P(We,ye)},it=We=>{var ye=xe(),zt=ae(ye);{var pe=me=>{var Se=eg(),re=B(Se);we(()=>{ie(Se,1,`${l(),U(()=>l().button)??""} ec-${d(z)??""}`),Ke(Se,"aria-label",(f(),U(()=>f().next))),Ke(Se,"title",(f(),U(()=>f().next))),Se.disabled=d(I),ie(re,1,`${l(),U(()=>l().icon)??""} ec-${d(z)??""}`)}),Ye("click",Se,q),P(me,Se)},ke=me=>{var Se=xe(),re=ae(Se);{var He=Qe=>{var ft=tg(),jn=B(ft);we(()=>{ie(ft,1,`${l(),U(()=>l().button)??""} ec-${d(z)??""}`),ft.disabled=d(X),Zt(jn,(f(),d(z),U(()=>f()[d(z)])))}),Ye("click",ft,()=>Ne(C,oe(D))),P(Qe,ft)},at=Qe=>{var ft=xe(),jn=ae(ft);{var Xr=nn=>{var gn=ng();Hr(()=>Ye("click",gn,function(...Xn){h()[d(z)].click?.apply(this,Xn)})),or(gn,(Xn,Vr)=>Or?.(Xn,Vr),()=>h()[d(z)].text),we(()=>ie(gn,1,`${l(),U(()=>l().button)??""} ec-${d(z)??""}${h(),d(z),l(),U(()=>h()[d(z)].active?" "+l().active:"")??""}`)),P(nn,gn)},ht=nn=>{var gn=xe(),Xn=ae(gn);{var Vr=Jr=>{var hr=rg(),Qi=B(hr);we(()=>{ie(hr,1,`${l(),U(()=>l().button)??""}${m(),d(z),l(),U(()=>m()===d(z)?" "+l().active:"")??""} ec-${d(z)??""}`),Zt(Qi,(f(),d(z),U(()=>f()[d(z)])))}),Ye("click",hr,()=>Ne(E,d(z))),P(Jr,hr)};$e(Xn,Jr=>{d(z)!=""&&Jr(Vr)},!0)}P(nn,gn)};$e(jn,nn=>{h(),d(z),U(()=>h()[d(z)])?nn(Xr):nn(ht,!1)},!0)}P(Qe,ft)};$e(re,Qe=>{d(z)=="today"?Qe(He):Qe(at,!1)},!0)}P(me,Se)};$e(zt,me=>{d(z)=="next"?me(pe):me(ke,!1)},!0)}P(We,ye)};$e(ge,We=>{d(z)=="prev"?We(Fe):We(it,!1)},!0)}P(le,ve)};$e(be,le=>{d(z)=="title"?le(de):le(Me,!1)})}P(G,fe)}),P(t,N),Ae(),p()}var sg=Y("<div><!></div>"),ig=Y("<div></div>"),ag=Y("<nav></nav>");function og(t,e){Ee(e,!0);const n=()=>w(a,"$headerToolbar",s),r=()=>w(o,"$theme",s),[s,i]=Ge();let{headerToolbar:a,theme:o}=st("state"),l=L(()=>{let f={};for(let h of["start","center","end"])f[h]=n()[h]?.split(" ").map(m=>m.split(","))??[];return f});var c=ag();wt(c,21,()=>kn(d(l)),en,(f,h)=>{var m=ig();wt(m,21,()=>d(l)[d(h)],en,(u,p)=>{var v=xe(),_=ae(v);{var b=k=>{var S=sg(),C=B(S);kc(C,{get buttons(){return d(p)}}),we(()=>ie(S,1,r().buttonGroup)),P(k,S)},g=k=>{kc(k,{get buttons(){return d(p)}})};$e(_,k=>{d(p).length>1?k(b):k(g,!1)})}P(u,v)}),we(()=>ie(m,1,`ec-${d(h)??""}`)),P(f,m)}),we(()=>ie(c,1,r().toolbar)),P(t,c),Ae(),i()}function lg(t,e){Ee(e,!0);const n=()=>w(_,"$_activeRange",h),r=()=>w(u,"$datesSet",h),s=()=>w(T,"$_view",h),i=()=>w(b,"$_filteredEvents",h),a=()=>w(p,"$eventAllUpdated",h),o=()=>w(x,"$_queue",h),l=()=>w(C,"$_recheckScrollable",h),c=()=>w(k,"$_bodyEl",h),f=()=>w(v,"$_auxiliary",h),[h,m]=Ge();let{datesSet:u,eventAllUpdated:p,_auxiliary:v,_activeRange:_,_filteredEvents:b,_scrollable:g,_bodyEl:k,_tasks:S,_recheckScrollable:C,_queue:x,_view:T}=st("state");gt(()=>{n(),U(()=>{Pe(r())&&r()({start:nt(n().start),end:nt(n().end),startStr:hn(n().start),endStr:hn(n().end),view:$t(s())})})}),gt(()=>{i(),U(()=>{Pe(a())&&m_(()=>a()({view:$t(s())}),"eau",S)})}),gt(()=>{o(),U(()=>{p_(o())})}),gt(()=>{l(),U(()=>{c()&&Ne(g,__(c())),Ne(C,!1)})});var $=xe(),A=ae($);wt(A,1,f,en,(E,D)=>{var M=xe(),I=ae(M);Ps(I,()=>d(D),(X,te)=>{te(X,{})}),P(E,M)}),P(t,$),Ae(),m()}var cg=Y("<div><!> <!></div> <!>",1);function ug(t,e){Ee(e,!0);const n=()=>w(C,"$_events",u),r=()=>w(k,"$_interaction",u),s=()=>w(T,"$date",u),i=()=>w($,"$duration",u),a=()=>w(A,"$hiddenDays",u),o=()=>w(g,"$_viewComponent",u),l=()=>w(D,"$theme",u),c=()=>w(x,"$_scrollable",u),f=()=>w(S,"$_iClass",u),h=()=>w(E,"$height",u),m=()=>w(M,"$view",u),[u,p]=Ge();let v=Ce(e,"plugins",19,()=>[]),_=Ce(e,"options",19,()=>({})),b=new K_(v(),_());yh("state",b);let{_viewComponent:g,_interaction:k,_iClass:S,_events:C,_scrollable:x,date:T,duration:$,hiddenDays:A,height:E,theme:D,view:M}=b,I={..._()};gt(()=>{for(let[pe,ke]of B_(_(),I))U(()=>{X(pe,ke)});Nr(I,_())});function X(pe,ke){return b._set(pe,ke),this}function te(pe){let ke=b._get(pe);return ke instanceof Date?nt(ke):ke}function Q(){return b._fetchedRange.set({start:void 0,end:void 0}),this}function W(){return n().map(kt)}function ne(pe){for(let ke of n())if(ke.id==pe)return kt(ke);return null}function q(pe){return pe=Ri([pe])[0],n().push(pe),Ne(C,n()),kt(pe)}function N(pe){let ke=String(pe.id),me=n().findIndex(Se=>Se.id===ke);return me>=0?(pe=Ri([pe])[0],lt(C,U(n)[me]=pe,U(n)),kt(pe)):null}function O(pe){pe=String(pe);let ke=n().findIndex(me=>me.id===pe);return ke>=0&&(n().splice(ke,1),Ne(C,n())),this}function G(){return $t(Cs(b._view))}function z(){return r().action?.unselect(),this}function fe(pe,ke){let me=Tr(pe,ke);if(me){let Se=$s(me)(pe,ke);return Se.date=nt(Se.date),Se}return null}function be(){return Ne(T,lo(s(),i())),this}function de(){return Ne(T,co(s(),i(),a())),this}let Me=L(o);var le={setOption:X,getOption:te,refetchEvents:Q,getEvents:W,getEventById:ne,addEvent:q,updateEvent:N,removeEventById:O,getView:G,unselect:z,dateFromPoint:fe,next:be,prev:de},ve=cg(),ge=ae(ve);let Fe;var it=B(ge);og(it,{});var We=ee(it,2);Ps(We,()=>d(Me),(pe,ke)=>{ke(pe,{})});var ye=ee(ge,2);lg(ye,{}),we((pe,ke)=>{ie(ge,1,`${l().calendar??""} ${l().view??""}${c()?" "+l().withScroll:""}${f()?" "+l()[f()]:""}`),Ke(ge,"role",pe),Fe=tn(ge,"",Fe,ke)},[()=>lf(m())?"list":"table",()=>({height:h()})]),P(t,ve);var zt=Ae(le);return p(),zt}var dg=Y("<div></div>"),fg=Y("<article><!></article>");function hg(t,e){Ee(e,!0);const n=()=>w(te,"$resources",_),r=()=>w(x,"$eventBackgroundColor",_),s=()=>w(T,"$eventColor",_),i=()=>w(X,"$eventTextColor",_),a=()=>w(Q,"$theme",_),o=()=>w(D,"$eventClassNames",_),l=()=>w(W,"$_view",_),c=()=>w(C,"$displayEventEnd",_),f=()=>w($,"$eventContent",_),h=()=>w(ne,"$_intlEventTime",_),m=()=>w(E,"$eventDidMount",_),u=()=>w(A,"$eventClick",_),p=()=>w(M,"$eventMouseEnter",_),v=()=>w(I,"$eventMouseLeave",_),[_,b]=Ge();let g=Ce(e,"el",15),k=Ce(e,"classes",3,uo),S=Ce(e,"styles",3,uo),{displayEventEnd:C,eventBackgroundColor:x,eventColor:T,eventContent:$,eventClick:A,eventDidMount:E,eventClassNames:D,eventMouseEnter:M,eventMouseLeave:I,eventTextColor:X,resources:te,theme:Q,_view:W,_intlEventTime:ne}=st("state"),q=L(()=>e.chunk.event),N=L(()=>e.chunk.event.display),O=L(()=>d(q).backgroundColor??I_(d(q),n())??r()??s()),G=L(()=>d(q).textColor??P_(d(q),n())??i()),z=L(()=>c_(S()({"background-color":d(O),color:d(G)})).map(me=>`${me[0]}:${me[1]}`).concat(d(q).styles).join(";")),fe=L(()=>k()([vn(d(N))?a().bgEvent:a().event,...$_(o(),d(q),l())]).join(" ")),be=L(()=>S_(e.chunk,c(),f(),a(),h(),l())),de=L(()=>go(d(be),2)),Me=L(()=>d(de)[0]),le=L(()=>d(de)[1]);Ms(()=>{Pe(m())&&m()({event:kt(d(q)),timeText:d(Me),el:g(),view:$t(l())})});function ve(me,Se){return!Bs(Se)&&Pe(me)?re=>me({event:kt(d(q)),el:g(),jsEvent:re,view:$t(l())}):void 0}let ge=L(()=>!vn(d(N))&&ve(u(),d(N))||void 0),Fe=L(()=>d(ge)&&i_(d(ge))),it=L(()=>ve(p(),d(N))),We=L(()=>ve(v(),d(N)));var ye=fg();ye.__click=function(...me){d(ge)?.apply(this,me)},ye.__keydown=function(...me){d(Fe)?.apply(this,me)},ye.__pointerdown=function(...me){e.onpointerdown?.apply(this,me)};{const me=Se=>{var re=dg();or(re,(He,at)=>Or?.(He,at),()=>d(le)),we(()=>ie(re,1,Ua(a().eventBody))),P(Se,re)};var zt=B(ye);{var pe=Se=>{var re=xe(),He=ae(re);Pr(He,()=>e.body,()=>me,()=>d(O),()=>d(G)),P(Se,re)},ke=Se=>{me(Se)};$e(zt,Se=>{e.body?Se(pe):Se(ke,!1)})}Un(ye,Se=>g(Se),()=>g())}we(()=>{ie(ye,1,Ua(d(fe))),tn(ye,d(z)),Ke(ye,"role",d(ge)?"button":void 0),Ke(ye,"tabindex",d(ge)?0:void 0)}),Ye("mouseenter",ye,function(...me){d(it)?.apply(this,me)}),Ye("mouseleave",ye,function(...me){d(We)?.apply(this,me)}),P(t,ye),Ae(),b()}Ct(["click","keydown","pointerdown"]);function _f(t,e){Ee(e,!0);const n=()=>w(l,"$_iClasses",s),r=()=>w(o,"$_interaction",s),[s,i]=Ge();let a=Ce(e,"el",15),{_interaction:o,_iClasses:l}=st("state"),c=L(()=>e.chunk.event),f=L(()=>e.chunk.event.display),h=L(()=>v=>n()(v,d(c)));function m(v){return r().action?.draggable(v)?_=>r().action.drag(v,_,e.forceDate?.(),e.forceMargin?.()):r().action?.noAction}let u=L(()=>!vn(d(f))&&!Bs(d(f))?m(d(c)):void 0),p=L(()=>r().resizer);hg(t,{get chunk(){return e.chunk},get classes(){return d(h)},get styles(){return e.styles},get onpointerdown(){return d(u)},get el(){return a()},set el(_){a(_)},body:(_,b=_t)=>{var g=xe(),k=ae(g);{var S=x=>{var T=xe(),$=ae(T);Ps($,()=>d(p),(A,E)=>{E(A,{get chunk(){return e.chunk},get axis(){return e.axis},get forceDate(){return e.forceDate},get forceMargin(){return e.forceMargin},children:(D,M)=>{var I=xe(),X=ae(I);Pr(X,b),P(D,I)},$$slots:{default:!0}})}),P(x,T)},C=x=>{var T=xe(),$=ae(T);Pr($,b),P(x,T)};$e(k,x=>{d(p)?x(S):x(C,!1)})}P(_,g)},$$slots:{body:!0}}),Ae(),i()}Ct(["pointerdown","click","keydown"]);Ct(["pointerdown","click","keydown"]);function gf(t,e,n){return t.startEditable??e??t.editable??n}function pg(t,e,n){return t.durationEditable??e??t.editable??n}let Da=!1;function mg(t){Da||(Da=!0,window.requestAnimationFrame(()=>{t(),Da=!1}))}function xc(t,e,n){return $n(e,On(n,t))}function vg(t,e){Ee(e,!1);const n=()=>w(ye,"$eventStartEditable",O),r=()=>w(We,"$editable",O),s=()=>w(Vr,"$slotDuration",O),i=()=>w(jn,"$selectable",O),a=()=>w(Sf,"$view",O),o=()=>w(le,"$_bodyEl",O),l=()=>w(ve,"$datesAboveResources",O),c=()=>w(gn,"$selectLongPressDelay",O),f=()=>w(Se,"$eventLongPressDelay",O),h=()=>w(Qe,"$longPressDelay",O),m=()=>w(Xn,"$selectMinDistance",O),u=()=>w(zt,"$eventDragMinDistance",O),p=()=>w(z,"$_iEvents",O),v=()=>w(re,"$eventResizeStart",O),_=()=>w(pe,"$eventDragStart",O),b=()=>w(ft,"$resizeConstraint",O),g=()=>w(nn,"$selectConstraint",O),k=()=>w(Fe,"$dragConstraint",O),S=()=>w(it,"$dragScroll",O),C=()=>w(Jr,"$slotHeight",O),x=()=>w(hr,"$slotWidth",O),T=()=>w(yf,"$unselectAuto",O),$=()=>w(wf,"$unselectCancel",O),A=()=>w(Xr,"$selectFn",O),E=()=>w(He,"$eventResizeStop",O),D=()=>w(ke,"$eventDragStop",O),M=()=>w(de,"$_view",O),I=()=>w(at,"$eventResize",O),X=()=>w(me,"$eventDrop",O),te=()=>w(ge,"$dateClick",O),Q=()=>w(bf,"$validRange",O),W=()=>w(Me,"$_dayGrid",O),ne=()=>w(be,"$_events",O),q=()=>w(ht,"$selectBackgroundColor",O),N=()=>w(Qi,"$unselectFn",O),[O,G]=Ge();let{_iEvents:z,_iClass:fe,_events:be,_view:de,_dayGrid:Me,_bodyEl:le,datesAboveResources:ve,dateClick:ge,dragConstraint:Fe,dragScroll:it,editable:We,eventStartEditable:ye,eventDragMinDistance:zt,eventDragStart:pe,eventDragStop:ke,eventDrop:me,eventLongPressDelay:Se,eventResizeStart:re,eventResizeStop:He,eventResize:at,longPressDelay:Qe,resizeConstraint:ft,selectable:jn,select:Xr,selectBackgroundColor:ht,selectConstraint:nn,selectLongPressDelay:gn,selectMinDistance:Xn,slotDuration:Vr,slotHeight:Jr,slotWidth:hr,unselect:Qi,unselectAuto:yf,unselectCancel:wf,validRange:bf,view:Sf}=st("state");const sl=1,il=2,al=3,ol=4,Zi=5,Us=6;let Ve,pr,se,ea,jt,ta,Ot,mr,na,ra,pt,qe,rn,Mt,Yr,Ws,sn,yn,Hs,Le,qs,zs,sa,Kr=Zn(),Gr,Qr,vr;function ll(F){return gf(F,n(),r())}function cl(F,j,De,ce){Ve||(Ve=la(j)?sl:Us,Jn()&&(se=F,ia(j),De&&(jt=De),ce&&(Qr=ce),Hs="dragging",_r(j)))}function ul(F,j,De,ce,Xt,ns,ua){Ve||(Ve=la(j)?De?al:il:Us,Jn()&&(se=F,ia(j),Xt&&(jt=Xt),ns&&(Qr=ns),Hs=ce==="x"?"resizingX":"resizingY",js()?(Le=oe(se.end),yn?(oo(Le,se.start),Le>=se.end&&Mr(Le)):(mi(Le,s()),Le<se.start&&(Le=se.start),jt=se.start)):(Le=oe(se.start),yn?(oo(Le,se.end),Le<=se.start&&!ua&&Hn(Le)):(Oe(Le,s()),Le>se.end&&(Le=se.end),jt=se.end,ua||(jt=mi(oe(jt),s()))),ua&&!yn&&(vr=s())),_r(j)))}function dl(F){Ve||(Ve=la(F)?i()&&!lf(a())?ol:Zi:Us,Jn()&&(ia(F),Hs="selecting",qs=yn?tt({day:1}):s(),se={allDay:yn,start:jt,end:Oe(oe(jt),qs),resourceIds:Ot?[Ot.id]:[]},_r(F)))}function fl(){Ve||(Ve=Us)}function ia(F){window.getSelection().removeAllRanges(),na=pt=F.clientX,ra=qe=F.clientY;let j=Tr(pt,qe);({allDay:yn,date:jt,resource:Ot}=$s(j)(pt,qe)),xa(a())?rn=Yr=o():(rn=fo(j,Ot?4:3),Yr=fo(j,Ot&&(Af()||l())?2:1)),pl(),F.pointerType!=="mouse"&&K(Kr,setTimeout(()=>{Ve&&(pr=!0,_r(F))},(Vn()?c():f())??h()))}function _r(F){if(pr||F&&F.pointerType==="mouse"&&Ef()>=(Vn()?m():u())){pr=!0,ts(F),Ne(fe,Hs),p()[0]||(Vn()?Cf():xf(F,es()?v():_()));let j=oa(kf());if(j){let De;if({allDay:De,date:ta,resource:mr}=j,De===yn){let ce=Zr({},p()[0]),Xt=b();sn=tt((ta-jt)/1e3),js()?(ce.start=Oe(oe(se.start),sn),ce.start>Le&&(ce.start=Le,sn=tt((Le-se.start)/1e3))):(ce.end=Oe(oe(se.end),sn),vr&&Oe(ce.end,vr),es()?ce.end<Le&&(ce.end=Le,sn=tt((Le-se.end)/1e3)):Vn()?(ce.end<se.end?(ce.start=mi(ce.end,qs),ce.end=se.end):ce.start=se.start,Xt=g()):(ce.start=Oe(oe(se.start),sn),Ot&&(ce.resourceIds=se.resourceIds.filter(ns=>ns!==Ot.id),ce.resourceIds.push(mr.id)),Xt=k()));do{if(Xt!==void 0&&(ce=Zr(Ea(se),ce),Xt(Vn()?_l(ce,F):gl(ce,se,F))===!1)){lt(z,U(p)[0]=Zr(p()[0],se),U(p));break}lt(z,U(p)[0]=Zr(p()[0],ce),U(p))}while(!1)}}}if(S()){let j=C()*2,De=x();mg(()=>{rn&&(qe<j&&window.scrollBy(0,$n(-10,(qe-j)/3)),qe<Mt.top+j&&(rn.scrollTop+=$n(-10,(qe-Mt.top-j)/3)),qe>window.innerHeight-j&&window.scrollBy(0,On(10,(qe-window.innerHeight+j)/3)),qe>Mt.bottom-j&&(rn.scrollTop+=On(10,(qe-Mt.bottom+j)/3)),xa(a())&&(pt<Mt.left+De&&(rn.scrollLeft+=$n(-10,(pt-Mt.left-De)/3)),pt>Mt.right-De&&(rn.scrollLeft+=On(10,(pt-Mt.right+De)/3))))})}}function aa(){Jn()&&(pl(),_r())}function $f(F){Jn()&&F.isPrimary&&(pt=F.clientX,qe=F.clientY,_r(F))}function hl(F){if(zs&&T()&&!($()&&F.target.closest($()))&&ts(F),Ve&&F.isPrimary){if(pr)if(Vn()){if(zs=!0,Pe(A())){let j=_l(p()[0],F);A()(j)}}else{se.display=ea;let j=es()?E():D();Pe(j)&&j({event:kt(se),jsEvent:F,view:$t(M())});let De=Ea(se);if(vl(se,p()[0]),ml(),j=es()?I():X(),Pe(j)){let ce=se,Xt=gl(se,De,F);j(Nr(Xt,{revert(){vl(ce,De)}}))}}else if((Tf()||Vn())&&Pe(te())&&!sa){pt=F.clientX,qe=F.clientY;let j=Tr(pt,qe);if(j){let{allDay:De,date:ce,resource:Xt}=$s(j)(pt,qe);te()({allDay:De,date:nt(ce),dateStr:hn(ce),dayEl:j,jsEvent:F,view:$t(M()),resource:Xt})}}pr=!1,Ve=na=ra=pt=qe=se=ea=jt=ta=Ot=mr=sn=vr=yn=Ne(fe,Le=qs=Qr=void 0),rn=Yr=Mt=Ws=void 0,d(Kr)&&(clearTimeout(d(Kr)),K(Kr,void 0))}sa=!1}function kf(){return Tr(xc(pt,Gr[0],Gr[1]),xc(qe,Gr[2],Gr[3]))}function oa(F){if(F){let j=$s(F)(pt,qe);if(j.disabled){if(!Q().end||j.date<Q().end)return oa(F.nextElementSibling);if(!Q().start||j.date>Q().start)return oa(F.previousElementSibling)}else return j}return null}function pl(){Mt=Fr(rn),Ws=Fr(Yr),Gr=[$n(0,Ws.left+(xa(a())?1:W()?0:8)),On(document.documentElement.clientWidth,Ws.left+Yr.clientWidth)-2,$n(0,Mt.top),On(document.documentElement.clientHeight,Mt.top+rn.clientHeight)-2]}function xf(F,j){Pe(j)&&j({event:kt(se),jsEvent:F,view:$t(M())}),ea=se.display,se.display="preview",lt(z,U(p)[0]=Ea(se),U(p)),Qr!==void 0&&lt(z,U(p)[0]._margin=Qr,U(p)),vr&&Oe(p()[0].end,vr),se.display="ghost",Ne(be,ne())}function Cf(){lt(z,U(p)[0]={id:"{select}",allDay:se.allDay,start:se.start,title:"",display:"preview",extendedProps:{},backgroundColor:q(),resourceIds:se.resourceIds,classNames:[],styles:[]},U(p))}function ml(){lt(z,U(p)[0]=null,U(p))}function Zr(F,j){return F.start=j.start,F.end=j.end,F.resourceIds=j.resourceIds,F}function vl(F,j){Zr(F,j),Ne(be,ne())}function _l(F,j){let{start:De,end:ce}=kt(F);return{start:De,end:ce,startStr:hn(F.start),endStr:hn(F.end),allDay:yn,view:$t(M()),resource:Ot,jsEvent:j}}function gl(F,j,De){let ce;return es()?ce=js()?{startDelta:sn,endDelta:tt(0)}:{startDelta:tt(0),endDelta:sn}:ce={delta:sn,oldResource:Ot!==mr?Ot:void 0,newResource:Ot!==mr?mr:void 0},Nr(ce,{event:kt(F),oldEvent:kt(j),view:$t(M()),jsEvent:De}),ce}function Ef(){return Math.sqrt(Math.pow(pt-na,2)+Math.pow(qe-ra,2))}function Af(){return Ve===sl}function es(){return Ve===il||js()}function js(){return Ve===al}function Tf(){return Ve===Zi}function Vn(){return Ve===ol}function Jn(){return Ve&&Ve<Zi}function la(F){return F.isPrimary&&(F.pointerType!=="mouse"||F.buttons&1)}function ts(F){zs&&(zs=!1,ml(),Pe(N())&&N()({jsEvent:F,view:$t(M())}))}function yl(){sa=!0}de.subscribe(ts);function Df(F){if(Jn()){let j=F.target,De=[],ce=()=>sf(De);De.push(gs(window,"touchmove",h_,{passive:!1})),De.push(gs(j,"touchmove",ca(()=>pr))),De.push(gs(j,"touchend",ce)),De.push(gs(j,"touchcancel",ce))}}function ca(F){return j=>{F()&&j.preventDefault()}}var Rf={draggable:ll,drag:cl,resize:ul,select:dl,noAction:fl,handleScroll:aa,unselect:ts,noClick:yl};Os(),Ye("pointermove",Ut,$f),Ye("pointerup",Ut,hl),Ye("pointercancel",Ut,hl),Ye("scroll",Ut,aa);var If=L(()=>ca(Jn));Ye("selectstart",Ut,function(...F){d(If)?.apply(this,F)});var Pf=L(()=>ca(()=>d(Kr)));Ye("contextmenu",Ut,function(...F){d(Pf)?.apply(this,F)}),Ye("touchstart",Ut,Df,void 0,!0),Rn(e,"draggable",ll),Rn(e,"drag",cl),Rn(e,"resize",ul),Rn(e,"select",dl),Rn(e,"noAction",fl),Rn(e,"handleScroll",aa),Rn(e,"unselect",ts),Rn(e,"noClick",yl);var Of=Ae(Rf);return G(),Of}function _g(t,e){Ee(e,!0);const n=()=>w(a,"$_iEvents",s),r=()=>w(o,"$slotDuration",s),[s,i]=Ge();let{_iEvents:a,slotDuration:o}=st("state"),l=0,c=0;gt(()=>{n()[0]&&p()});function f(){let g=Tr(l,c);if(g){let{allDay:k,date:S,resource:C,disabled:x}=$s(g)(l,c);if(!x){let T=k?2:1;n()[T]||u(T),lt(a,U(n)[T].start=S,U(n)),lt(a,U(n)[T].end=Oe(oe(S),r()),U(n)),lt(a,U(n)[T].resourceIds=C?[C.id]:[],U(n));return}}p()}function h(){f()}function m(g){v(g)&&(l=g.clientX,c=g.clientY,f())}function u(g){lt(a,U(n)[g]={id:"{pointer}",title:"",display:"pointer",extendedProps:{},backgroundColor:"transparent",classNames:[],styles:[]},U(n))}function p(){n()[1]&&lt(a,U(n)[1]=null,U(n)),n()[2]&&lt(a,U(n)[2]=null,U(n))}function v(g){return g.isPrimary&&g.pointerType==="mouse"}var _={handleScroll:h};Ye("pointermove",Ut,m),Ye("scroll",Ut,h);var b=Ae(_);return i(),b}var gg=Y("<div></div>"),yg=Y("<div></div>"),wg=Y("<!> <!> <!>",1);function bg(t,e){Ee(e,!0);const n=()=>w(m,"$eventDurationEditable",o),r=()=>w(p,"$editable",o),s=()=>w(v,"$_interaction",o),i=()=>w(u,"$eventResizableFromStart",o),a=()=>w(h,"$theme",o),[o,l]=Ge();let c=Ce(e,"forceDate",3,void 0),f=Ce(e,"forceMargin",3,void 0),{theme:h,eventDurationEditable:m,eventResizableFromStart:u,editable:p,_interaction:v}=st("state"),_=L(()=>e.chunk.event),b=L(()=>e.chunk.event.display),g=L(()=>!vn(d(b))&&!Bs(d(b))&&pg(d(_),n(),r()));function k(E){return D=>s().action.resize(d(_),D,E,e.axis,c()?.(),f()?.(),e.chunk.zeroDuration)}var S=wg(),C=ae(S);{var x=E=>{var D=gg(),M=L(()=>k(!0));D.__pointerdown=function(...I){d(M)?.apply(this,I)},we(()=>ie(D,1,`${a().resizer??""} ${a().start??""}`)),P(E,D)};$e(C,E=>{d(g)&&i()&&E(x)})}var T=ee(C,2);Pr(T,()=>e.children);var $=ee(T,2);{var A=E=>{var D=yg(),M=L(()=>k(!1));D.__pointerdown=function(...I){d(M)?.apply(this,I)},we(()=>ie(D,1,a().resizer)),P(E,D)};$e($,E=>{d(g)&&E(A)})}P(t,S),Ae(),l()}Ct(["pointerdown"]);var Sg=Y("<!> <!>",1);function $g(t,e){Ee(e,!0);const n=()=>w(v,"$_interaction",l),r=()=>w(f,"$theme",l),s=()=>w(m,"$eventStartEditable",l),i=()=>w(h,"$editable",l),a=()=>w(p,"$_bodyEl",l),o=()=>w(u,"$pointer",l),[l,c]=Ge();let{theme:f,editable:h,eventStartEditable:m,pointer:u,_bodyEl:p,_interaction:v,_iClasses:_}=st("state");lt(v,U(n).resizer=bg,U(n)),gt(()=>{r(),s(),i(),Ne(_,(x,T)=>{let{display:$}=T;return[...x,Bs($)?[r()[$]]:!vn($)&&gf(T,s(),i())?[r().draggable]:[]]})}),gt(()=>{if(a())return gs(a(),"scroll",b)});function b(){for(let x of Object.values(n()))x?.handleScroll?.()}var g=Sg(),k=ae(g);Un(vg(k,{}),x=>lt(v,U(n).action=x,U(n)),()=>n()?.action);var S=ee(k,2);{var C=x=>{Un(_g(x,{}),T=>lt(v,U(n).pointer=T,U(n)),()=>n()?.pointer)};$e(S,x=>{o()&&x(C)})}P(t,g),Ae(),c()}const kg={createOptions(t){t.dateClick=void 0,t.dragConstraint=void 0,t.dragScroll=!0,t.editable=!1,t.eventDragMinDistance=5,t.eventDragStart=void 0,t.eventDragStop=void 0,t.eventDrop=void 0,t.eventDurationEditable=!0,t.eventLongPressDelay=void 0,t.eventResizableFromStart=!1,t.eventResizeStart=void 0,t.eventResizeStop=void 0,t.eventResize=void 0,t.eventStartEditable=!0,t.longPressDelay=1e3,t.pointer=!1,t.resizeConstraint=void 0,t.select=void 0,t.selectBackgroundColor=void 0,t.selectConstraint=void 0,t.selectLongPressDelay=void 0,t.selectMinDistance=5,t.unselect=void 0,t.unselectAuto=!0,t.unselectCancel="",t.theme.draggable="ec-draggable",t.theme.ghost="ec-ghost",t.theme.preview="ec-preview",t.theme.pointer="ec-pointer",t.theme.resizer="ec-resizer",t.theme.start="ec-start",t.theme.dragging="ec-dragging",t.theme.resizingY="ec-resizing-y",t.theme.resizingX="ec-resizing-x",t.theme.selecting="ec-selecting"},createStores(t){t._auxiliary.update(e=>[...e,$g])}};Ct(["pointerdown"]);Ct(["click"]);function xg(t){return Pt([t.slotDuration,t.slotLabelInterval,t._slotTimeLimits,t._intlSlotLabel],e=>M_(It(mn()),...e))}function Cg(t){return Pt([t.slotMinTime,t.slotMaxTime,t.flexibleSlotTimeLimits,t._viewDates,t._filteredEvents],e=>N_(...e))}function Eg(t,e){if(!t.length)return;cf(t,e);let n={columns:[],end:t[0].end};for(let r of t){let s=0;if(r.start<n.end){for(;s<n.columns.length&&!(n.columns[s].at(-1).end<=r.start);++s);r.end>n.end&&(n.end=r.end)}else n={columns:[],end:r.end};n.columns.length<s+1&&n.columns.push([]),n.columns[s].push(r),r.group=n,r.column=s}}function Ag(t){let e="all-day",n;return t?(n=Pe(t)?t({text:e}):t,typeof n=="string"&&(n={html:n})):n={html:e},n}var Tg=Y("<time></time>"),Dg=Y('<div><div></div> <!></div> <div role="row"><div><!></div> <!></div>',1);function mo(t,e){Ee(e,!0);const n=()=>w(l,"$allDayContent",a),r=()=>w(c,"$slotLabelInterval",a),s=()=>w(f,"$theme",a),i=()=>w(h,"$_times",a),[a,o]=Ge();let{allDayContent:l,slotLabelInterval:c,theme:f,_times:h}=st("state"),m=L(()=>Ag(n())),u=L(()=>r()&&r().seconds<=0);var p=Dg(),v=ae(p),_=B(v);or(_,($,A)=>Or?.($,A),()=>d(m));var b=ee(_,2);wt(b,1,i,en,($,A,E)=>{var D=Tg();or(D,(M,I)=>Or?.(M,I),()=>d(A)[1]),we(()=>{ie(D,1,`${s().time??""}${(E||d(u))&&d(A)[2]?"":" "+s().minor}`),Ke(D,"datetime",d(A)[0])}),P($,D)});var g=ee(v,2),k=B(g),S=B(k);{var C=$=>{var A=xe(),E=ae(A);Pr(E,()=>e.lines),P($,A)};$e(S,$=>{e.lines&&$(C)})}var x=ee(k,2);{var T=$=>{var A=xe(),E=ae(A);Pr(E,()=>e.children),P($,A)};$e(x,$=>{e.children&&$(T)})}we(()=>{ie(v,1,s().sidebar),ie(_,1,s().sidebarTitle),ie(g,1,s().days),ie(k,1,s().lines)}),P(t,p),Ae(),o()}var Rg=Y("<div></div>"),Ig=Y("<div><div><!></div></div>");function Pg(t,e){Ee(e,!0);const n=()=>w(m,"$_viewDates",c),r=()=>w(_,"$scrollTime",c),s=()=>w(u,"$_slotTimeLimits",c),i=()=>w(b,"$slotDuration",c),a=()=>w(g,"$slotHeight",c),o=()=>w(k,"$theme",c),l=()=>w(p,"$_times",c),[c,f]=Ge();let{_bodyEl:h,_viewDates:m,_slotTimeLimits:u,_times:p,_recheckScrollable:v,scrollTime:_,slotDuration:b,slotHeight:g,theme:k}=st("state"),S=Te(void 0);gt(()=>{Ne(h,d(S))}),gt(()=>{n(),r(),U(C)});function C(){d(S).scrollTop=((r().seconds-s().min.seconds)/i().seconds-.5)*a()}var x=Ig(),T=B(x),$=B(T);mo($,{get children(){return e.children},lines:E=>{var D=xe(),M=ae(D);wt(M,1,l,en,(I,X)=>{var te=Rg();we(()=>ie(te,1,`${o().line??""}${d(X)[2]?"":" "+o().minor}`)),P(I,te)}),P(E,D)},$$slots:{lines:!0}}),Un(x,A=>K(S,A),()=>d(S)),or(x,(A,E)=>a_?.(A,E),()=>()=>Ne(v,!0)),we(()=>{ie(x,1,o().body),ie(T,1,o().content)}),P(t,x),Ae(),f()}function ri(t,e){Ee(e,!0);const n=()=>w(c,"$slotDuration",a),r=()=>w(h,"$_slotTimeLimits",a),s=()=>w(f,"$slotHeight",a),i=()=>w(l,"$slotEventOverlap",a),[a,o]=Ge();let{slotEventOverlap:l,slotDuration:c,slotHeight:f,_slotTimeLimits:h}=st("state"),m=L(()=>e.chunk.event.display),u=L(()=>p=>{let v=n().seconds,_=r().min.seconds,b=(e.chunk.start-e.date)/1e3,g=(e.chunk.end-e.date)/1e3,k=(b-_)/v*s(),S=(g-b)/v*s()||s(),C=(r().max.seconds-b)/v*s();return p.top=`${k}px`,p["min-height"]=`${S}px`,p.height=`${S}px`,p["max-height"]=`${C}px`,(!vn(d(m))&&!Bs(d(m))||ff(d(m)))&&(p["z-index"]=`${e.chunk.column+1}`,p.left=`${100/e.chunk.group.columns.length*e.chunk.column}%`,p.width=`${100/e.chunk.group.columns.length*(i()?.5*(1+e.chunk.group.columns.length-e.chunk.column):1)}%`),p});_f(t,{get chunk(){return e.chunk},get styles(){return d(u)},axis:"y"}),Ae(),o()}var Og=Y("<div></div>");function Mg(t,e){Ee(e,!0);const n=()=>w(u,"$_now",l),r=()=>w(p,"$_today",l),s=()=>w(f,"$slotDuration",l),i=()=>w(v,"$_slotTimeLimits",l),a=()=>w(h,"$slotHeight",l),o=()=>w(m,"$theme",l),[l,c]=Ge();let{slotDuration:f,slotHeight:h,theme:m,_now:u,_today:p,_slotTimeLimits:v}=st("state"),_=L(()=>(n()-r())/1e3),b=L(()=>{let k=s().seconds,S=i().min.seconds;return(d(_)-S)/k*a()});var g=Og();we(()=>{ie(g,1,o().nowIndicator),tn(g,`top:${d(b)??""}px`)}),P(t,g),Ae(),c()}var Ng=Y("<!> <!> <!>",1),Fg=Y('<div role="cell"><div><!></div> <div><!></div> <div><!></div></div>');function Lg(t,e){Ee(e,!0);const n=()=>w(te,"$_today",_),r=()=>w(C,"$highlightedDates",_),s=()=>w(I,"$validRange",_),i=()=>w(Q,"$_slotTimeLimits",_),a=()=>w(A,"$filterEventsWithResources",_),o=()=>w(M,"$resources",_),l=()=>w(k,"$_filteredEvents",_),c=()=>w(E,"$eventOrder",_),f=()=>w(S,"$_iEvents",_),h=()=>w(T,"$slotDuration",_),m=()=>w($,"$slotHeight",_),u=()=>w(D,"$theme",_),p=()=>w(X,"$_interaction",_),v=()=>w(x,"$nowIndicator",_),[_,b]=Ge();let g=Ce(e,"resource",3,void 0),{_filteredEvents:k,_iEvents:S,highlightedDates:C,nowIndicator:x,slotDuration:T,slotHeight:$,filterEventsWithResources:A,eventOrder:E,theme:D,resources:M,validRange:I,_interaction:X,_today:te,_slotTimeLimits:Q}=st("state"),W=Te(void 0),ne=L(()=>Wt(e.date,n())),q=L(()=>r().some(re=>Wt(re,e.date))),N=L(()=>rl(e.date,s())),O=L(()=>Oe(oe(e.date),i().min)),G=L(()=>Oe(oe(e.date),i().max)),z=L(()=>g()??(a()?o():void 0)),fe=L(()=>{if(d(N))return[[],[]];let re=[],He=[];for(let at of l())if((!at.allDay||vn(at.display))&&Pi(at,d(O),d(G),d(z))){let Qe=Ii(at,d(O),d(G));switch(at.display){case"background":He.push(Qe);break;default:re.push(Qe)}}return Eg(re,c()),[re,He]}),be=L(()=>go(d(fe),2)),de=L(()=>d(be)[0]),Me=L(()=>d(be)[1]),le=L(()=>d(N)?[]:f().map(re=>re&&Pi(re,d(O),d(G),g())?Ii(re,d(O),d(G)):null));function ve(re,He){return He-=Fr(d(W)).top,{allDay:!1,date:Oe(Oe(oe(e.date),i().min),h(),u_(He/m())),resource:g(),dayEl:d(W),disabled:d(N)}}Ms(()=>{nl(d(W),ve)});var ge=Fg();ge.__pointerdown=function(...re){(d(N)?void 0:p().action?.select)?.apply(this,re)};var Fe=B(ge),it=B(Fe);{var We=re=>{var He=xe(),at=ae(He);wt(at,17,()=>d(Me),Qe=>Qe.event,(Qe,ft)=>{ri(Qe,{get date(){return e.date},get chunk(){return d(ft)}})}),P(re,He)};$e(it,re=>{d(N)||re(We)})}var ye=ee(Fe,2),zt=B(ye);{var pe=re=>{var He=Ng(),at=ae(He);{var Qe=ht=>{ri(ht,{get date(){return e.date},get chunk(){return d(le)[1]}})};$e(at,ht=>{d(le)[1]&&ht(Qe)})}var ft=ee(at,2);wt(ft,17,()=>d(de),ht=>ht.event,(ht,nn)=>{ri(ht,{get date(){return e.date},get chunk(){return d(nn)}})});var jn=ee(ft,2);{var Xr=ht=>{ri(ht,{get date(){return e.date},get chunk(){return d(le)[0]}})};$e(jn,ht=>{d(le)[0]&&!d(le)[0].event.allDay&&ht(Xr)})}P(re,He)};$e(zt,re=>{d(N)||re(pe)})}var ke=ee(ye,2),me=B(ke);{var Se=re=>{Mg(re,{})};$e(me,re=>{v()&&d(ne)&&!d(N)&&re(Se)})}Un(ge,re=>K(W,re),()=>d(W)),we(re=>{ie(ge,1,`${u().day??""} ${re??""}${d(ne)?" "+u().today:""}${d(q)?" "+u().highlight:""}${d(N)?" "+u().disabled:""}`),ie(Fe,1,u().bgEvents),ie(ye,1,u().events),ie(ke,1,u().extra)},[()=>u().weekdays?.[e.date.getUTCDay()]]),P(t,ge),Ae(),b()}Ct(["pointerdown"]);function Ra(t,e){Ee(e,!0);let n=Ce(e,"longChunks",19,()=>({})),r=Te(void 0),s=Te(1),i=L(()=>e.chunk.event),a=L(()=>e.chunk.event.display),o=L(()=>f=>(vn(d(a))?f.width=`calc(${e.chunk.days*100}% + ${e.chunk.days-1}px)`:(f.width=`calc(${e.chunk.days*100}% + ${(e.chunk.days-1)*7}px)`,f["margin-top"]=`${d(i)._margin??d(s)}px`),f));function l(){d(r)&&K(s,k_(e.chunk,n(),g_(d(r))),!0)}var c={reposition:l};return _f(t,{get chunk(){return e.chunk},get styles(){return d(o)},axis:"x",forceMargin:()=>Fr(d(r)).top-Fr(fo(d(r),1)).top,get el(){return d(r)},set el(f){K(r,f,!0)}}),Ae(c)}var Bg=Y("<div><!></div>"),Ug=Y('<div role="cell"><div><!></div> <!> <div><!></div></div>');function Wg(t,e){Ee(e,!0);const n=()=>w(v,"$_today",o),r=()=>w(h,"$highlightedDates",o),s=()=>w(u,"$validRange",o),i=()=>w(m,"$theme",o),a=()=>w(p,"$_interaction",o),[o,l]=Ge();let c=Ce(e,"iChunks",19,()=>[]),f=Ce(e,"resource",3,void 0),{highlightedDates:h,theme:m,validRange:u,_interaction:p,_today:v}=st("state"),_=Te(void 0),b=[],g=L(()=>e.chunks.filter(q=>Wt(q.date,e.date))),k=L(()=>e.bgChunks.filter(q=>Wt(q.date,e.date))),S=L(()=>Wt(e.date,n())),C=L(()=>r().some(q=>Wt(q,e.date))),x=L(()=>rl(e.date,s()));Ms(()=>{nl(d(_),()=>({allDay:!0,date:e.date,resource:f(),dayEl:d(_),disabled:d(x)}))});function T(){d(x)||df(b,d(g))}var $={reposition:T},A=Ug();A.__pointerdown=function(...q){(d(x)?void 0:a().action?.select)?.apply(this,q)};var E=B(A),D=B(E);{var M=q=>{var N=xe(),O=ae(N);wt(O,17,()=>d(k),G=>G.event,(G,z)=>{Ra(G,{get chunk(){return d(z)}})}),P(q,N)};$e(D,q=>{d(x)||q(M)})}var I=ee(E,2);{var X=q=>{var N=Bg(),O=B(N);Ra(O,{get chunk(){return c()[0]}}),we(()=>ie(N,1,`${i().events??""} ${i().preview??""}`)),P(q,N)};$e(I,q=>{c()[0]&&Wt(c()[0].date,e.date)&&!d(x)&&q(X)})}var te=ee(I,2),Q=B(te);{var W=q=>{var N=xe(),O=ae(N);wt(O,19,()=>d(g),G=>G.event,(G,z,fe)=>{Un(Ra(G,{get chunk(){return d(z)},get longChunks(){return e.longChunks}}),(be,de)=>b[de]=be,be=>b?.[be],()=>[d(fe)])}),P(q,N)};$e(Q,q=>{d(x)||q(W)})}Un(A,q=>K(_,q),()=>d(_)),we(q=>{ie(A,1,`${i().day??""} ${q??""}${d(S)?" "+i().today:""}${d(C)?" "+i().highlight:""}${d(x)?" "+i().disabled:""}`),ie(E,1,i().bgEvents),ie(te,1,i().events)},[()=>i().weekdays?.[e.date.getUTCDay()]]),P(t,A);var ne=Ae($);return l(),ne}Ct(["pointerdown"]);function Hg(t,e){Ee(e,!0);const n=()=>w(g,"$validRange",c),r=()=>w(b,"$filterEventsWithResources",c),s=()=>w(_,"$resources",c),i=()=>w(m,"$_filteredEvents",c),a=()=>w(v,"$hiddenDays",c),o=()=>w(p,"$eventOrder",c),l=()=>w(u,"$_iEvents",c),[c,f]=Ge();let h=Ce(e,"resource",3,void 0),{_filteredEvents:m,_iEvents:u,eventOrder:p,hiddenDays:v,resources:_,filterEventsWithResources:b,validRange:g}=st("state"),k=[],S=L(()=>bc(e.dates[0],n())),C=L(()=>Hn(oe(bc(e.dates.at(-1),n())))),x=L(()=>h()??(r()?s():void 0)),T=L(()=>{let Q=[],W=[];for(let q of i())if(q.allDay&&Pi(q,d(S),d(C),d(x))){let N=Ii(q,d(S),d(C));vn(q.display)?W.push(N):Q.push(N)}Aa(W,a(),o());let ne=Aa(Q,a(),o());return[Q,W,ne]}),$=L(()=>go(d(T),3)),A=L(()=>d($)[0]),E=L(()=>d($)[1]),D=L(()=>d($)[2]);function M(){df(k,e.dates)}gt(()=>{d(A),U(M)});let I=L(()=>l().map(Q=>{let W;return Q&&Q.allDay&&Pi(Q,d(S),d(C),h())?(W=Ii(Q,d(S),d(C)),Aa([W],a(),o())):W=null,W}));var X=xe();Ye("resize",Ut,M);var te=ae(X);wt(te,17,()=>e.dates,en,(Q,W,ne)=>{Un(Wg(Q,{get date(){return d(W)},get chunks(){return d(A)},get bgChunks(){return d(E)},get longChunks(){return d(D)},get iChunks(){return d(I)},get resource(){return h()}}),(q,N)=>k[N]=q,q=>k?.[q],()=>[ne])}),P(t,X),Ae(),f()}var qg=Y('<div role="columnheader"><time></time></div>'),zg=Y("<div><div><!> <div></div></div></div>"),jg=Y("<div><!> <div></div></div> <!> <!>",1);function Cc(t,e){Ee(e,!1);const n=()=>w(v,"$theme",l),r=()=>w(f,"$_viewDates",l),s=()=>w(u,"$_today",l),i=()=>w(m,"$_intlDayHeaderAL",l),a=()=>w(h,"$_intlDayHeader",l),o=()=>w(p,"$allDaySlot",l),[l,c]=Ge();let{_viewDates:f,_intlDayHeader:h,_intlDayHeaderAL:m,_today:u,allDaySlot:p,theme:v}=st("state");Os();var _=jg(),b=ae(_),g=B(b);mo(g,{children:(T,$)=>{var A=xe(),E=ae(A);wt(E,1,r,en,(D,M)=>{var I=qg(),X=B(I);or(X,(te,Q)=>Or?.(te,Q),()=>a().format(d(M))),we((te,Q,W,ne)=>{ie(I,1,`${n().day??""} ${te??""}${Q??""}`),Ke(X,"datetime",W),Ke(X,"aria-label",ne)},[()=>n().weekdays?.[d(M).getUTCDay()],()=>Wt(d(M),s())?" "+n().today:"",()=>hn(d(M),10),()=>i().format(d(M))]),P(D,I)}),P(T,A)},$$slots:{default:!0}});var k=ee(g,2),S=ee(b,2);{var C=T=>{var $=zg(),A=B($),E=B(A);mo(E,{children:(M,I)=>{Hg(M,{get dates(){return r()}})},$$slots:{default:!0}});var D=ee(E,2);we(()=>{ie($,1,n().allDay),ie(A,1,n().content),ie(D,1,n().hiddenScroll)}),P(T,$)};$e(S,T=>{o()&&T(C)})}var x=ee(S,2);Pg(x,{children:(T,$)=>{var A=xe(),E=ae(A);wt(E,1,r,en,(D,M)=>{Lg(D,{get date(){return d(M)}})}),P(T,A)},$$slots:{default:!0}}),we(()=>{ie(b,1,n().header),ie(k,1,n().hiddenScroll)}),P(t,_),Ae(),c()}const Xg={createOptions(t){t.buttonText.timeGridDay="day",t.buttonText.timeGridWeek="week",t.view="timeGridWeek",t.views.timeGridDay={buttonText:E_,component:Cc,dayHeaderFormat:{weekday:"long"},duration:{days:1},theme:wc("ec-time-grid ec-day-view"),titleFormat:{year:"numeric",month:"long",day:"numeric"}},t.views.timeGridWeek={buttonText:A_,component:Cc,duration:{weeks:1},theme:wc("ec-time-grid ec-week-view")}},createStores(t){t._slotTimeLimits=Cg(t),t._times=xg(t)}};Ct(["click"]);Ct(["pointerdown"]);var Vg=Y('<div class="centered svelte-13b4evp"><h1>fetching your assignments... <br/> </h1></div>'),Jg=Y('<div class="centered svelte-13b4evp"><h1>reading your assignments... <br/> </h1></div>'),Yg=Y('<div class="assignment svelte-13b4evp"><div class="assignment-details"> </div> <div class="assignment-hours"><input type="number" min="0" step="0.1" class="svelte-13b4evp"/> hours</div></div>'),Kg=Y(`<div class="assignment-overview svelte-13b4evp"><div class="assignment-overview-header svelte-13b4evp">this week's to-dos</div> <div class="assignments-list svelte-13b4evp"></div></div> <!>`,1),Gg=Y("<!> <!>",1),Qg=Y('<div class="plan-page-container svelte-13b4evp"><header class="svelte-13b4evp"><!></header> <div class="content svelte-13b4evp"><!></div></div>');function Zg(t,e){Ee(e,!0);const n="AIzaSyBnfBzGkZ0KgWXO7Pq7O4RhCNozHNk4dNM";let r=[{course:"CSE 331",title:"Concept Check 12",dueDate:new Date("2025-10-21"),description:"This is a quick concept check to assess your understanding of recent lecture content. You can expect it to take just a few minutes"},{course:"CSE 331",title:"At Home Worksheet 4",dueDate:new Date("2025-10-24"),description:"This is an at-home worksheet focusing on induction proofs. Complete the problems and submit your answers via Gradescope. There are 5 problems with multiple parts."},{course:"CSE 351",title:"Lab 2 - disassembling and defusing a binary bomb",dueDate:new Date("2025-10-27"),description:"This is your second lab assignment where you'll be disassembling a binary bomb using GDB and defusing it by providing correct inputs to each phase. There are five phases, one extra credit phase, and a secret phase. You can expect this to take several hours, so start early!"},{course:"CSE 390R",title:"Read a paper",dueDate:new Date("2025-10-20"),description:"Find a research paper related to your project topic, read it (you can skim), and then answer a few questions regarding it. Be prepared to talk about the paper in class."},{course:"EDUC 251",title:"Complete readings",dueDate:new Date("2025-10-22"),description:"Finish reading chapters 5 and 6 from 'Educational Psychology' and take notes on key concepts discussed in these chapters."}],s=Gt([]),i=Te(0),a=L(()=>s.slice().sort(($,A)=>$.assignment.dueDate.getTime()-A.assignment.dueDate.getTime())),o=Te(!1),l=null,c=[],f=Te(!1);const h=async()=>{let $=new ue({apiKey:"mcr-0Ri0vxCbvqK8FH6jDl",baseURL:"https://neuro.mancer.tech/oai/v1",dangerouslyAllowBrowser:!0});const A='You are an assistant that helps students plan their study schedules. Given a list of assignments with their course names, titles, due dates, and descriptions, estimate the number of hours a student would typically need to complete each assignment. After considering the complexity and workload, provide your estimate as a float prefixed by "HOURS_NEEDED:". Ensure the number is realistic and do not provide a ranged estimate. You should put your estimate at the end of your response. Here is one assignment:';for(let E of r){let D=null;for(;!D;){const M=await $.chat.completions.create({model:"lumi-8b-v2",max_tokens:1e3,messages:[{role:"system",content:`${A}`},{role:"user",content:`Course: ${E.course}
    Title: ${E.title}
    Description: ${E.description}`}]});if(console.log(M.choices[0].message.content),M.choices[0].message.content&&(D=M.choices[0].message.content.match(/HOURS_NEEDED:\s*(\d+\.*\d*)/),D)){const I=parseFloat(D[1]);s.push({assignment:E,hoursNeeded:I})}}}};Ms(()=>{(!(Be.canvasConnected||Be.edstemConnected||Be.gradescopeConnected)||Be.gapiToken.length===0)&&(location.hash="#connect");let $=setInterval(()=>{if(K(i,d(i)+Math.min(Math.floor(Math.random()*r.length/2),r.length-d(i))),d(i)===r.length){if(clearInterval($),s.length===r.length)return;h()}},40)});const m=$=>{const A=new Date,E=[];console.log("Generating work blocks for assignments:",d(a));const D=9,M=21,I=15,X=(N,O)=>{const G=new Date(N);G.setHours(D,0,0,0);const z=new Date(N);return z.setHours(M,0,0,0),N.toDateString()!==O.toDateString()||N<G||O>z||O<=N?!0:[...$,...E].some(fe=>{const be=new Date(fe.start),de=new Date(fe.end);return be<O&&de>N})},te=(N,O)=>{let G=0,z=new Date(N);const fe=new Date(N);fe.setHours(M,0,0,0);for(let be=0;be<O;be++){const de=new Date(z);if(de.setMinutes(de.getMinutes()+I),de>fe||X(z,de))break;G++,z=de}return G},Q=new Map(d(a).map(N=>[N.assignment.title,Math.ceil(N.hoursNeeded*60/I)]));let W=new Date(A);W.setSeconds(0,0);{const N=W.getMinutes(),O=N%I===0?I:I-N%I;W.setMinutes(N+O)}console.log("Starting search from (next 15-min slot):",W);const ne=14,q=new Date(W);for(q.setDate(q.getDate()+ne);W<q&&Array.from(Q.values()).some(N=>N>0);){if(W.getHours()<D)W.setHours(D,0,0,0);else if(W.getHours()>=M){W.setDate(W.getDate()+1),W.setHours(D,0,0,0);continue}const N=new Date(W);if(N.setMinutes(N.getMinutes()+I),X(W,N)){W=N;continue}let O=null,G=0;const z=[];for(const fe of d(a)){const be=Math.ceil(fe.hoursNeeded*60/I),de=Q.get(fe.assignment.title)??be;if(de===0)continue;const Me=Math.ceil(be/3),le=te(W,de);if(le<Me)continue;const ve=fe.assignment.dueDate instanceof Date?fe.assignment.dueDate.getTime()-W.getTime():Number.POSITIVE_INFINITY,ge=ve>0&&ve<=1440*60*1e3;z.push({planItem:fe,availableSlots:le,minSlots:Me,slotsRemaining:de,dueInMs:ve,urgent:ge})}if(z.length>0){const fe=z.filter(le=>le.urgent),be=fe.length>0?fe:z,de=be.map(le=>{const ve=le.dueInMs===Number.POSITIVE_INFINITY?Number.POSITIVE_INFINITY:le.dueInMs/36e5,ge=isFinite(ve)?ve<=0?1:Math.max(0,(24-ve)/24):0,Fe=le.availableSlots*(1+ge*3);return{...le,priorityScore:Fe,dueHours:ve}});de.sort((le,ve)=>ve.priorityScore!==le.priorityScore?ve.priorityScore-le.priorityScore:le.dueHours!==ve.dueHours?le.dueHours-ve.dueHours:ve.slotsRemaining-le.slotsRemaining),O=de[0].planItem,G=de[0].availableSlots,console.log(`${be===fe?"Urgent pool":"Normal pool"}: chose ${O.assignment.title} | score=${de[0].priorityScore.toFixed(2)} | availSlots=${de[0].availableSlots} | dueIn=${isFinite(de[0].dueHours)?de[0].dueHours.toFixed(1)+"h":"n/a"}`)}if(O&&G>0){const fe=new Date(W),be=new Date(fe);be.setHours(M,0,0,0);const de=Math.max(0,Math.floor((be.getTime()-fe.getTime())/(1e3*60*I)));let Me=Math.min(G,de);Me<G&&console.log(`Clamped block for ${O.assignment.title} from ${G} slots to ${Me} slots (workday end)`);const le=Math.ceil(O.hoursNeeded*60/I),ve=Math.ceil(le/3);if(Me<ve){const ye=new Date(W);ye.setMinutes(ye.getMinutes()+I),W=ye;continue}const ge=new Date(fe);ge.setMinutes(ge.getMinutes()+Me*I);const Fe=v(`Work on: ${O.assignment.title}`,fe);E.push({id:Fe,title:`Work on: ${O.assignment.title}`,start:new Date(fe),end:new Date(ge),backgroundColor:"#3653c4",editable:!0,extendedProps:{isWorkBlock:!0,blockKey:Fe}});const it=Q.get(O.assignment.title)??le,We=Math.max(0,it-Me);Q.set(O.assignment.title,We),console.log(`Scheduled ${Me*I}min block for ${O.assignment.title} at ${fe} to ${ge} (${We} slots remaining)`),W=ge}else W=N}for(const[N,O]of Q.entries())if(O>0){const z=(O*I/60).toFixed(2);console.warn(`Warning: Could not schedule ${O} slots (~${z}h) for ${N}`)}return console.log("Final scheduled blocks:",E),E};let u=Gt({view:"timeGridWeek",height:"100%",headerToolbar:{start:"title",center:"",end:""},editable:!1,eventDrop:$=>{const A=$?.event??$,E=A.id||A?.extendedProps?.blockKey;if(!E)return;const D=new Date(A.start),M=new Date(A.end),I=c.findIndex(X=>X.id===E||X.extendedProps?.blockKey===E||v(X.title,X.start)===E);I!==-1&&(c[I].start=D,c[I].end=M,console.log("Updated work block after drop:",E,D,M))},eventResize:$=>{const A=$?.event??$,E=A.id||A?.extendedProps?.blockKey;if(!E)return;const D=new Date(A.start),M=new Date(A.end),I=c.findIndex(X=>X.id===E||X.extendedProps?.blockKey===E||v(X.title,X.start)===E);I!==-1&&(c[I].start=D,c[I].end=M,console.log("Updated work block after resize:",E,D,M))},eventSources:[{events:async($,A,E)=>{try{let I=(await(await fetch(`https://www.googleapis.com/calendar/v3/users/me/calendarList?key=${n}`,{headers:{Authorization:`Bearer ${Be.gapiToken}`}})).json()).items.find(ne=>ne.primary);I&&!l&&(l=I.id);let Q=(await(await fetch(`https://www.googleapis.com/calendar/v3/calendars/${I.id}/events?timeMin=${$.start.toISOString()}&timeMax=${$.end.toISOString()}&singleEvents=true&orderBy=startTime&key=${n}`,{headers:{Authorization:`Bearer ${Be.gapiToken}`}})).json()).items.map(ne=>{const q=ne.start.dateTime||ne.start.date,N=ne.end.dateTime||ne.end.date,O=new Date(q),G=new Date(N);return{title:ne.summary,start:O,end:G,editable:!1,startEditable:!1,durationEditable:!1,backgroundColor:"#444"}});const W=m(Q);c=W,A([...Q,...W])}catch(D){E(D)}}}],loading:$=>{console.log("Calendar loading:",$)},events:[]});const p=async()=>{if(l)return l;const E=(await(await fetch(`https://www.googleapis.com/calendar/v3/users/me/calendarList?key=${n}`,{headers:{Authorization:`Bearer ${Be.gapiToken}`}})).json()).items?.find(D=>D.primary);if(!E)throw new Error("Primary calendar not found");return l=E.id,l},v=($,A)=>{const E=Math.floor(A.getTime()/1e3),D=$.toLowerCase().replace(/[^a-z0-9-_]+/g,"-").slice(0,64).replace(/^-+|-+$/g,"")||"block";return`wao-${E}-${D}`.slice(0,128)},_=async()=>{if(!d(f))try{K(f,!0);const $=await p(),A=Intl.DateTimeFormat().resolvedOptions().timeZone;for(const E of c){const D=E.start instanceof Date?E.start:new Date(E.start),M=E.end instanceof Date?E.end:new Date(E.end),I=E?.extendedProps?.blockKey||E?.id||v(E.title,D),X=`https://www.googleapis.com/calendar/v3/calendars/${encodeURIComponent($)}/events?privateExtendedProperty=${encodeURIComponent("blockKey="+I)}&maxResults=1&key=${n}`,te=await fetch(X,{headers:{Authorization:`Bearer ${Be.gapiToken}`}});if(te.ok){const ne=await te.json();if(Array.isArray(ne.items)&&ne.items.length>0){console.log("Event already exists by blockKey (skipping):",I);continue}}const Q={summary:E.title,start:{dateTime:D.toISOString(),timeZone:A},end:{dateTime:M.toISOString(),timeZone:A},description:"Planned by WorkAtOnce",extendedProperties:{private:{source:"workatonce",blockKey:I}}},W=await fetch(`https://www.googleapis.com/calendar/v3/calendars/${encodeURIComponent($)}/events?key=${n}`,{method:"POST",headers:{Authorization:`Bearer ${Be.gapiToken}`,"Content-Type":"application/json"},body:JSON.stringify(Q)});if(W.ok)console.log("Inserted event:",I,D,M);else if(W.status!==409){const ne=await W.text();console.error("Failed to insert event",I,W.status,ne)}else console.log("Event already exists (skipping):",I)}location.hash="#done"}catch($){console.error("Finalize plan failed:",$),alert("Failed to finalize plan. Please try again.")}finally{K(f,!1)}};var b=Qg(),g=B(b),k=B(g);Hi(k);var S=ee(g,2),C=B(S);{var x=$=>{var A=Vg(),E=B(A),D=ee(B(E),2);we(()=>Zt(D,`(${d(i)??""} fetched)`)),P($,A)},T=$=>{var A=xe(),E=ae(A);{var D=I=>{var X=Jg(),te=B(X),Q=ee(B(te),2);we(()=>Zt(Q,`(${s.length??""}/${r.length??""})`)),P(I,X)},M=I=>{var X=xe(),te=ae(X);{var Q=ne=>{var q=Kg(),N=ae(q),O=ee(B(N),2);wt(O,21,()=>d(a),en,(z,fe,be)=>{let de=()=>d(fe).assignment;var Me=Yg(),le=B(Me),ve=B(le),ge=ee(le,2),Fe=B(ge);we((it,We)=>Zt(ve,`${de().course??""} - ${it??""}, due in ${We??""}`),[()=>de().title.toLowerCase(),()=>s_(de().dueDate)]),Co(Fe,()=>d(a)[be].hoursNeeded,it=>d(a)[be].hoursNeeded=it),P(z,Me)});var G=ee(N,2);Es(G,{text:"looks good",onclick:()=>K(o,!0)}),P(ne,q)},W=ne=>{var q=Gg(),N=ae(q);{let G=L(()=>[Xg,kg]);ug(N,{get plugins(){return d(G)},get options(){return u}})}var O=ee(N,2);{let G=L(()=>d(f)?"finalizing…":"finalize plan");Es(O,{get text(){return d(G)},onclick:_})}P(ne,q)};$e(te,ne=>{d(o)===!1?ne(Q):ne(W,!1)},!0)}P(I,X)};$e(E,I=>{s.length!==r.length?I(D):I(M,!1)},!0)}P($,A)};$e(C,$=>{r.length===0||d(i)<r.length?$(x):$(T,!1)})}Jt(5,S,()=>Nn,()=>({y:20,duration:400,delay:400})),P(t,b),Ae()}var ey=ip(Y('<script src="https://accounts.google.com/gsi/client" async><\/script><!>',1)),ty=Y('<div><h1 style="text-align: center;">All done!</h1> <div>Your assignments have been successfully planned!</div> <div style="position: absolute; top: 20px; left: 20px;"><!></div></div>'),ny=Y('<main class="svelte-1n46o8q"><!></main>');function ry(t,e){Ee(e,!0);const n=new am(window.location.href);addEventListener("hashchange",()=>{n.href=window.location.href});const r=async()=>{Be.gapiClient=google.accounts.oauth2.initTokenClient({client_id:"376302852820-d16v40rksb0a2abqha80rhshol4s8sgr.apps.googleusercontent.com",callback:l=>{Be.gapiToken=l.access_token},scope:"https://www.googleapis.com/auth/calendar"}),Be.gapiInitialized=!0};var s=ny();rp(l=>{var c=ey(),f=ae(c);ee(f),Ye("load",f,r),P(l,c)});var i=B(s);{var a=l=>{var c=xe(),f=ae(c);{var h=m=>{Kp(m,{})};$e(f,m=>{Be.gapiInitialized&&m(h)})}P(l,c)},o=l=>{var c=xe(),f=ae(c);{var h=u=>{Zg(u,{})},m=u=>{var p=xe(),v=ae(p);{var _=g=>{var k=ty(),S=ee(B(k),4),C=B(S);Hi(C),P(g,k)},b=g=>{rm(g)};$e(v,g=>{n.hash.includes("#done")?g(_):g(b,!1)},!0)}P(u,p)};$e(f,u=>{n.hash.includes("#plan")?u(h):u(m,!1)},!0)}P(l,c)};$e(i,l=>{n.hash.includes("#connect")?l(a):l(o,!1)})}P(t,s),Ae()}op(ry,{target:document.getElementById("app")});
